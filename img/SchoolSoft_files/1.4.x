!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lingVisSdk",[],e):"object"==typeof exports?exports.lingVisSdk=e():t.lingVisSdk=e()}(window,(function(){return function(){var t={742:function(t,e){"use strict";e.b$=function(t){var e,n,r=l(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)n[s]=r[s],i[r.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,i){for(var o,r,s=[],a=e;a<i;a+=3)(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[o>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},697:function(t,e,n){"use strict";var i=n(645),o=n.n(i)()((function(t){return t[1]}));o.push([t.id,":root{\n    --dark-mode-cloze-color: white;\n    --dark-mode-cloze-hover: #07677e;\n    --dark-mode-cloze-panel-main: rgb(4, 38, 107);\n    --dark-mode-cloze-panel-word-text: rgba(255,255,255,0.7);\n    --dark-mode-cloze-panel-header-text: #666;\n    --dark-mode-cloze-panel-header-background: black;\n    --dark-mode-cloze-panel-close-color: white;\n\n    --light-mode-cloze-color: black;\n    --light-mode-cloze-hover: #15b3e1;\n    --light-mode-cloze-panel-main: rgb(56, 126, 245);\n    --light-mode-cloze-panel-word-text: white;\n    --light-mode-cloze-panel-header-text: #666;\n    --light-mode-cloze-panel-header-background: white;\n    --light-mode-cloze-panel-close-color: black;\n\n    --mode-cloze-color: var(--light-mode-cloze-color);\n    --mode-cloze-hover: var(--light-mode-cloze-hover);\n    --mode-cloze-panel-main: var(--light-mode-cloze-panel-main);\n    --mode-cloze-panel-word-text: var(--light-mode-cloze-panel-word-text);\n    --mode-cloze-panel-header-text: var(--light-mode-cloze-panel-header-text);\n    --mode-cloze-panel-header-background: var(--light-mode-cloze-panel-header-background);\n    --mode-cloze-panel-close-color: var(--light-mode-cloze-panel-close-color);\n}\n\n.polyLingVis-overlay {\n    --mode-cloze-color: var(--dark-mode-cloze-color);\n    --mode-cloze-hover: var(--dark-mode-cloze-hover);\n    --mode-cloze-panel-main: var(--dark-mode-cloze-panel-main);\n    --mode-cloze-panel-word-text: var(--dark-mode-cloze-panel-word-text);\n    --mode-cloze-panel-header-text: var(--dark-mode-cloze-panel-header-text);\n    --mode-cloze-panel-header-background: var(--dark-mode-cloze-panel-header-background);\n    --mode-cloze-panel-close-color: var(--dark-mode-cloze-panel-close-color);\n}\n\n#polyLingVis-cloze-panel {\n    max-width: 365px;\n    border: 1px solid var(--mode-cloze-panel-main);\n    border-radius: 5px;\n    width: 60%;\n    display: none;\n    position: absolute;\n    background-color: var(--mode-cloze-panel-main);\n    overflow: visible !important;\n    font-family: 'Roboto', 'Helvetica Neue', sans-serif;\n    z-index: 5\n}\n\n#polyLingVis-cloze-panel .polyLingVis-panel-heading {\n    display: flex;\n    align-items: center;\n    padding: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    border-bottom: 1px solid var(--mode-cloze-panel-main);\n    cursor: move;\n    background-color: var(--mode-cloze-panel-header-background);\n    position: relative;\n}\n\n#polyLingVis-cloze-panel .polyLingVis-panel-heading h6 {\n    margin: 0;\n    font-size: 0.6875rem;\n    color: #777;\n}\n\n#polyLingVis-cloze-panel .polyLingVis-panel-body {\n    padding: 20px;\n    font-size: 0.875rem;\n    font-weight: 500;\n    line-height: 2;\n    color: var(--mode-cloze-panel-word-text);\n}\n\n#polyLingVis-cloze-panel .polyLingVis-panel-body * {\n    margin-right: 5px;\n    cursor: pointer;\n}\n\n#polyLingVis-cloze-panel h6.polyLingVis-panel-title.polyLingVis-cloze-panel-title {\n    font-size: 11px;\n    text-align: center;\n    color: var(--mode-cloze-panel-header-text);\n    padding-right: 28px;\n}\n\n\ndiv.polyLingVis-link-line {\n    position: absolute;\n    width: 2px;\n    background-color: lightgrey;\n    z-index: 4;\n    -webkit-transform-origin: top left;\n    transform-origin: top left;\n}\n\ndiv.polyLingVis-label {\n    position: absolute;\n    display: inline-block;\n    max-width:300px;\n    max-height:30px;\n    overflow: hidden;\n    border-style:solid;\n    border-color:lightgrey;\n    border-width:1px;\n    background-color: lightyellow;\n    font-size: 80%;\n    line-height: 14px;\n    cursor: pointer;\n    padding: 5px;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n\n.polyLingVis-overlay div.polyLingVis-link-line {\n    background-color: rgba(255, 255, 255, 0.5);\n}\n\n.polyLingVis-tts.polyLingVis-overlay div.polyLingVis-link-line.polyLingVis-token-active {\n    background-color: cyan;\n}\n\n.polyLingVis-tts div.polyLingVis-link-line.polyLingVis-token-active {\n    background-color: rgb(50, 205, 50);\n}\n\n.polyLingVis-overlay div.polyLingVis-label {\n    padding: 3px;\n    font-size: 1em;\n    font-family: 'Roboto', 'Helvetica Neue', sans-serif;\n    color: rgba(255, 255, 255, 0.6);\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.polyLingVis-dark div.polyLingVis-label {\n    background-color: var(--dark-mode-cloze-panel-main);\n}\n\n.polyLingVis-overlay div.polyLingVis-label.label-below {\n    border-top: 1px solid rgba(228, 228, 228, 0.5);\n    border-bottom: initial;\n    border-left: initial;\n    border-right: initial;\n}\n\n.polyLingVis-overlay div.polyLingVis-label.label-above {\n    border-bottom: 1px solid rgba(228, 228, 228, 0.5);\n    border-top: initial;\n    border-left: initial;\n    border-right: initial;\n}\n\n.polyLingVis-tts div.polyLingVis-label {\n    background-color: rgb(0, 0, 0, 0.2);\n    color: rgb(255, 255, 255, 0.5);\n    padding: 0px;\n}\n\n.polyLingVis-tts.polyLingVis-overlay div.polyLingVis-label.polyLingVis-token-active {\n    background-color: rgb(0, 0, 0, 0.2);\n    color: cyan;\n}\n\n.polyLingVis-tts div.polyLingVis-label.polyLingVis-token-active {\n    background-color: rgb(50, 205, 50);\n    color: white;\n}\n\n.polyLingVis-overlay .polyLingVis-link-line {\n    z-index: 999;\n}\n\n\ndiv.polyLingVis-label.polyLingVis-cloze-hover {\n    background-color: var(--mode-cloze-hover);\n    color: var(--mode-cloze-color);\n}\n\n.polyLingVis-cloze-src {\n    background-color: var(--mode-cloze-panel-main);\n    border-radius: 10px;\n    padding: 4px;\n}\n\n#polyLingVis-cloze-close {\n    cursor: default;\n    position: absolute;\n    top: 45%;\n    right: 0;\n    padding: 8px;\n    transform: translate(0%, -50%);\n    font-family: Verdana, sans-serif;\n    font-size: 14px;\n    text-decoration: none;\n    color: var(--mode-cloze-panel-close-color);\n}\n  ",""]),e.Z=o},899:function(t,e,n){"use strict";var i=n(645),o=n.n(i),r=n(667),s=n.n(r),a=n(357),l=n(710),u=n(517),c=n(796),h=n(164),p=n(367),d=n(543),g=n(540),f=n(177),m=n(557),y=n(570),v=o()((function(t){return t[1]})),b=s()(a.Z),L=s()(l.Z),x=s()(u.Z),w=s()(c.Z),k=s()(h.Z),M=s()(p.Z),E=s()(d.Z),I=s()(g.Z),T=s()(f.Z),C=s()(m.Z),N=s()(y.Z);v.push([t.id,'#translateBox div {\n  margin: 0em;\n  padding: 0em;\n}\n\n#translateBox {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  z-index: 2147483647;\n  overflow: hidden;\n  background-color: #fff;\n  font-family: "Roboto", "Helvetica Neue", sans-serif;\n  font-size: 12px;\n  position: relative;\n}\n\n#translateBox.poly-box-default {\n  background-color: #fff;\n  border: 1px solid #686868;\n  border-radius: 5px;\n  font-size: 12px;\n}\n\n#translateBox.poly-box-web {\n  position: fixed;\n  box-sizing: content-box;\n  min-width: 300px;\n  min-height: 150px;\n  width: 300px;\n  height: 150px;\n  max-height: 60%;\n}\n\n#translateBox.hidden {\n  display: none !important;\n}\n\n#translateBox.show {\n  display: flex !important;\n}\n\n#translateBox .poly-box-switcher {\n  font-size: 16px;\n  color: #333;\n  padding-bottom: 5px;\n  padding-top: 5px;\n  padding-right: 10px;\n}\n\n#translateBox #poly-box-header {\n  display: flex;\n  position: relative;\n  height: 40px;\n  overflow: hidden;\n  background-color: #eeeeee;\n  border-bottom: 1px solid #b6b6b6;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  cursor: pointer;\n}\n\n#translateBox #poly-box-header > div {\n  height: 100%;\n}\n\n#translateBox #poly-box-header #poly-box-header-color-switcher {\n  opacity: 1;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 40px;\n  height: 100%;\n  background-size: 25px;\n  background-repeat: no-repeat;\n  background-position: center;\n  transition: opacity .3s ease-in;\n}\n\n#translateBox #poly-box-header.yellow #poly-box-header-color-switcher {\n  background-image: url('+b+");\n}\n\n#translateBox #poly-box-header.red #poly-box-header-color-switcher {\n  background-image: url("+L+");\n}\n\n#translateBox #poly-box-header.green #poly-box-header-color-switcher {\n  background-image: url("+x+");\n}\n\n#translateBox #poly-box-header #poly-box-header-color-name {\n  display: flex;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  opacity: 0;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.5);\n  font-weight: bold;\n  position: absolute;\n  top: 0;\n  left: 0;\n  transition: opacity .3s ease-in;\n  padding: 5px 10px;\n  border-radius: 5px;\n  background-color: rgba(255, 255, 255, 0.7);\n}\n\n#translateBox #poly-box-header.yellow #poly-box-header-color-name {\n  background-color: #fae684;\n}\n\n#translateBox #poly-box-header.red #poly-box-header-color-name {\n  background-color: #ef9f94;\n}\n\n#translateBox #poly-box-header.green #poly-box-header-color-name {\n  background-color: #c3eebb;\n}\n\n#translateBox #poly-box-header.animated #poly-box-header-color-switcher {\n  opacity: 0;\n}\n\n#translateBox #poly-box-header.animated #poly-box-header-color-name {\n  opacity: 1;\n}\n\n#translateBox #poly-box-header #poly-box-header-word {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  width: 90%;\n  max-height: 40px;\n  padding-top: 10px;\n  border-bottom: none;\n  box-sizing: content-box;\n}\n\n#translateBox #poly-box-header #poly-box-header-word span {\n  position: relative;\n  max-height: 32px;\n  overflow: hidden;\n  text-align: center;\n  font-size: 13px;\n  font-weight: bold;\n  line-height: 15px;\n}\n\n#translateBox #poly-box-header.poly-1dot #poly-box-header-word span.poly-box-header-word-lemma,\n#translateBox #poly-box-header.poly-2dots #poly-box-header-word span.poly-box-header-word-lemma {\n  padding-bottom: 4px;\n}\n\n#translateBox #poly-box-header.poly-1dot #poly-box-header-word span.poly-box-header-word-lemma::before,\n#translateBox #poly-box-header.poly-2dots span.poly-box-header-word-lemma::before {\n  content: '';\n  display: block;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  height: 2px;\n}\n\n#translateBox #poly-box-header.poly-1dot #poly-box-header-word span.poly-box-header-word-lemma::before {\n  width: 2px;\n  background: url("+w+") center no-repeat;\n  background-size: contain;\n}\n\n#translateBox #poly-box-header.poly-2dots #poly-box-header-word span.poly-box-header-word-lemma::before {\n  width: 6px;\n  background: url("+k+") center no-repeat;\n  background-size: contain;\n}\n\n#translateBox #poly-box-header #poly-tab-grade {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  right: 0;\n  padding-left: 10px;\n  padding-right: 5px;\n  text-align: center;\n  font-size: 13px;\n  font-weight: bold;\n}\n\n#translateBox #poly-box-header #poly-box-header-speaker {\n  width: 10%;\n  height: 100%;\n  background-image: url("+M+");\n  background-size: 20px 20px;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#translateBox #poly-box-header #poly-box-close {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 10%;\n  box-sizing: content-box;\n  background-image: url("+E+");\n  background-size: 15px;\n  background-repeat: no-repeat;\n  background-position: center;\n  cursor: pointer;\n}\n\n#translateBox #poly-box-header #poly-box-close img {\n  width: 15px;\n  height: 15px;\n}\n\n#translateBox.poly-box-web #poly-box-header #poly-box-header-speaker {\n  display: none;\n}\n\n#translateBox #polyLingVis-box-translations {\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-idiom {\n  z-index: 1;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list {\n  width: 100%;\n  margin-bottom: 10px;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list #poly-box-idiom {\n  display: none;\n  width: 100%;\n  padding: 10px 5px;\n  background: #eeeeee;\n  border-bottom: 1px solid #b6b6b6;\n  text-align: center;\n  text-decoration: underline;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list #poly-box-idiom.show {\n  display: block;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list .poly-box-translate {\n  box-sizing: border-box;\n  min-height: 37px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  padding-right: 5px;\n  padding-left: 5px;\n  background-color: #eeeeee;\n  border-bottom: 1px solid #b6b6b6;\n  line-height: 16px;\n  text-align: center;\n  font-size: 12px;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list .poly-box-translate.poly-box-definition {\n  color: #8d8d8d;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list .poly-box-translate.poly-box-translate-reported::before {\n  content: '';\n  position: relative;\n  top: 2px;\n  display: inline-block;\n  margin-right: 7px;\n  height: 12px;\n  width: 15px;\n  background: url("+I+") center no-repeat;\n  background-size: contain;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list .poly-box-translate.more-btn {\n  border-bottom: none;\n}\n\n#translateBox #polyLingVis-box-translations #poly-box-list .poly-box-translate.more-btn a {\n  color: #6D7177;\n  font-weight: 500;\n}\n\n#translateBox #poly-box-grammar {\n  height: 35px;\n  visibility: hidden;\n  border-top: 1px solid #686868;\n  background-color: #eeeeee;\n  box-sizing: border-box;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-list-wrapper {\n  display: none;\n  width: auto;\n  height: 35px;\n  overflow: hidden;\n  padding-left: 5px;\n  box-sizing: border-box;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-list-wrapper #polyLingVis-list {\n  display: flex;\n  align-items: center;\n  height: 100% !important;\n  flex-direction: row;\n  padding-bottom: 17px;\n  box-sizing: content-box;\n  overflow-x: auto;\n  overflow-y: hidden;\n  height: 35px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-list-wrapper .grammar-construct {\n  display: block;\n  font-size: 11px;\n  padding: 3px 8px;\n  margin-right: 5px;\n  border-radius: 30px;\n  background: #fff;\n  font-weight: bold;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  white-space: nowrap;\n  border: 1px solid #6D7177;\n  color: #6D7177;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-list-wrapper .grammar-construct:last-child {\n  margin-right: 0;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-list-wrapper .grammar-construct.grammar-construct-selected {\n  color: #fff !important;\n  background-color: #6D7177;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page {\n  display: none;\n  position: absolute;\n  background: #fff;\n  width: 100%;\n  overflow-y: auto;\n  padding: 10px;\n  z-index: 2;\n  box-sizing: border-box;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page table, #translateBox #poly-box-grammar #polyLingVis-page th, #translateBox #poly-box-grammar #polyLingVis-page td {\n  border: 1px solid #868686;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page td, #translateBox #poly-box-grammar #polyLingVis-page th {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page h2, #translateBox #poly-box-grammar #polyLingVis-page h4 {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page h2 {\n  font-size: 18px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page h4 {\n  font-size: 16px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page .original {\n  display: none;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page table {\n  font-size: 12px;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page .bottom-filler {\n  height: calc(40px + 5px);\n}\n\n#translateBox #poly-box-grammar #polyLingVis-page .grammar-path-selected {\n  background-color: #DFE0E1;\n}\n\n#translateBox #poly-box-grammar #polyLingVis-fab-open-book {\n  display: none;\n  z-index: 2;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  position: absolute;\n  bottom: 35px;\n  margin-bottom: 5px;\n  right: 5px;\n  background-size: contain;\n  background: url("+T+") center no-repeat;\n  cursor: pointer;\n}\n\n#translateBox.poly-box-web.poly-box-has-grammar.show {\n  min-height: 170px;\n}\n\n#translateBox.poly-box-has-grammar.show #poly-box-grammar {\n  visibility: visible;\n}\n\n#translateBox.poly-box-has-grammar.show #poly-box-grammar #polyLingVis-list-wrapper {\n  display: flex;\n}\n\n#translateBox #poly-box-resizeCorner {\n  display: none;\n  width: 0;\n  height: 0;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  border-left: 8px solid transparent;\n  border-bottom: 8px solid #b6b6b6;\n  cursor: nwse-resize;\n  z-index: 2;\n}\n\n#translateBox.poly-box-web #poly-box-resizeCorner {\n  display: block;\n}\n\n#translateBox.new-popup-design {\n  border-color: #a8a8a8;\n}\n\n#translateBox.new-popup-design #poly-box-header.green {\n  background-color: #c3eebb;\n}\n\n#translateBox.new-popup-design #poly-box-header.yellow {\n  background-color: #fae684;\n}\n\n#translateBox.new-popup-design #poly-box-header.red {\n  background-color: #ef9f94;\n}\n\n#translateBox.new-popup-design #poly-box-header.out-of-vocab {\n  background-color: #fff;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-box-header-word {\n  width: auto;\n  padding-top: 0;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-tab-grade {\n  width: auto;\n  height: 40px;\n  top: 0;\n  padding-right: 5px;\n  padding-left: 10px;\n  line-height: 40px;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-tab-grade .poly-tab-grade-star {\n  width: 20px;\n  height: 20px;\n  background: url("+C+") center no-repeat;\n  background-size: contain;\n}\n\n#translateBox.new-popup-design #poly-box-header .poly-tab-grade.poly-tab-grade-has .poly-tab-grade-star {\n  margin-left: 4px;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-box-header-speaker {\n  width: 25px;\n  padding-left: 5px;\n  padding-right: 5px;\n  box-sizing: content-box;\n  background-size: 20px;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-box-close {\n  width: 20px;\n  padding-left: 5px;\n  padding-right: 10px;\n}\n\n#translateBox.new-popup-design #poly-box-header #poly-box-close img {\n  width: 20px;\n  height: 20px;\n}\n\n#translateBox.new-popup-design #polyLingVis-box-translations #poly-box-list #poly-box-idiom {\n  background-color: #fff;\n}\n\n#translateBox.new-popup-design #polyLingVis-box-translations #poly-box-list .poly-box-translate {\n  background: transparent;\n  border-color: #dadada;\n}\n\n#translateBox.new-popup-design #poly-box-grammar {\n  border-color: #a8a8a8;\n}\n\n#translateBox.new-popup-design.poly-wordlist #poly-box-header #poly-tab-grade .poly-tab-grade-star {\n  background: url("+N+") center no-repeat;\n  background-size: contain;\n}\n",""]),e.Z=v},645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},667:function(t){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},379:function(t,e,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},i=[],o=0;o<t.length;o++){var r=t[o],l=e.base?r[0]+e.base:r[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var h=a(c),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==h?(s[h].references++,s[h].updater(p)):s.push({identifier:c,updater:m(p,e),references:1}),i.push(c)}return i}function u(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,h=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function p(t,e,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function d(t,e,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var g=null,f=0;function m(t,e){var n,i,o;if(e.singleton){var r=f++;n=g||(g=u(e)),i=p.bind(null,n,r,!1),o=p.bind(null,n,r,!0)}else n=u(e),i=d.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var r=l(t,e),u=0;u<n.length;u++){var c=a(n[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}n=r}}}},580:function(t,e,n){"use strict";n.d(e,{c:function(){return r}});var i=n(312),o=n(752),r=function(){function t(){}return t.isEventEnabled=function(e){if(i.z.internalBuild)return!1;if("lingoal"==e.split(".")[0]&&!t.app.isComm&&!t.app.isSprakkraft)return!1;if(null==t.enableEvents){var n=t.utils.storage.getItem("enableEvents");if(!n)return!1;t.enableEvents=JSON.parse(n)}return t.enableEvents[e]},t.sendEvent=function(e,n){if(t.isEventEnabled(e)){var o=t.utils.createUUID(),r=t.utils.getCurrentLanguage(),s=t.app.getCulture()||{};t.utils.request(i.z.command.users.event,"put",{event:{eventId:o,type:e,userId:s.userId,os:t.app.getPlatform().isAndroid?"Android":"iOS",appName:s.appName,appVersion:s.appVersion,osVersion:s.osVersion,deviceName:s.deviceName,l2:r.name,l1:r.l1,level:r.level,guiLang:s.guiLang,date:(new Date).toISOString(),municipality:JSON.parse(t.utils.storage.getItem("municipality")||"{}").name||"",description:n},force:!0})}},t.sendEventWithInterval=function(e,n,i){if(t.isEventEnabled(e))return setTimeout((function(){t.sendEvent(e,n)}),5e3),setInterval((function(){(new Date).getTime()-o.g.lastTouch>24e4||t.sendEvent(e,n)}),1e3*i)},t}()},752:function(t,e,n){"use strict";n.d(e,{g:function(){return r}});var i=n(312),o=n(580),r=function(){function t(){this.culture={},this.pointsEnabled=!1,this.materialId="",this._isComm=!1,this._isSprakkraft=!1,this._isArticles=!1,this._isTwitter=!1,this.supportedL2=[],this.isReadium?(t.isWeb=!0,t.prefix="readium-",this.supportedL2=["sv"],i.z.internalBuild&&this.supportedL2.push("fr")):this.isYTMusic&&(t.isWeb=!1,t.prefix="yt-music-",this.pointsEnabled=!0,t.cacheChanges=!0,t.useAws=!1)}return t.prototype.init=function(e,n,r,s,a){var l;this.platform=e,this.utils=n,this.medium=r,this.knowledge=s,o.c.app=this,o.c.utils=this.utils,"articles"==a?(this._isArticles=!0,t.isWeb=!1,t.prefix="articles-",this.pointsEnabled=!0,t.cacheChanges=!0):"twitter"==a&&(this._isTwitter=!0,t.isWeb=!1,t.prefix="twitter-",this.pointsEnabled=!0,t.cacheChanges=!0),window.lingVisSdk_inExtension&&(t.isWeb=!0),!t.isWeb||(null===(l=this.supportedL2)||void 0===l?void 0:l.length)||window.lingVisSdk_inExtension||(this.supportedL2=["sv"],i.z.internalBuild&&this.supportedL2.push("de"))},t.prototype.setClientInfo=function(e){e&&(e.l2&&(this.supportedL2=e.l2),e.prefix&&(t.prefix=e.prefix))},Object.defineProperty(t.prototype,"isComm",{get:function(){return this._isComm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSprakkraft",{get:function(){return this._isSprakkraft},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadium",{get:function(){return window.readium},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isYTMusic",{get:function(){return"music.youtube.com"==window.location.hostname},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isArticles",{get:function(){return this._isArticles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTwitter",{get:function(){return this._isTwitter},enumerable:!1,configurable:!0}),t.prototype.getPlatform=function(){return this.platform},t.prototype.getMedium=function(){return this.medium},t.prototype.getKnowledge=function(){return this.knowledge},t.prototype.getName=function(){return this.culture.appName?this.culture.appName+(this.platform.getName()?"-"+this.platform.getName():""):t.prefix+this.platform.getName()},t.prototype.getClientVersion=function(){var t,e;return+((null===(e=null===(t=this.getCulture())||void 0===t?void 0:t.appVersion)||void 0===e?void 0:e.split(".")[2])||0)},t.prototype.getCulture=function(){var t=this.platform.parseQuery();if(this.culture&&this.culture.appName&&this.culture.userEmail)return t.guiLang&&(this.culture.guiLang=t.guiLang),this.culture;var e=this.utils.storage.getItem("cultureData");return this.culture=e?JSON.parse(e):{guiLang:this.platform.poly.guiLangInit||"en",decimalSeparator:".",thousandSeparator:","},t.guiLang&&(this.culture.guiLang=t.guiLang),!this.culture.guiLang&&this.platform.poly.guiLangInit&&(this.culture.guiLang=this.platform.poly.guiLangInit),(this.platform.poly.appName||t.appName)&&(this.culture.appName=this.platform.poly.appName||t.appName),t.appName&&(this.culture.appName=t.appName),this.platform.poly.laEnabled||this.platform.poly.isHboEnabled||"Språkkraft"!=this.culture.appName&&"Sprakkraft"!=this.culture.appName||(this._isSprakkraft=!0),"ReadingCoach"==this.culture.appName&&(this._isComm=!0),this.culture.fontSizeClass&&document.body.classList.add(this.culture.fontSizeClass),this.culture},t.prototype.getSingleLanguage=function(){var e,n;return t.l2?t.l2:this.isSprakkraft?"sv":(null===(n=null===(e=this.platform)||void 0===e?void 0:e.poly)||void 0===n?void 0:n.isHbo)?"hbo":""},t.prototype.getSupportedL2=function(){var t=this.getSingleLanguage();return t?[t]:this.supportedL2.length?this.supportedL2:i.z.languages.map((function(t){return t.value}))},t.prototype.getSupportedL1=function(t){var e=i.z.languages.find((function(e){return e.value==t}));return e?e.supported:[]},t.prototype.removeMarkup=function(){this.medium.removeMarkup()},t.isWeb=!0,t.l2="",t.l2Init="",t.prefix="web-",t.cacheChanges=!1,t.useAws=!0,t.lastTouch=0,t}()},155:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var i=function(){function t(t,e){this.doc=t,this.element=e,this.utils=t.getUtils()}return t.prototype.nextBlockElement=function(t){var e,n=null===(e=this.getNeighborText(this.element,t))||void 0===e?void 0:e.parentElement;if(!n)return null;var i=this.doc.getBlockAncestor(n);return i&&this.element.compareDocumentPosition(i)&(t?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING)?i:null},t.prototype.getNeighborText=function(t,e){var n=this.getNeighborWithText(t,e);return n?e?this.getFirstText(n):this.getLastText(n):null},t.prototype.getNeighborWithText=function(t,e){for(var n;null!=t&&"body"!=(null===(n=t.tagName)||void 0===n?void 0:n.toLowerCase());t=t.parentNode){var i=this.getSiblingWithText(t,e);if(i)return i}return null},t.prototype.getFirstText=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(this.visibleTrim(e))return this.getFirstText(e);return t.nodeType==Node.TEXT_NODE&&this.visibleTrim(t)?t:null},t.prototype.getLastText=function(t){for(var e=t.lastChild;null!=e;e=e.previousSibling)if(this.visibleTrim(e))return this.getLastText(e);return t.nodeType==Node.TEXT_NODE&&this.visibleTrim(t)?t:null},t.prototype.getSiblingWithText=function(t,e){for(;null!=(t=this.getNextSibling(t,e));)if(this.visibleTrim(t)&&!this.skipNode(t))return t;return null},t.prototype.getNextSibling=function(t,e){return e?t.nextSibling:t.previousSibling},t.prototype.visibleTrim=function(t){return this.utils.getVisibleTextContent(this.doc.getDocument(),t).trim()},t.prototype.skipNode=function(t){if(t.nodeType==Node.TEXT_NODE&&(t=t.parentElement),t.nodeType!=Node.ELEMENT_NODE)return!0;for(var e=t;null!=e&&"body"!=e.tagName.toLowerCase();e=e.parentElement)if(e.classList.contains("polyLingVis-dict-popup"))return!0;return!1},t}()},738:function(t,e,n){"use strict";n.d(e,{i:function(){return s}});var i,o=n(655),r=n(450);!function(t){t[t.None=0]="None",t[t.Short=1]="Short",t[t.Regular=2]="Regular",t[t.Long=3]="Long",t[t.Punctuation=4]="Punctuation"}(i||(i={}));var s=function(){function t(t){this.document=t,this.log=!1,this.chunkedElements=[],this.utils=t.getUtils(),this.doc=t.getDocument()}return t.prototype.chunk=function(e){if(-1==this.chunkedElements.indexOf(e.element)){this.chunkedElements.push(e.element),this.createClusters(e);for(var n=0;n<this.clusters.length;n++){var i=this.clusters[n],o=i.lastChild.nextSibling,r=this.doc.createElement("span");r.classList.add(t.chunkClass);for(var s=i.firstChild;s;){var a=s==i.lastChild,l=s.nextSibling;if(r.appendChild(s),a)break;s=l}i.root.insertBefore(r,o),this.createPhrases(e,n)}}},t.prototype.createClusters=function(t){var e=this;this.createTokens(t),this.createInitialClusters();var n=!0;this.log&&console.log(this.clusters.reduce((function(t,n){return t+e.getClusterText(n)+"|"}),""));var i=function(t){return!!e.tokens[t].sentenceStart||!!(n&&t>0&&e.tokens[t-1].punctuation)};this.log&&console.log("withPunctuation = true");for(var o=0;o<this.clusters.length;o++){var r=this.clusters[o];for(this.log&&console.log(this.getClusterText(r)+":");this.extend(t,o,r.lastTokenNum+1,i);)this.log&&console.log(this.getClusterText(r))}n=!1,this.log&&console.log("withPunctuation = false");for(var s=!0;s;){s=!1;for(o=0;o<this.clusters.length;o++){r=this.clusters[o];this.log&&console.log(this.getClusterText(r)+":");var a=this.getClusterText(r).length;if(o<this.clusters.length-1){var l=this.clusters[o+1];if(a+this.getClusterText(l).length<240&&this.extend(t,o,l.lastTokenNum,i)){this.log&&console.log(this.getClusterText(r)),s=!0;break}}else if(o>0){var u=this.clusters[o-1];if(a+this.getClusterText(u).length<240&&this.extend(t,o-1,r.lastTokenNum,i)){this.log&&console.log(this.getClusterText(r)),s=!0;break}}}}},t.prototype.getClusterText=function(t){for(var e="",n=t.firstChild;n&&(e+=this.utils.getVisibleTextContent(this.doc,n),n!=t.lastChild);n=n.nextSibling);return e},t.prototype.createTokens=function(t){var e=this;if(this.tokens=[],t)for(var n,o,r=this.doc.createTreeWalker(t.element,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function(t){if(!e.utils.isVisible(t))return NodeFilter.FILTER_REJECT;if(t.nodeType==Node.TEXT_NODE)return e.utils.isPolySpan(t.parentElement,!1)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT;if(t.nodeType!=Node.ELEMENT_NODE)return NodeFilter.FILTER_REJECT;var n=t;return e.utils.isPolySpan(n,!1)?e.utils.isPolySpan(n.parentElement,!0)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}),s="-";n=r.nextNode();)if(this.utils.isVisible(n)){var a=n.nodeType==Node.TEXT_NODE,l=!1;if(!a){var u=this.sentenceNum(n);l=u!=s,s=u,l&&o&&o.setAttribute("polyLingVis-sent-end","true"),o=n}var c=null!=n.textContent.match(/[;:,!?]/),h={node:n,isText:a,sentenceStart:l,punctuation:c,pause:c?i.Punctuation:i.None};this.tokens.push(h)}},t.prototype.createInitialClusters=function(){this.clusters=[];for(var t=0;t<this.tokens.length;t++){var e=this.tokens[t];this.clusters.push({root:e.node.parentElement,firstChild:e.node,lastChild:e.node,firstTokenNum:t,lastTokenNum:t})}},t.prototype.extend=function(t,e,n,i){var o=this;if(!t)return!1;if(e<0||e>=this.clusters.length)return!1;if(n<0||n>=this.tokens.length)return!1;var r=this.clusters[e];if(n>=r.firstTokenNum&&n<=r.lastTokenNum)return!1;var s=this.nextChunkTokenNum(r.firstTokenNum,i);if(n>=s)return!1;for(var a=function(){r.root=u,r.firstChild=o.getRootChild(u,r.firstTokenNum),r.lastChild=c,r.lastTokenNum=n;for(var t=e+1;t<o.clusters.length;t++){var i=o.clusters[t];i.lastTokenNum<=n?o.clusters.splice(t--,1):i.firstTokenNum<=n&&(i.firstTokenNum=n+1,i.firstChild=o.getRootChild(i.root,i.firstTokenNum))}return!0},l=this.tokens[n],u=l.node.parentElement,c=l.node;null!=u;c=u,u=u.parentElement)if(this.containsOrEquals(u,r.root)){if(!c)return!1;var h=this.getLastText(t,c);if(!h)return a();if(s<0||s>=this.tokens.length)return a();var p=this.tokens[s].node;return h!=p&&(p=this.getLastText(t,p),!!(h.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING)&&a())}return!1},t.prototype.getLastText=function(t,e){return e.nodeType==Node.TEXT_NODE?e:t.getLastText(e)},t.prototype.getRootChild=function(t,e){for(var n=this.tokens[e].node;null!=n;n=n.parentElement)if(n.parentElement==t)return n},t.prototype.containsOrEquals=function(t,e){return t==e||!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS)},t.prototype.nextChunkTokenNum=function(t,e){for(var n=t+1;n<this.tokens.length;n++)if(e(n))return n;return this.tokens.length},t.prototype.sentenceNum=function(t){return(t.getAttribute("data-sent-num")||"").split(",")[1]||""},t.prototype.createPhrases=function(t,e){var n=this.clusters[e],i=n.firstTokenNum,o=n.lastTokenNum;this.createInitialPhrases(i,o);for(var r=0,s=i;s<=o;s++){((l=this.tokens[s]).pause||s==o)&&(this.splitByRelations(r,s),r=s)}var a=0;for(s=i;s<=o;s++){var l;(l=this.tokens[s]).isText||(a++,l.pause&&a>1&&(l.node.setAttribute("polyLingVis-pause",""+l.pause),a=0))}},t.prototype.createInitialPhrases=function(e,n){for(var o=e;o<=n;o++){var s=this.tokens[o],a=new r.b(s.node),l=this.document.getRelation(a);l&&(s.pause=t.pausesBeforeRelated[l]||i.None)}},t.prototype.getInterval=function(t){var e=this.tokens[t],n=new r.b(e.node),i=this.document.getRelation(n);if(!i)return null;var o=this.document.findHead(n);if(null==o)return null;for(var s=o.node,a=-1,l=0;l<this.tokens.length;l++)if(this.tokens[l].node==s){a=l;break}return-1==a?null:{from:a<t?a:t,to:a<t?t:a,rel:i}},t.prototype.splitByRelations=function(e,n){var r,s;if(!this.isClose(e,n,t.maxWordCount)){this.intervals=[];for(var a=0;;a++){if(a>0){try{for(var l=(r=void 0,(0,o.XA)(this.intervals)),u=l.next();!u.done;u=l.next()){var c=u.value;this.tokens[c.from].pause=i.Short}}catch(t){r={error:t}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}for(var h=!1,p=0,d=e;d<=n;d++){if(this.tokens[d].pause||d==n){if(!this.isClose(p,d,t.maxWordCount)){h=!0;break}p=d}}if(!h)return}var g=t.connectingRelations[a];if(!g)break;for(d=e;d<=n;d++){if((c=this.getInterval(d))&&!(c.from<e||c.to>n)){var f=g[c.rel];if(null!=f&&(!(f>0)||this.isClose(c.from+1,c.to-1,f-1)))if(0==a)this.consolidate(c,this.intervals);else{if(this.intersect(c,this.intervals))continue;this.intervals.push(c)}}}}}},t.prototype.intersect=function(t,e){var n,i;try{for(var r=(0,o.XA)(e),s=r.next();!s.done;s=r.next()){var a=s.value;if(this.intersecting(a,t,!0))return!0}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return!1},t.prototype.consolidate=function(t,e){var n=e.slice();e.splice(0);for(var i=0;i<n.length;i++){var o=n[i];this.intersecting(o,t,!1)?(t.from=Math.min(t.from,o.from),t.to=Math.max(t.to,o.to)):e.push(o)}e.push(t)},t.prototype.intersecting=function(t,e,n){if(n){if(e.from<t.from&&t.from<e.to||e.from<t.to&&t.to<e.to)return!0}else if(e.from<=t.from&&t.from<=e.to||e.from<=t.to&&t.to<=e.to)return!0;return!1},t.prototype.isClose=function(t,e,n){for(var i=0,o=t;o<=e;o++)if(this.letterCount(this.tokens[o].node.textContent)>2&&++i>n)return!1;return!0},t.prototype.letterCount=function(t){for(var e=0,n=0;n<t.length;n++){var i=t[n];i.toLocaleLowerCase()!=i.toUpperCase()&&e++}return e},t.chunkClass="polyLingVis-chunk",t.pausesBeforeRelated={case:i.Short,mark:i.Short,cc:i.Regular},t.connectingRelations=[{aux:2,amod:2,det:0,fixed:0,flat:0,compound:0},{advmod:2},{nmod:1,iobj:1,xcomp:1},{nsubj:1,obj:1}],t.maxWordCount=4,t}()},430:function(t,e,n){"use strict";n.d(e,{e:function(){return p}});var i=n(655),o=n(379),r=n.n(o),s=n(697),a={insert:"head",singleton:!1},l=(r()(s.Z,a),s.Z.locals,n(155)),u=n(190),c=function(t){function e(e,n,i){var o=t.call(this,n,i)||this;return o.quizBlocks=e,o.words=[],o.labels=e.getLabels(),o}return(0,i.ZT)(e,t),e.prototype.nextBlock=function(t){var n,i=null===(n=this.getNeighborText(this.element,t))||void 0===n?void 0:n.parentElement;if(!i)return null;var o=this.doc.getBlockAncestor(i);return o&&this.element.compareDocumentPosition(o)&(t?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING)?new e(this.quizBlocks,this.doc,o):null},e.prototype.findSpans=function(t){var e,n,o;return(0,i.mG)(this,void 0,void 0,(function(){var r,s,a,l,u,c,h,p,d;return(0,i.Jh)(this,(function(g){switch(g.label){case 0:r=Array.prototype.slice.call(this.element.querySelectorAll(".polyLingVis-estimated")),this.words=[],s=(null===(n=null===(e=this.quizBlocks)||void 0===e?void 0:e.options)||void 0===n?void 0:n.maxWords)||-1,g.label=1;case 1:return r.length>0&&(s<0||this.words.length<s)?(a=r,s>0&&(a=r.slice(0,s),r=r.slice(s)),[4,this.translate(a)]):[3,3];case 2:l=g.sent();try{for(p=void 0,u=(0,i.XA)(l),c=u.next();!c.done;c=u.next())h=c.value,this.quizBlocks.lemmas[h.lemma]||t&&t(h.lemma)||(null===(o=h.translation)||void 0===o?void 0:o.trim())&&this.words.push(h)}catch(t){p={error:t}}finally{try{c&&!c.done&&(d=u.return)&&d.call(u)}finally{if(p)throw p.error}}return[3,1];case 3:return s>0&&(this.words=this.words.slice(0,s)),[2,Promise.resolve()]}}))}))},e.prototype.translate=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(i){return e={maxLabels:-1,noRel:!0,singleTranslation:!0},[2,new Promise((function(i){n.labels.translate(t,n.quizBlocks.getWords(),e,i)}))]}))}))},e.prototype.getWords=function(){return this.words},e}(l.g),h=function(){function t(t,e,n){void 0===n&&(n={}),this.doc=t,this.utils=e,this.options=n,this.blocks=[],this.words=[],this.lemmas={},this.maxSpans=100,this.labels=new u.R(t,e)}return t.prototype.init=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var o,r,s,a,l,u;return(0,i.Jh)(this,(function(h){switch(h.label){case 0:return this.initialBlock=new c(this,this.doc,t),this.currBlock=this.initialBlock,this.blocks=[this.initialBlock],[4,this.initialBlock.findSpans(n)];case 1:h.sent(),o=this.initialBlock.getWords().slice(),this.words=[];try{for(r=(0,i.XA)(o),s=r.next();!s.done;s=r.next())a=s.value,e(a.span,!1)||(this.words.push(a),this.lemmas[a.lemma]=!0)}catch(t){l={error:t}}finally{try{s&&!s.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}}return[2,Promise.resolve()]}}))}))},t.prototype.expand=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.expandStep(!1,t,e)];case 1:return n.sent()?this.words.length>this.maxSpans?[2,Promise.resolve()]:[3,0]:[3,2];case 2:this.currBlock=this.initialBlock,n.label=3;case 3:return[4,this.expandStep(!0,t,e)];case 4:return n.sent()?this.words.length>this.maxSpans?[2,Promise.resolve()]:[3,3]:[3,5];case 5:return[2,Promise.resolve()]}}))}))},t.prototype.expandStep=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var o,r,s,a,l,u,c,h;return(0,i.Jh)(this,(function(p){switch(p.label){case 0:return!(o=this.currBlock.nextBlock(t))||e(o.element,t)||o.element.classList.contains("polyLingVis-already-tested")?[2,Promise.resolve(!1)]:(this.currBlock=o,[4,o.findSpans(n)]);case 1:p.sent(),r=o.getWords().slice(),!t&&r.reverse(),s=!1;try{for(a=(0,i.XA)(r),l=a.next();!l.done;l=a.next()){if(u=l.value,e(u.span,t))return[2,Promise.resolve(!1)];s||(this.blocks.push(o),s=!0),this.words.push(u),this.lemmas[u.lemma]=!0}}catch(t){c={error:t}}finally{try{l&&!l.done&&(h=a.return)&&h.call(a)}finally{if(c)throw c.error}}return[2,Promise.resolve(!0)]}}))}))},t.prototype.getWords=function(){return this.words},t.prototype.getBlocks=function(){return this.blocks},t.prototype.getLabels=function(){return this.labels},t.prototype.getInitialBlock=function(){return this.initialBlock},t}(),p=function(){function t(e,n,i,o,r,s){var a=this;if(this.quizBlocks=e,this.labels=n,this.doc=i,this.utils=o,this.knowledge=r,this.columnWidth=s,this.fails={},this.draggables=[],this.handleResize=function(){a.close()},t.currentInstance)throw new Error("already-in-progress");t.currentInstance=this,this.words=this.quizBlocks.getWords()}return t.currentBlockChanged=function(e){e.classList.remove("polyLingVis-already-tested"),t.testedLemmas={};var n=t.currentInstance;n&&-1==n.quizBlocks.getBlocks().map((function(t){return t.element})).indexOf(e)&&n.close()},t.prototype.start=function(){var t,e,n=this;this.coverTargets();var o={};try{for(var r=(0,i.XA)(this.words),s=r.next();!s.done;s=r.next()){var a=s.value;o[a.lemma+"|"+a.pos]=a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.labels.showLabelsTranslated(this.words,null,null,null,{columnWidth:this.columnWidth},(function(){n.showPanel()}))},t.prototype.showPanel=function(){var t,e,n,o,r,s,a=this;this.panel&&(this.panel.remove(),this.panel=null);var l=document.createElement("div");document.body.appendChild(l),l.outerHTML='\n      <div id="polyLingVis-cloze-panel" class="polyLingVis-panel polyLingVis-panel-info">\n        <div class="polyLingVis-panel-heading text-center">\n          <h6 class="polyLingVis-panel-title polyLingVis-cloze-panel-title">Drag words and drop them in blanks or on translations</h6>\n          <span id="polyLingVis-cloze-close">×<span>\n        </div>\n        <div id="polyLingVis-cloze-panel-body" class="polyLingVis-panel-body">\n      </div>',this.panel=document.getElementById("polyLingVis-cloze-panel");var u=document.getElementById("polyLingVis-cloze-panel-body"),c=window.polyLingVis_Draggable,h=this.words.slice();this.shuffle(h);var p=function(t,e,n,i){return function(o,r){var s={x:0,y:0},a={x:0,y:0};i?(o+=(s=i.getBoundingClientRect()).x,r+=s.y):a={x:window.scrollX,y:window.scrollY};var l={x:[a.x+n,window.innerWidth-t+a.x-n],y:[a.y+n,window.innerHeight-e+a.y-n]};return{x:o=Math.min(Math.max(o,l.x[0]),l.x[1])-s.x,y:r=Math.min(Math.max(r,l.y[0]),l.y[1])-s.y}}},d=[];try{for(var g=(0,i.XA)(h),f=g.next();!f.done;f=g.next()){var m=f.value;(x=document.createElement("span")).classList.add("polyLingVis-cloze-src"),x.setAttribute("data-lemma",m.lemma),x.style.zIndex="4",x.textContent=m.lemma.replace("+\\","\\").split("\\")[0]+" ",u.appendChild(x),d.push(x)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}this.panel.style.display="block";var y=this.choosePanelPosition();this.panel.style.left=y.x+"px",this.panel.style.top=y.y+"px";var v={handle:this.panel.querySelector(".polyLingVis-panel-heading"),setPosition:!1,limit:p(this.panel.offsetWidth,this.panel.offsetHeight,4,null)};this.draggables.push(new c(this.panel,v));try{for(var b=(0,i.XA)(d),L=b.next();!L.done;L=b.next()){var x,w={setPosition:!1,threshold:20,limit:p((x=L.value).offsetWidth,x.offsetHeight,20,this.panel),onDragStart:function(t){t.style.position="absolute"},onDragEnd:function(t){var e=a.findDroppableTarget(t);a.updateTarget(null),a.processAnswer(e,t)},onDrag:function(t){var e=a.findDroppableTarget(t);e!=a.panel&&a.updateTarget(e)}};this.draggables.push(new c(x,w))}}catch(t){n={error:t}}finally{try{L&&!L.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}this.closeButton=document.getElementById("polyLingVis-cloze-close"),this.closeHandler=this.close.bind(this);try{for(var k=(0,i.XA)(["mousedown","touchstart","mouseup","touchend"]),M=k.next();!M.done;M=k.next()){var E=M.value;this.closeButton.addEventListener(E,this.closeHandler,{passive:!1})}}catch(t){r={error:t}}finally{try{M&&!M.done&&(s=k.return)&&s.call(k)}finally{if(r)throw r.error}}window.addEventListener("resize",this.handleResize)},t.prototype.close=function(e){var n=this;e&&(e.stopPropagation(),e.cancelable&&e.preventDefault()),setTimeout((function(){var e,o,r,s,a;if(t.currentInstance){if(t.currentInstance=null,n.closeHandler)try{for(var l=(0,i.XA)(["mousedown","touchstart","mouseup","touchend"]),u=l.next();!u.done;u=l.next()){var c=u.value;null===(a=n.closeButton)||void 0===a||a.removeEventListener(c,n.closeHandler)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(e)throw e.error}}n.closeHandler=null;for(var h=document.querySelectorAll(".polyLingVis-label"),p=0;p<h.length;p++)h[p].remove();var d=document.querySelectorAll(".polyLingVis-link-line");for(p=0;p<d.length;p++)d[p].remove();try{for(var g=(0,i.XA)(n.words),f=g.next();!f.done;f=g.next()){f.value.span.classList.remove("polyLingVis-cloze-tgt")}}catch(t){r={error:t}}finally{try{f&&!f.done&&(s=g.return)&&s.call(g)}finally{if(r)throw r.error}}n.panel&&(n.panel.remove(),n.panel=null),n.closeButton=null,n.currDroppable=null,n.currLabel=null,n.labels.hideLabels();var m=n.quizBlocks.getBlocks();for(p=0;p<m.length;p++)m[p]!=n.quizBlocks.getInitialBlock()&&m[p].element.classList.remove("polyLingVis-active");n.draggables.forEach((function(t){return t.destroy()})),window.removeEventListener("resize",n.handleResize)}}),500)},t.prototype.coverTargets=function(){var t,e;try{for(var n=(0,i.XA)(this.words),o=n.next();!o.done;o=n.next()){o.value.span.classList.add("polyLingVis-cloze-tgt")}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.shuffle=function(t){for(var e=t.length;e;){var n=Math.floor(Math.random()*e),i=t[e-=1];t[e]=t[n],t[n]=i}},t.prototype.updateTarget=function(t){var e;this.currDroppable!=t&&(this.currDroppable&&(this.currDroppable.classList.remove("polyLingVis-cloze-hover"),null===(e=this.currLabel)||void 0===e||e.classList.remove("polyLingVis-cloze-hover")),t?(t.classList.add("polyLingVis-cloze-hover"),this.currDroppable=t,this.currLabel=this.labels.getOther(t),this.currLabel.classList.add("polyLingVis-cloze-hover")):(this.currDroppable=null,this.currLabel=null))},t.prototype.findDroppableTarget=function(t){var e,n,o,r=0,s=t.getBoundingClientRect();try{for(var a=(0,i.XA)(this.words),l=a.next();!l.done;l=a.next()){var u=l.value,c=0,h=u.span.getBoundingClientRect();h.x>0&&(h.x=h.x%window.innerWidth);var p=this.intersectRects(h,s);p&&(c=p.width*p.height);var d=this.labels.getOther(u.span);if(d){var g=this.intersectRects(d.getBoundingClientRect(),s);if(g){var f=g.width*g.height;f>c&&(c=f)}}c&&(c>r&&(o=u.span,r=c))}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o||(this.intersectRects(this.panel.getBoundingClientRect(),s)?this.panel:null)},t.prototype.intersectRects=function(t,e){var n=Math.max(t.y,e.y),i=Math.min(t.y+t.height,e.y+e.height);if(i<n)return null;var o=Math.max(t.x,e.x),r=Math.min(t.x+t.width,e.x+e.width);return r<o?null:{x:o,y:n,width:r-o,height:i-n}},t.prototype.processAnswer=function(e,n){if(e){var i=this.words.find((function(t){return t.span==e})),o=n.getAttribute("data-lemma");t.testedLemmas[o]=!0;var r=this.fails[o]||0;if(i&&i.lemma==o){var s=this.labels.getOther(e),a=this.labels.getLine(e);e.classList.remove("polyLingVis-cloze-tgt"),null==a||a.remove(),null==s||s.remove(),n.remove(),r||this.knowledge.changeDifficulty(o,"",1)}else i||e==this.panel?(e!=this.panel&&(this.knowledge.changeDifficulty(o,"",r>1?-2:-1),this.fails[o]=r+1),n.style.position="static",n.style.left="auto",n.style.top="auto"):(console.log("processAnswer: should not happen"),n.remove());this.panel.querySelectorAll(".polyLingVis-cloze-src").length||this.close()}else n.style.position="static",n.style.left="auto",n.style.top="auto"},t.prototype.overlapArea=function(t,e){var n,o,r=0;try{for(var s=(0,i.XA)(e),a=s.next();!a.done;a=s.next()){var l=a.value,u=this.intersectRects(t,l);u&&(r+=u.width*u.height)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return r},t.prototype.choosePanelPosition=function(){var t=this.panel.getBoundingClientRect(),e=Array.from(document.querySelectorAll(".polyLingVis-label")),n=this.words.map((function(t){return t.span.getBoundingClientRect()})).concat(e.map((function(t){return t.getBoundingClientRect()}))),i=-1,o=window.innerHeight-this.panel.offsetHeight,r=n.map((function(t){return t.y+t.height})).reduce((function(t,e){return Math.max(t,e)}));o=Math.min(o,r);for(var s=window.innerWidth*window.innerHeight,a=o;a>=0;a-=5){if(t.y=a,((c=this.overlapArea(t,n))<s||-1==i)&&(s=c,i=a,0==c))break}i>=r?i+=2:i-=2;var l={x:4,y:i};if(0==s)return{x:l.x+window.scrollX,y:l.y+window.scrollY};t.y=i;for(var u=l.x;u<=window.innerWidth-this.panel.offsetWidth;u+=5){var c;if(t.x=u,(c=this.overlapArea(t,n))<s&&(s=c,l.x=u,0==c))break}return{x:l.x+window.scrollX,y:l.y+window.scrollY}},t.stopGeneric=function(t,e,n){return function(o,r){var s,a;if(!n(o))return!0;for(var l=0,u=t.getBlocks(),c=0;c<u.length-1;c++)l+=u[c].getWords().length;if(l>e)return!0;var h=u[u.length-1];try{for(var p=(0,i.XA)(h.getWords()),d=p.next();!d.done;d=p.next()){var g=d.value;if(n(g.span)&&++l>e)return!0}}catch(t){s={error:t}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}return!1}},t.stopAtViewport=function(e,n,i){return t.stopGeneric(n,i,(function(t){var n=t.getBoundingClientRect();return n.top+n.height>2&&n.top+2<e.innerHeight&&n.left+n.width>2&&n.left+2<e.innerWidth}))},t.getStopAtPage=function(e,n,i,o){return t.stopGeneric(n,i,(function(t){var e=document.getElementsByClassName("epub-container")[0].scrollLeft,n=t.getBoundingClientRect(),i=n.left,r=n.left+n.width;return i+2<e+o&&r>e+2}))},t.clozeTest=function(e,n,o,r){return(0,i.mG)(this,void 0,void 0,(function(){var s,a,l,u,c,p,d,g,f,m;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(10,s=new h(e,n,{maxWords:10}),!(a=e.getDocument().querySelector(".polyLingVis-active")))throw new Error("no-active-element");return l=e.getDocument().defaultView,u=0,r&&(u=parseInt(getComputedStyle(e.getDocument().body).columnWidth)),c=r?t.getStopAtPage(l,s,10,u):t.stopAtViewport(l,s,10),p=function(e){return t.testedLemmas[e]},[4,s.init(a,c,p)];case 1:return i.sent(),[4,s.expand(c,p)];case 2:if(i.sent(),d=new t(s,s.getLabels(),e,n,o,u),s.getWords().length<2)throw new Error("not-enough-words-to-test");for(g=s.getBlocks(),f=0;f<g.length;f++)(m=g[f].element.classList).add("polyLingVis-already-tested"),m.add("polyLingVis-active");return d.start(),[2]}}))}))},t.closeClozeTest=function(){t.currentInstance&&t.currentInstance.close()},t.testedLemmas={},t}()},312:function(t,e,n){"use strict";n.d(e,{z:function(){return i}});var i=function(){function t(){}return t.languageInfo=function(e,n){var i;return(n?t.natives:t.languages).forEach((function(t){t.value==e&&(i=t)})),i||{supported:[]}},t.buildNum="16",t.version="1.4",t.appVersion=t.version+"."+t.buildNum,t.internalBuild=!0,t.tempServer="",t.server={main:t.tempServer?t.tempServer:"https://sprakkraft.org/",url:t.tempServer?t.tempServer:"http://lrcmain.brainglass.com:3000/"},t.command={auth:{sigin:"login/",signup:"signup/",signout:"logout/",signupSocial:"signup/social/silent/",signupLastError:"signup/lasterror/",forgotPassword:"login/forgot/ ",checkPassword:"login/checkPassword/",userInfo:"login/info/",signupDevice:"signup/device/",signinDevice:"login/device/",connect:"connect/",connectSocial:"connect/social/"},users:{user:"api/users/",event:"api/users/event",getPersonalData:"api/users/getPersonalData",validateReceipt:"api/users/validateReceipt",refreshUserInfo:"api/users/refreshUserInfo",getProductSkus:"api/users/getProductSkus"},notifications:{subscribeForPush:"api/users/subscribeForPush",pushNotifications:"api/users/pushNotifications"},lang:{languages:"api/languages/"},categories:{list:"api/props/categories/"},points:{points:"api/points/",pointsAlg:"data/points-alg.js",achievementHtml:"api/points/getHtml",articleCost:5,testCost:5,wordCost:1,bonusForTest:3},dictionaries:{analyze:"api/dictionaries/analyzer",translate:"api/dictionaries/translations",saveWebWord:"api/dictionaries/translations",getDictImage:"api/dictionaries/images",saveDictImage:"api/dictionaries/images",getWordTranslations:"api/dictionaries/getWordTranslations",getTranslationInfo:"api/dictionaries/getTranslationInfo",putTranslationInfo:"api/dictionaries/putTranslationInfo",putTranslationReport:"api/dictionaries/putTranslationReport"},articles:{getArticles:"api/articles",getFeed:"api/articles/getFeed",getData:"api/articles/data",getTextData:"api/articles/text-data",getArticle:"api/articles/text",getPosts:"api/articles/posts",getPost:"api/articles/post",getBooks:"api/articles/books",mark:"api/articles/mark",markPost:"api/articles/post/mark",postArticleFromUrl:"api/articles/postArticleFromUrl",postArticleFromText:"api/articles/postArticleFromText",postArticleClassics:"api/articles/postArticleClassics",postSubtitles:"api/articles/postSubtitles",postSubtitlesSpecial:"api/articles/postSubtitlesSpecial",getProgramCategories:"api/articles/getProgramCategories/",getPromotedPrograms:"api/articles/getPromotedPrograms/",getPrograms:"api/articles/getPrograms",getEpisodes:"api/articles/getEpisodes",getBestPrograms:"api/articles/getBestPrograms",getTVVideos:"api/articles/getTVVideos",postLyrics:"api/articles/postLyrics",postPlaylist:"api/articles/postPlaylist",deletePlaylist:"api/articles/deletePlaylist",postPlayStats:"api/articles/postPlayStats",postCues:"api/articles/postCues",getPlaylists:"api/articles/getPlaylists",getPostPlaylistStatus:"api/articles/getPostPlaylistStatus",getTracks:"api/articles/getTracks",getSongCategories:"api/articles/getSongCategories",getAllSongCategories:"api/articles/getAllSongCategories",getPopularSongs:"api/articles/getPopularSongs",getUserPlaylists:"api/articles/getUserPlaylists",getSpotifyPlaylistTracks:"api/articles/getSpotifyPlaylistTracks",postSpotifyPlaylist:"api/articles/postSpotifyPlaylist",getPopularPlaylists:"api/articles/getPopularPlaylists",getUserSongs:"api/articles/getUserSongs",postPlaylistUpdate:"api/articles/postPlaylistUpdate",getChannels:"api/articles/getChannels",getChannelPlaylists:"api/articles/getChannelPlaylists"},audio:{getPodcasts:"api/audio/getPodcasts",getRSS:"api/audio/getRSS",getSynthesized:"api/audio/getSynthesized",saveTrack:"api/audio/saveTrack"},words:{setDifficulty:"api/words",diagramData:"api/words/diagram",wordsRegion:"api/dictionaries/words/",getWordList:"api/words/getWordList",putWordList:"api/words/putWordList"},files:{getFile:"api/files",getPublicFile:"api/files/getPublicFile"},props:{lastChanged:"api/props/lastchanged/",redirect:"api/props/redirect/",getFileUrl:"api/props/getFileUrl",getResource:"api/props/getResource",getTemplates:"api/props/getTemplates"}},t.languages=[{value:"en",name:"English",supported:["es","fr","de","sv","ru","ar","pt","nl","id","it","ms","pl","tr","uk","zh","ja","ko","th","ro","el","hu","cs","vi","hi"]},{value:"sv",name:"Swedish",supported:["en","sq","ar","bs","hr","fa","fi","el","ku-lat","ku-ar","ru","sr-cyr","sr-lat","so","es","tr","az","ti","am","ps","bu","de","fr","pl","ro","th","zh","et","it","hi","bn","uk"]},{value:"fi",name:"Finnish",supported:["en","sv","ru","et","ar","so","tr","fa","ku-lat","ku-ar","pl","vi","th","zh","uk"]},{value:"de",name:"German",supported:["en","fr","it","ar","pt","tr","sr-cyr","sq","uk","es","bs","hr","fa","ti","ru","zh","uk"]},{value:"es",name:"Spanish",supported:["en","fr","de","it","pt","zh","ru","ar","uk"]},{value:"fr",name:"French",supported:["en","de","it","sv","ar","pt","tr","sr-cyr","sq","es","bs","hr","fa","ti","ru","zh","nl","uk"]},{value:"it",name:"Italian",supported:["en","de","fr","ar","pt","tr","sr-cyr","sq","es","bs","hr","fa","ti","ru","zh","uk"]},{value:"pt",name:"Portuguese",supported:["en","es","fr","it","de","ru","zh"]},{value:"uk",name:"Ukrainian",supported:["en","ru"]},{value:"nb",name:"Norwegian",supported:["en"]},{},{value:"da",name:"Danish",supported:["en"]},{value:"pl",name:"Polish",supported:["en"]}],t.natives=[{value:"en",name:"English",original:"English"},{value:"sv",name:"Swedish",original:"svenska"},{value:"fr",name:"French",original:"français"},{value:"de",name:"German",original:"Deutsch"},{value:"es",name:"Spanish",original:"español"},{value:"ar",name:"Arabic",original:"اَلْعَرَبِيَّةُ"},{value:"pl",name:"Polish",original:"polski"},{value:"fi",name:"Finnish",original:"suomen kieli"},{value:"fa",name:"Farsi",original:"فارسی"},{value:"ku-lat",name:"Kurdish Latin",original:"Kurdî"},{value:"ku-ar",name:"Kurdish Arabic",original:"کوردی"},{value:"sr-cyr",name:"Serbian Cyrillic",original:"српски"},{value:"sr-lat",name:"Serbian Latin",original:"srpski"},{value:"bs",name:"Bosnian",original:"bosanski"},{value:"hr",name:"Croatian",original:"hrvatski"},{value:"so",name:"Somali",original:"Af Soomaali"},{value:"tr",name:"Turkish",original:"Türkçe"},{value:"ru",name:"Russian",original:"русский язык"},{value:"zh",name:"Chinese",original:"普通话"},{value:"pt-br",name:"Br.Portuguese",original:"português brasileiro"},{value:"nl",name:"Dutch",original:"Nederlands"},{value:"id",name:"Indonesian",original:"bahasa Indonesia"},{value:"it",name:"Italian",original:"italiano"},{value:"ja",name:"Japanese",original:"日本語"},{value:"ko",name:"Korean",original:"한국어"},{value:"ms",name:"Malay",original:"Bahasa Melayu"},{value:"pt",name:"Portuguese",original:"português"},{value:"uk",name:"Ukrainian",original:"українська мова"},{value:"sq",name:"Albanian",original:"shqip"},{value:"el",name:"Greek",original:"ελληνικά"},{value:"az",name:"Azerbaijani",original:"Azərbaycan dili"},{value:"ti",name:"Tigrinya",original:"ትግርኛ"},{value:"am",name:"Amharic",original:"አማርኛ"},{value:"ps",name:"Pashto",original:"پښتو"},{value:"nb",name:"Norwegian",original:"norsk"},{value:"hbo",name:"BiblicalHebrew",original:"עִבְרִית מִקְרָאִית"},{value:"la",name:"Latin",original:"lingua latīna"},{value:"da",name:"Danish",original:"dansk"},{value:"roh",name:"Romansh",original:"rumantsch"},{value:"et",name:"Estonian",original:"eesti keel"},{value:"bu",name:"Bulgarian",original:"български"},{value:"ro",name:"Romanian",original:"limba română"},{value:"th",name:"Thai",original:"ภาษาไทย"},{value:"cs",name:"Czech",original:"čeština"},{value:"vi",name:"Vietnamese",original:"tiếng việt"},{value:"hi",name:"Hindi",original:"हिन्दी"},{value:"hu",name:"Hungarian",original:"magyar"}],t.levels=[{value:1,code:"A1",name:"level.Beginner",description:"level.description.Beginner"},{value:2,code:"A2",name:"level.Elementary",description:"level.description.Elementary"},{value:3,code:"B1",name:"level.Intermediate",description:"level.description.Intermediate"},{value:4,code:"B2",name:"level.Upper Intermediate",description:"level.description.Upper Intermediate"},{value:5,code:"C1",name:"level.Advanced",description:"level.description.Advanced"},{value:6,code:"C2",name:"level.Proficiency",description:"level.description.Proficiency"}],t.polySelectors=["known","unknown","estimated","out-of-vocab","idiom","compound","highlight","chunk"],t}()},455:function(t,e,n){"use strict";n.d(e,{w:function(){return u}});var i,o=n(655),r=n(899),s=n(752),a=n(401),l=300;!function(t){t[t.know=0]="know",t[t.wantKnow1=1]="wantKnow1",t[t.wantKnow2=2]="wantKnow2",t[t.wantKnow3=3]="wantKnow3",t[t.wantKnow4=4]="wantKnow4",t[t.dontKnow=5]="dontKnow"}(i||(i={}));var u=function(){function t(t,e,n,r){var a=this;this.appl=t,this.platform=e,this.knowledgeBag=n,this.utils=r,this.lang={},this.isDragging=!1,this.isResizing=!1,this.lastClickTime=0,this.wordListEnabled=!1,this.fromEntries=function(t){var e={};return t.forEach((function(t){var n=(0,o.CR)(t,2),i=n[0],r=n[1];return e[i]=r})),e},this.posNames={NN:"noun",VB:"verb",JJ:"adjective",RB:"adverb",PR:"pronoun",IN:"preposition",CC:"conjunction",DT:"determiner",CD:"numeral",RP:"particle",UH:"interjection"},this.storage=this.utils.storage,this.core={isSmallScreen:function(){return!1},isMediumScreen:function(){return!1}},this.poly={isReadium:!!this.appl.isReadium,wordListAdd:function(){},wordListDelete:function(){},setKnow:function(){},isPolyArticle:s.g.isWeb&&!this.appl.isReadium},this.poly.native={};try{this.lang=JSON.parse(this.storage.getItem("currentLanguage")||"{}"),this.isHbo="hbo"==this.lang.name}catch(t){}this.checkIfSpeechSynthesisSupported(),this.isStatic=!1,this.notResizable=this.poly.isReadium,this.readOnly=!1,this.generatePopup(),this.outerClickHandler=this.outerClick.bind(this),document.addEventListener("mouseup",this.outerClickHandler),document.addEventListener("touchend",this.outerClickHandler),this.core.isSmallScreen()||this.core.isMediumScreen()||(this.popupElement.style.width="350px",this.popupElement.style.height="250px"),this.popupElement.classList.add("poly-box-coach"),this.poly.native.dictPopup=function(t,e,n,o,r,s,l,u,c,h,p,d,g,f,m,y,v,b){var L,x;b=(b||t).toLowerCase();var w=t.replace("+\\","\\").split("\\")[0],k=(e=e||w,[]);o.split("|").forEach((function(t){var e=t.split("")[0].trim();e.length>0&&k.push(e)}));var M="";if(k.length>0&&o.lastIndexOf("|")!=o.length-1&&(M=k[k.length-1],k.pop()),null==g)if(-1==s)g=a.knowledgeBag.getDifficulty(b,n);else switch(s){case 1:g=i.wantKnow3;break;case 2:g=i.know;break;default:g=i.dontKnow}"hidden"==g&&(g=""),a.hideWord="string"==typeof g&&!g.length;var E={token:e,lemma:t,firstLemma:b,displayLemma:w,grade:p||-1,pos:n,translations:k,idiom:M,userGrade:-1==g?i.dontKnow:+g};a.readOnly=-1==p,a.immutable=-1!=s||"ignore"==v||a.readOnly,a.inWordList="true"==v,a.wordListEnabled&&(a.inWordList=null!=a.poly.wordListInfo(b,n)),a.poly.native.setInWordList=function(t,e,n){e.toLowerCase()==E.firstLemma&&n==E.pos&&a.setInWordList(t)},(null===(x=null===(L=a.platform.poly)||void 0===L?void 0:L.core)||void 0===x?void 0:x.onOpenDict)&&a.platform.poly.core.onOpenDict(),a.show(E,d,null,null,null,y,(f||"").split("|"))}}return t.prototype.open=function(t,e,n,i,o,r,s,a,l,u){this.doc=t,this.poly.native.dictPopup(e,n,i,o,!1,-1,-1,s,-1,-1,r,l,u,a)},t.prototype.closeClick=function(t){var e,n,i;this.outerClick(t),this.close(),(null===(n=null===(e=this.platform.poly)||void 0===e?void 0:e.core)||void 0===n?void 0:n.onCloseDict)&&this.platform.poly.core.onCloseDict(),null===(i=this.doc)||void 0===i||i.clearSelection()},t.prototype.outerClick=function(t){if(this.isResizing)return t.preventDefault(),this.isResizing=!1,void(l=this.popupElement.offsetWidth);this.isDragging=!1},t.prototype.generatePopup=function(){var t=this,e='\n            <div id="translateBox" class="poly-box-default hidden poly-box-web new-popup-design poly-box-audio" style="display: none">\n            <style>\n              #translateBox {\n                all: initial;\n              }\n              '+r.Z+'\n            </style>\n            <div id="poly-box-header">\n                <div id="poly-box-header-switcher-green"></div>\n                <div id="poly-box-header-switcher-yellow"></div>\n                <div id="poly-box-header-switcher-red"></div>\n                <div id="poly-box-header-word">\n                  <div id="poly-box-lemma-pager" class="poly-box-switcher"></div>\n                  <div id="poly-box-morph-pager" class="poly-box-switcher"></div>\n                  <div id="poly-box-header-color-switcher"></div>\n                  <div id="poly-box-header-color-name"></div>\n                  <div id="poly-tab-grade"></div>\n                </div>\n                <div id="poly-box-header-speaker"></div>\n                <div id="poly-box-close"></div>\n              </div>\n              <div id="polyLingVis-box-translations">\n                <div id="poly-box-list">\n                  <div id="poly-box-idiom"></div>\n                </div>\n              </div>\n              <div id="poly-box-grammar">\n                <div id="polyLingVis-list-wrapper">\n                  <div id="polyLingVis-list"></div>\n                </div>\n                <div id="polyLingVis-page"></div>\n                <div id="polyLingVis-fab-open-book"></div>\n              </div>\n              <div id="poly-box-resizeCorner"></div>\n            </div>\n          ',n=this.getShadowRoot();n.innerHTML=e;var i=["translateBox","poly-box-header-word","poly-box-lemma-pager","poly-box-morph-pager","poly-box-header","poly-box-resizeCorner","poly-box-idiom","poly-tab-grade","poly-box-list","polyLingVis-box-translations","poly-box-grammar","polyLingVis-page","polyLingVis-list","polyLingVis-list-wrapper","poly-box-close","poly-box-header-speaker","poly-box-header-color-switcher","poly-box-header-color-name"].map((function(t){return[t,n.querySelector("#"+t)]})),o=this.fromEntries(i);this.changeDifficultyHandler=this.handleChangeDifficulty.bind(this),this.rotateMorph=function(e){return t.rotateLemmaOrMorph(e,!0,1)},this.rotateLemma=function(e){return t.rotateLemmaOrMorph(e,!1,1)},o["poly-box-header-word"].addEventListener("click",this.changeDifficultyHandler),o["poly-box-header-word"].addEventListener("touchend",this.changeDifficultyHandler),o["poly-box-lemma-pager"].addEventListener("click",this.rotateLemma),o["poly-box-lemma-pager"].addEventListener("touchend",this.rotateLemma),o["poly-box-morph-pager"].addEventListener("click",this.rotateMorph),o["poly-box-morph-pager"].addEventListener("touchend",this.rotateMorph),this.isStatic||(this.dragStartHandler=this.dragStart.bind(this),this.dragEndHandler=this.dragEnd.bind(this),this.draggingHandler=this.dragging.bind(this),o["poly-box-header"].addEventListener("mousedown",this.dragStartHandler),document.addEventListener("mouseup",this.dragEndHandler),document.addEventListener("mousemove",this.draggingHandler),o["poly-box-header"].addEventListener("click",this.stopPropagation),o["poly-box-header-word"].addEventListener("touchstart",this.dragStartHandler),document.addEventListener("touchend",this.dragEndHandler),document.addEventListener("touchmove",this.draggingHandler),o["poly-box-header"].addEventListener("touch",this.stopPropagation)),this.notResizable||(this.resizeStartHandler=this.resizeStart.bind(this),this.resizeMoveClickHandler=this.resizeMoveClick.bind(this),this.resizeMoveTouchHandler=this.resizeMoveTouch.bind(this),o["poly-box-resizeCorner"].addEventListener("mousedown",this.resizeStartHandler),document.addEventListener("touchstart",this.resizeStartHandler),document.addEventListener("mousemove",this.resizeMoveClickHandler),document.addEventListener("touchmove",this.resizeMoveTouchHandler)),!this.notResizable&&o.translateBox.appendChild(o["poly-box-resizeCorner"]),this.popupElement=o.translateBox,this.popupTitle=o["poly-box-header"],this.popupTitleWord=o["poly-box-header-word"],this.idiomArea=o["poly-box-idiom"],this.popupLemmaPager=o["poly-box-lemma-pager"],this.popupMorphPager=o["poly-box-morph-pager"],this.popupGrade=o["poly-tab-grade"],this.list=o["poly-box-list"],this.listWrapper=o["polyLingVis-box-translations"],this.grammarElement=o["poly-box-grammar"],this.grammarBody=o["polyLingVis-page"],this.grammarList=o["polyLingVis-list"],this.grammarListWrapper=o["polyLingVis-list-wrapper"],this.resizeCorner=o["poly-box-resizeCorner"],this.popupClose=o["poly-box-close"],this.popupSpeaker=o["poly-box-header-speaker"],this.colorSwitcher=o["poly-box-header-color-switcher"],this.colorName=o["poly-box-header-color-name"],this.closeClickHandler=this.closeClick.bind(this),o["poly-box-close"].addEventListener("click",this.closeClickHandler),this.getShadowRoot().appendChild(o.translateBox)},t.prototype.handleChangeDifficulty=function(){if(!this.readOnly&&!this.hideWord){var t=Date.now();if(!(t-this.lastClickTime<500||(this.lastClickTime=t,this.wasDragging))){var e,n;switch(+this.currentWord.userGrade){case i.dontKnow:e=i.wantKnow3,n=1;break;case i.wantKnow1:case i.wantKnow2:case i.wantKnow3:case i.wantKnow4:e=i.know,n=2;break;case i.know:e=i.dontKnow,n=0}this.setUserGrade(e),this.callback&&this.callback(n)}}},t.prototype.setUserGrade=function(t){if(this.currentWord){var e=this.currentWord,n=e.lemma,i=e.pos;this.knowledgeBag.setDifficulty(n.toLowerCase(),i,t),this.currentWord.userGrade=t;var o=this.gradeToColor(this.currentWord.userGrade);this.popupTitle.className="poly-box-header "+o}},t.prototype.rotateLemmaOrMorph=function(t,e,n){var i=Date.now();i-this.lastClickTime<500||(this.lastClickTime=i,this.wasDragging||(t.preventDefault(),t.stopPropagation(),this.poly.rotateDictPopup(e,n)))},t.prototype.switchTo=function(t){this.currentWord.userGrade=t;var e=this.gradeToColor(this.currentWord.userGrade);this.popupTitle.className="poly-box-header "+e},t.prototype.setInWordList=function(t){"true"==t?(this.popupElement.classList.add("poly-wordlist"),this.inWordList=!0):(this.popupElement.classList.remove("poly-wordlist"),this.inWordList=!1)},t.prototype.toggleInWordList=function(t){if(!this.wasDragging){if(t&&t.stopPropagation(),this.immutable||this.poly.wordListImmutable||!this.currentWord)return!1;if(this.inWordList)this.poly.wordListDelete(this.currentWord.firstLemma,this.currentWord.pos,!0);else{var e=this.currentWord.firstLemma,n=this.currentWord.pos,o=this.currentWord.grade,r=this.knowledgeBag.getDifficulty(e,n);this.poly.wordListAdd(e,n,o,r,null,!0,null,!0,!1,""),this.poly.setKnow(1,o,e+"|"+n,!1),this.currentWord.userGrade!=i.wantKnow3&&this.setUserGrade(i.wantKnow3)}return!1}},t.prototype.resizeStart=function(t){if(t.touches&&t.touches.length&&this.resizeCorner){var e=this.resizeCorner.getBoundingClientRect(),n=t.touches[0];Math.abs(n.clientX-(e.left+e.width/2))<10&&Math.abs(n.clientY-(e.top+e.height/2))<10&&(this.isResizing=!0,t.cancelBubble=!0,t.preventDefault(),t.stopPropagation())}else this.isResizing=!0,t.cancelBubble=!0,t.preventDefault(),t.stopPropagation()},t.prototype.resizeMove=function(t,e){var n;if(e&&(n=e.target==this.resizeCorner),this.isResizing||n){t.preventDefault(),t.cancelBubble=!0,t.stopPropagation();var i=this.popupElement.offsetLeft,o=this.popupElement.offsetTop,r=document.scrollingElement||document.documentElement,s=r.scrollLeft,a=r.scrollTop,l=e?e.pageX:t.pageX,u=e?e.pageY:t.pageY,c=Math.abs(l-i-s),h=Math.abs(u-o-a);c=Math.max(200,c),h=Math.max(150,h),this.popupElement.style.width=c+"px",this.popupElement.style.height=h+"px"}},t.prototype.resizeMoveClick=function(t){this.resizeMove(t)},t.prototype.resizeMoveTouch=function(t){var e=t.changedTouches[0];this.resizeMove(t,e)},t.prototype.checkIfPhraseVisible=function(){return this.idiomArea.classList.contains("show")},t.prototype.dragStart=function(t){var e=t.touches&&t,n=!t.touches&&t;if(e||n){this.isDragging=!0,this.stopPropagation(t),t.cancelBubble=!0;var i=this.popupElement.offsetLeft,o=this.popupElement.offsetTop;this.relativeX=n?n.clientX:e.touches[0].clientX,this.relativeX-=i,this.relativeY=n?n.clientY:e.touches[0].clientY,this.relativeY-=o}},t.prototype.dragging=function(t){var e=t.touches&&t,n=!t.touches&&t;if((e||n)&&this.isDragging){this.wasDragging=!0,t.preventDefault(),t.cancelBubble=!0;var i=n?n.clientX:e.touches[0].clientX;i-=this.relativeX;var o=n?n.clientY:e.touches[0].clientY;o-=this.relativeY,this.adjustPosition(i,o,!1),this.draggedX=i,this.draggedY=o}},t.prototype.adjustPosition=function(t,e,n){var i;if(!this.poly.isPolyArticle){var o=this.appl.isReadium&&!window.lingVisSdk_Readium_isAndroid,r=o?0:document.body.scrollLeft+document.documentElement.scrollLeft,s=o?0:document.body.scrollTop+document.documentElement.scrollTop;n||(t-=r,e-=s)}this.popupElement.getBoundingClientRect();var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=0,c=0,h=(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1;(h<.9||h>1.1)&&h>.001&&(u=((h=1/h)-1)*this.popupElement.offsetWidth/2,c=(h-1)*this.popupElement.offsetHeight/2);var p=this.popupElement.offsetWidth,d=this.popupElement.offsetHeight,g=0,f=0;t+p+u>a&&(g-=t+p-a+u),e+d+c>l&&(f-=e+d-l+c),t-u<0&&(g-=t-u),e-c<0&&(f-=e-c),this.poly.isPolyArticle||(t+=r,e+=s),this.popupElement.style.left=t+g+"px",this.popupElement.style.top=e+f+"px"},t.prototype.dragEnd=function(t){var e=this;this.isDragging&&(t.stopPropagation(),t.cancelBubble=!0,this.isDragging=!1),setTimeout((function(t){return e.wasDragging=!1}),10)},t.prototype.stopPropagation=function(t){return t.stopPropagation(),!1},t.prototype.calculateRightOffset=function(t){var e=document.body.clientWidth,n=t.offsetWidth;return e-(t.offsetLeft+n)},t.prototype.calculatePopupX=function(t){var e=document.body.clientWidth,n=t.offsetWidth,i=t.offsetLeft;return this.calculateRightOffset(t)<l/2?e-l-10:i>l/2?i+n/2-l/2:10},t.prototype.computePartOfSpeech=function(t){return""},t.prototype.calculatePopupY=function(t){return t.getBoundingClientRect().top+35},t.prototype.show=function(t,e,n,i,o,r,s){var a,l=this.storage.getItem("darkMode");document.body.style.filter=l?"invert(1)":"none",this.popupTitle.style.filter=l?"invert(1)opacity(40%)":"none";var u,c,h=(null===(a=window.visualViewport)||void 0===a?void 0:a.scale)||1;(h<.9||h>1.1)&&h>.001&&(h=1/h,this.popupElement.style.transform="scale("+h+")"),this.currentWord=t,this.callback=r;var p=!0;if(this.isStatic||!this.draggedX&&!this.draggedY?n?(u=this.calculatePopupX(n),c=this.calculatePopupY(n)):(u=null==i?100+(h-1)*this.popupElement.offsetWidth/2:i,c=null==o?100+(h-1)*this.popupElement.offsetHeight/2:o):(u=this.draggedX,c=this.draggedY,p=!1),this.adjustPosition(u,c,p),this.isSpeechSynthesisSupported&&!this.hideWord?(this.popupSpeaker.style.display="block",this.wordToSpeechHandler&&this.popupSpeaker.removeEventListener("click",this.wordToSpeechHandler),this.wordToSpeechHandler=this.createSynthSpeech.bind(this),this.popupSpeaker.addEventListener("click",this.wordToSpeechHandler)):this.popupSpeaker.style.display="none",this.generateHeader(t),this.list.innerHTML="",e){var d=JSON.parse(e),g=d.paths;if(this.hasGrammarConstructs=!1,g&&g.length>0)this.hasGrammarConstructs=!0,this.grammarSetData(d.paths);else if(t.pos){var f=this.getGrammarPathFromPOS(t.pos);f&&(this.hasGrammarConstructs=!0,this.grammarSetData([{title:f}]))}this.hasGrammarConstructs?this.popupElement.classList.add("poly-box-has-grammar"):this.popupElement.classList.remove("poly-box-has-grammar"),d.lemmaCount>1?(this.popupLemmaPager.innerText=d.lemmaNum+1+"/"+d.lemmaCount,this.popupTitleWord.insertBefore(this.popupLemmaPager,this.popupTitleWord.firstChild)):this.popupLemmaPager.parentElement==this.popupTitleWord&&this.popupTitleWord.removeChild(this.popupLemmaPager),d.parseCount>1?(this.popupMorphPager.innerText=d.parseNum+1+"/"+d.parseCount,this.grammarList.insertBefore(this.popupMorphPager,this.grammarList.firstChild)):this.popupMorphPager.parentElement==this.grammarList&&this.grammarList.removeChild(this.popupMorphPager)}this.popupElement.classList.remove("hidden"),this.popupElement.classList.add("show"),this.showTranslations(t.translations,s),this.storage.setItem("dictPopupUsed","1")},t.prototype.close=function(){this.currentWord=null,this.popupElement.classList.remove("show"),this.popupElement.classList.add("hidden")},t.prototype.remove=function(){var t,e,n,i,o,r,s,a,l,u,c,h,p,d,g;this.popupElement&&(this.close(),null===(t=this.popupSpeaker)||void 0===t||t.removeEventListener("click",this.wordToSpeechHandler),document.removeEventListener("mouseup",this.outerClickHandler),document.removeEventListener("touchend",this.outerClickHandler),null===(e=this.popupTitleWord)||void 0===e||e.removeEventListener("click",this.changeDifficultyHandler),null===(n=this.popupTitleWord)||void 0===n||n.removeEventListener("touchend",this.changeDifficultyHandler),null===(i=this.popupTitle)||void 0===i||i.removeEventListener("mousedown",this.dragStartHandler),document.removeEventListener("mouseup",this.dragEndHandler),document.removeEventListener("mousemove",this.draggingHandler),null===(o=this.popupTitleWord)||void 0===o||o.removeEventListener("touchstart",this.dragStartHandler),document.removeEventListener("touchend",this.dragEndHandler),document.removeEventListener("touchmove",this.draggingHandler),null===(r=this.resizeCorner)||void 0===r||r.removeEventListener("mousedown",this.resizeStartHandler),document.removeEventListener("touchstart",this.resizeStartHandler),document.removeEventListener("mousemove",this.resizeMoveClickHandler),document.removeEventListener("touchmove",this.resizeMoveTouchHandler),null===(s=this.popupClose)||void 0===s||s.removeEventListener("click",this.closeClickHandler),null===(a=this.popupGradeStar)||void 0===a||a.removeEventListener("click",this.toggleInWordListHandler),null===(l=this.popupGradeStar)||void 0===l||l.removeEventListener("touchend",this.toggleInWordListHandler),null===(u=this.popupTitle)||void 0===u||u.removeEventListener("click",this.stopPropagation),null===(c=this.popupTitle)||void 0===c||c.removeEventListener("touch",this.stopPropagation),null===(h=this.popupLemmaPager)||void 0===h||h.removeEventListener("click",this.rotateLemma),null===(p=this.popupLemmaPager)||void 0===p||p.removeEventListener("touchend",this.rotateLemma),null===(d=this.popupMorphPager)||void 0===d||d.removeEventListener("click",this.rotateMorph),null===(g=this.popupMorphPager)||void 0===g||g.removeEventListener("touchend",this.rotateMorph),this.popupElement.remove())},t.prototype.isOpen=function(){return null!=this.currentWord},t.prototype.gradeToColor=function(t){var e="red";switch(+t){case i.know:e="green";break;case i.wantKnow1:case i.wantKnow2:case i.wantKnow3:case i.wantKnow4:e="yellow"}return e},t.prototype.generateHeader=function(t){var e=this.gradeToColor(t.userGrade),n=this.hideWord?"":this.computeGradeLabel(t.grade),i=t.idiom,o=this.isHbo?' style="direction:rtl"':"",r="&#160;"+this.computePartOfSpeech(t.pos);if(this.popupTitleWord.innerHTML=this.hideWord?"":'<span class="poly-box-header-word-lemma"'+o+">"+t.displayLemma+r+"</span>",this.popupTitle.className="poly-box-header "+(this.hideWord?"":e),this.showDots(t.userGrade),this.popupTitleWord.appendChild(this.colorSwitcher),this.popupTitleWord.appendChild(this.colorName),n?(this.popupGrade.innerHTML="<span>"+n+"</span>",this.popupGrade.classList.add("poly-tab-grade-has")):(this.popupGrade.innerHTML="",this.popupGrade.classList.remove("poly-tab-grade-has")),this.wordListEnabled&&!this.immutable&&(this.popupGradeStar=document.createElement("div"),this.popupGradeStar.classList.add("poly-tab-grade-star"),this.popupGrade.appendChild(this.popupGradeStar),this.toggleInWordListHandler=this.toggleInWordList.bind(this),this.popupGradeStar.addEventListener("click",this.toggleInWordListHandler),this.popupGradeStar.addEventListener("touchend",this.toggleInWordListHandler)),(n||this.wordListEnabled)&&this.popupTitleWord.appendChild(this.popupGrade),this.adjustWidthOfHeaderWord(n.length>0),i){var s=i;s?(s.indexOf("|")&&(s=s.split("|")[0]),this.idiomArea.innerHTML=s,this.idiomArea.classList.add("show")):(this.idiomArea.classList.remove("show"),this.idiomArea.innerHTML="")}else this.idiomArea.classList.remove("show"),this.idiomArea.innerHTML="";this.wordListEnabled&&!this.immutable&&(this.inWordList?this.popupElement.classList.add("poly-wordlist"):this.popupElement.classList.remove("poly-wordlist"))},t.prototype.adjustWidthOfHeaderWord=function(t){function e(t){return t?t.clientWidth:0}var n=e(this.colorSwitcher),i=e(this.popupGrade),o=n+i+(e(this.popupClose)+e(this.popupSpeaker));this.popupTitleWord.style.width="calc(100% - "+o+"px)",this.popupTitleWord.style.paddingLeft=n+"px",this.popupTitleWord.style.paddingRight=i+"px"},t.prototype.computeGradeLabel=function(t){var e="";switch(t){case 1:e="A1";break;case 2:e="A2";break;case 3:e="B1";break;case 4:e="B2";break;case 5:e="C1";break;case 6:e="C2"}return e},t.prototype.showTranslations=function(t,e){var n=this;this.list.innerHTML="",this.list.appendChild(this.idiomArea),t.forEach((function(t){if(t.length>0){var e=document.createElement("div");e.className="poly-box-translate",-1!=t.indexOf("​")&&e.classList.add("poly-box-translate-reported"),e.innerHTML="<span>"+t+"</span>",n.list.appendChild(e)}})),e&&e.forEach((function(t){if((t=t.trim()).length>0){var e=document.createElement("div");e.className="poly-box-translate poly-box-definition",e.textContent=t,n.list.appendChild(e)}}))},t.prototype.createSynthSpeech=function(){var t=Date.now();t-this.lastClickTime<500||(this.lastClickTime=t,this.currentWord.token&&this.currentWord.token.toLowerCase()!=this.currentWord.displayLemma.toLowerCase()&&a.F.speakUtterance(this.currentWord.token,this.utils),a.F.speakUtterance(this.currentWord.displayLemma,this.utils))},t.prototype.checkIfSpeechSynthesisSupported=function(){var t=this;if(window.speechSynthesis)var e=0,n=setInterval((function(){t.isSpeechSynthesisSupported=!!a.F.getVoice(t.utils)||null,2==++e&&clearInterval(n)}),1e3)},t.prototype.showDots=function(t){var e="";switch(t){case i.wantKnow2:e="poly-1dot";break;case i.wantKnow1:e="poly-2dots"}0!=e.length&&this.popupTitle.classList.add(e)},t.prototype.getShadowRoot=function(){var t=document,e="poly-box-shadow-host",n=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||document.body,i=n.querySelector(":scope > #"+e);return i||((i=document.getElementById(e)||document.createElement("div")).id=e,n.appendChild(i)),i.shadowRoot||i.attachShadow({mode:"open"})},t.prototype.grammarSetData=function(t){var e=this,n=(document.documentElement.offsetHeight,this.getShadowRoot()),i=n.querySelector("#polyLingVis-page"),o=n.querySelector("#polyLingVis-fab-open-book");i.style.display="none",o.style.display="none",this.grammarList.innerHTML="",i.innerHTML="",t.forEach((function(t){var n=document.createElement("div");n.classList.add("grammar-construct"),n.textContent=t.title,n.setAttribute("aria-disabled","true"),n.setAttribute("role","button"),n.setAttribute("lang","en"),n.style.cursor="inherit",e.grammarList.appendChild(n)}))},t.prototype.getGrammarPathFromPOS=function(t){return this.posNames[t]||""},t}()},269:function(t,e,n){"use strict";n.d(e,{B:function(){return a}});var i=n(655),o=n(312),r=n(752),s=function(){function t(e,n){this.document=e,this.utils=n,this.pointsReceived=0,this.lastLookup=0,this.periodStart=(new Date).getTime()/1e3,this.periodEnd=this.periodStart+t.threeMinutes,this.accumulator={},this.lastSent=(new Date).getTime(),this.visitedHash={},this.app=this.utils.getApp()}return t.prototype.lookupWord=function(e,n,i,o){if(this.app.pointsEnabled){i=i&&!o;var r=(new Date).getTime()/1e3;r>this.periodEnd&&(this.periodStart=r,this.periodEnd=this.periodStart+t.threeMinutes,this.pointsReceived=0),this.isTimeInPeriod(r)&&this.pointsReceived>=3&&(this.pointsReceived=0),0==this.pointsReceived&&(this.sendOrAccumulate(e,{time:1},i),this.pointsReceived+=1),this.isTimeInPeriod(r)&&this.isTimeInPeriod(this.lastLookup)&&1==this.pointsReceived&&(this.sendOrAccumulate(e,{time:2},i),this.pointsReceived+=2,this.periodStart+=t.threeMinutes,this.periodEnd+=t.threeMinutes),this.lastLookup=r;var s=n?this.document.getText(n):"",a=this.hashCode(s,500);if(!this.visitedHash[a]){this.visitedHash[a]=!0;var l=this.countWords(s);l&&this.sendOrAccumulate(e,{words:l},i)}}},t.prototype.hashCode=function(t,e){var n=0;if(!t||!t.length)return n;for(var i=0;i<t.length;i++){if(e&&i>e)return n;n=(n<<5)-n+t.charCodeAt(i),n|=0}return n},t.prototype.isTimeInPeriod=function(t){return t>=this.periodStart&&t<=this.periodEnd},t.prototype.countWords=function(t){return t.replace(/(\r\n|\n|\r)/gm," ").split(" ").filter((function(t){return""!=t})).length},t.prototype.sendOrAccumulate=function(e,n,i){i&&this.lastSent&&(new Date).getTime()-this.lastSent>1e3*t.threeMinutes&&(i=!1);var o=this.accumulator[e];o||(o=this.accumulator[e]={}),o.time=(o.time||0)+(n.time||0),o.words=(o.words||0)+(n.words||0),i||(this.lastSent=(new Date).getTime(),(o.time||o.words)&&this.addPoints(e,o),this.accumulator[e]={time:0,words:0})},t.prototype.addPoints=function(t,e){t&&(this.cacheChanges()?this.utils.getPlatform().callNative("cacheChanges","changeType=points&changes="+JSON.stringify(e)):this.utils.request(o.z.command.points.points,"post",{langid:t,points:e,userDate:this.formatDate(new Date),isGamificationEnabled:!0,materialId:this.app.materialId},null,null,!1,!1,!1))},t.prototype.formatDate=function(t){var e=t.getFullYear().toString().substring(2),n=("0"+(t.getMonth()+1).toString()).slice(-2),i=("0"+t.getDate().toString()).slice(-2);return parseInt(e+n+i)},t.prototype.cacheChanges=function(){return r.g.cacheChanges&&this.app.getClientVersion()>=587},t.threeMinutes=180,t}(),a=function(){function t(t,e,n,i,o,r,s){this.articleUrl=null,this.analyzableOnTap=!0,this.bagOfBlocks={},this.separateBlocks=!0,this.points=null,this.treeNodeMap={},this.treeNodeCount=0,this.analyzedElements=[],this.articleId="",this.analyzed=[],this.sentences=[],this.markedUpBlockOffset=0,this.maxWords=65535,this.wordArray=[],this.wordHash={},this.wordArrayLength=0,this.processingStrings={},this.init(e,n,i,o,r),this.analyzableOnTap=!!s,this.articleUrl=t,e.addDocument(this)}return t.prototype.init=function(t,e,n,i,o){this.medium=t,this.knowledge=e,this.utils=n,this.grammar=i,this.dictPopup=o},t.prototype.getUtils=function(){return this.utils},t.prototype.analyze=function(t,e,n){var i=0;if(!this.bagOfBlocks){i=this.analyzedElements.length;for(var o=0;o<this.analyzedElements.length;o++){if(this.compareInTree(this.analyzedElements[o],t)>0){i=o;break}}}this.analyzeAndMarkup(t,i,(function(t){n&&n(t)}),e)},t.prototype.isAnalyzing=function(){for(var t in this.processingStrings)return!0;return!1},t.prototype.analyzeAndMarkup=function(t,e,n,r){var s=this,a=this.getText(t).replace(/\n/g," ");if(!this.processingStrings[a]){var l=function(){return delete s.processingStrings[a]};if(this.processingStrings[a]=!0,setTimeout(l,1e4),this.separateBlocks){var u=this.utils.getCurrentLanguage(),c={lang:u.name,langid:u._id,text:a,nlpPort:"aws",skipDB:"true"};this.utils.request(o.z.command.articles.getTextData,"get",c,(function(e){e=e.textData,s.markupElement(t,[e.analyzed],e.userData),l(),n.call(s,e.analyzed)}))}else{var h=(0,i.pi)((0,i.pi)({},r||{}),{lang:this.utils.getCurrentLanguage().name,url:this.articleUrl,isText:!0,html:a});null!=e&&(h.insertBefore=e),this.utils.request(o.z.command.articles.postArticleFromText,"post",h,(function(e){var i=(e.article.analyzed||"").split("\n"),o=[];i.forEach((function(t,e){var n=JSON.parse(t||"[]");0==e&&s.bagOfBlocks&&(s.bagOfBlocks[a]=n),o.push(n)})),o.length?s.getKnowledge((function(e){s.markupElement(t,o,e.articleData),l(),n.call(s,o[0])})):l()}))}}},t.prototype.getKnowledge=function(t){var e=this,n=this.utils.getCurrentLanguage();this.utils.request(o.z.command.articles.getData,"get",{langid:n._id,article:this.articleUrl},(function(n){t.call(e,n)}))},t.prototype.getArticleRaw=function(t){var e=this,n=this.utils.getCurrentLanguage();this.utils.request(o.z.command.articles.getArticle,"get",{fromLanguage:n.name,filename:this.articleUrl},(function(n){e.articleId=n.text.articleId||"",e.analyzedElements=[],e.sentences=[],e.getKnowledge((function(i){var o=i.articleData;e.knowledge.merge(o),t&&t(n.text,o)}))}),null,!0,!1,!1)},t.prototype.getArticle=function(t){var e=this;if(this.separateBlocks)return this.analyzedElements=[],this.sentences=[],t&&t([],{});this.getArticleRaw((function(n,i){var o=n.analyzed||"";if(!o)return t&&t([],{});var r=o.split("\n"),s=n.text.split("\n"),a=[];e.bagOfBlocks&&(e.bagOfBlocks={}),r.forEach((function(t,n){var i=JSON.parse(t||"[]");a.push(i),e.analyzableOnTap&&e.bagOfBlocks&&s[n]&&(e.bagOfBlocks[s[n]]=i)})),t&&t(a,i)}))},t.prototype.setUrl=function(t){this.articleUrl=t},t.prototype.markup=function(t,e){this.sentences=[],this.markupElement(this.getRoot(),t,e)},t.prototype.markupElement=function(t,e,n){if(this.cleanTransient(),-1==this.analyzedElements.indexOf(t)){n&&this.knowledge.merge(n),this.currAnalyzed=e;var i=this.computeDiff(t);this.walkAndHighlight(t,i),this.markedUpBlockOffset+=e.length,this.cleanTransient(),this.analyzedElements.push(t)}},t.prototype.cleanTransient=function(){this.wordHash={},this.wordArrayLength=0,this.wordArray=[],this.wordArray[0]="\0",this.chars="",this.curr1=null,this.curr2=null},t.prototype.cleanPermanent=function(){this.treeNodeMap={},this.treeNodeCount=0,this.analyzedElements=[],this.articleId="",this.analyzed=[],this.sentences=[],this.markedUpBlockOffset=0},t.prototype.computeDiff=function(t){var e;for(this.maxWords=4e4,this.curr1={line:0,node:null,child:null};null!=(e=this.next1());){null!=this.curr1.node.compound&&this.fillCompoundToken(this.curr1.node),this.curr1.child&&this.curr1.child.compound&&this.fillCompoundToken(this.curr1.child);var n=(e.token||e.lemma||"").trim();if(this.addToChars(n))break}var i=this.chars;this.chars="",this.maxWords=65535;var o,r=this.getTextNodes(t);for(this.curr2={textNodes:r,textNum:0,posInText:0};null!=(o=this.next2())&&!this.addToChars(o););return(new window.diff_match_patch).diff_main(i,this.chars,!1)},t.prototype.next1=function(){var t,e=this;if(!this.curr1.node)return this.curr1.node=(this.currAnalyzed[this.curr1.line]||[])[0],this.curr1.child=null,this.curr1.node?this.nextChild():null;null==this.curr1.node.compound||this.curr1.node.token||(this.curr1.node.token="",(this.getChildren(this.curr1.node,!0)||[]).forEach((function(t){e.curr1.node.token+=t.token||""})));if(this.getChildren(this.curr1.node)&&(t=this.nextChild()))return t;var n=this.curr1.node,i=n.parent&&n.parent.idiom,o=i?n.parent.idiom:this.currAnalyzed[this.curr1.line],r=o.indexOf(n);if(i&&r==o.length-1&&(r=(o=this.currAnalyzed[this.curr1.line]).indexOf(n.parent)),r<o.length-1&&(this.curr1.node=o[r+1],this.curr1.child=null,t=this.nextChild()))return t;if(this.separateBlocks)return null;for(;++this.curr1.line<this.currAnalyzed.length&&0==(this.currAnalyzed[this.curr1.line]||[]).length;);return this.curr1.node=null,this.next1()},t.prototype.nextChild=function(){var t=this.getChildren(this.curr1.node);if(!t)return this.curr1.node;if(!this.curr1.child)return this.curr1.child=t[0],this.curr1.child;var e=t.indexOf(this.curr1.child);return e<t.length-1?(this.curr1.child=t[e+1],this.curr1.child):null},t.prototype.getChildren=function(t,e){var n=["syntax","colloc","idiom","idiom1","idiom2"];if(null!=t.compound&&!e)return null;for(var i=0;i<n.length;i++){var o=t[n[i]];if(o)return o.forEach((function(e){e.parent||(e.parent=t)})),o}return null},t.prototype.fillCompoundToken=function(t){t.token="",(this.getChildren(t,!0)||[]).forEach((function(e){t.token+=e.token||""}))},t.prototype.next2=function(){for(var t=this.curr2.textNodes,e=this.curr2.textNum;!t[e];)if(e++,this.curr2.textNum>=t.length)return null;if(this.curr2.textNum>=t.length)return null;this.curr2.currTextNum=e,this.curr2.currTextNode=t[e];for(var n=t[e].getText()||"",i=this.curr2.posInText;i<n.length&&!this.isLetter(n[i]);i++);if(this.curr2.currPosInText=i,i<n.length){for(var o=i+1;o<n.length&&this.isLetter(n[o]);o++);return o>=n.length?(this.curr2.textNum++,this.curr2.posInText=0):this.curr2.posInText=o,n.substring(i,o)}return this.curr2.textNum++,this.curr2.posInText=0,this.next2()},t.prototype.isLetter=function(t){return t&&t.toLowerCase()!=t.toUpperCase()},t.prototype.hasLetter=function(t){for(var e=0;e<t.length;e++)if(this.isLetter(t[e]))return!0;return!1},t.prototype.addToChars=function(t){if("function"==typeof this.wordHash.hasOwnProperty?this.wordHash.hasOwnProperty(t):void 0!==this.wordHash[t])this.chars+=String.fromCharCode(this.wordHash[t]);else{if(this.wordArrayLength==this.maxWords)return!0;this.chars+=String.fromCharCode(this.wordArrayLength),this.wordHash[t]=this.wordArrayLength,this.wordArray[this.wordArrayLength++]=t}return!1},t.prototype.walkAndHighlight=function(t,e){var n=this,i=this.getTextNodes(t);this.curr1={line:0,node:null,child:null},this.curr2={textNodes:i,textNum:0,posInText:0};for(var o=null,r=0,s=this.sentences.length,a={prevToken:null,sentenceNum:0,toWordList:[]},l=0;l<e.length;l++)for(var u=e[l],c=function(t){var e=!1;if(1!=u[0]){var l=h.next1();r+s>=h.sentences.length&&(h.analyzed[h.curr1.line+h.markedUpBlockOffset]=h.currAnalyzed,h.sentences.push({line:h.curr1.line+h.markedUpBlockOffset,node:l})),null!=l.sentenceEnd&&(e=!0)}if(-1!=u[0]){h.next2(),h.validateMarkupIfNeeded(!1);var c=h.curr1.child||h.curr1.node;if(0==u[0]){var p=i[h.curr2.currTextNum],d=h.curr2.currPosInText,g=null;if(c==h.curr1.node&&null!=c.compound){var f=h.getChildren(c,!0);if(f){var m=[];f.forEach((function(t){g=n.markupWord(p,t==f[0]?d:0,t,a),p=g.remainder,m.push(g.span),n.setSentenceNum(g.span,n.curr1.line+n.markedUpBlockOffset+","+r)})),m.length>=2&&h.wrapSiblings(m[0],m[m.length-1],"compound")}}g||(g=h.markupWord(p,d,c,a),h.setSentenceNum(g.span,h.curr1.line+h.markedUpBlockOffset+","+r)),i[h.curr2.currTextNum]=g.remainder;var y=d+c.token.length;if(h.curr2.posInText-=y,c==h.curr1.child){var v=h.getChildren(h.curr1.node,!0);c==v[0]?o=g.span:c==v[v.length-1]&&o&&h.wrapSiblings(o,g.span,"idiom")}else o=null}}e&&r++},h=this,p=0;p<u[1].length;p++)c();this.validateMarkupIfNeeded(!0)},t.prototype.validateMarkupIfNeeded=function(t){if(!this.bagOfBlocks){var e=this.curr2.currElement,n=t?null:this.getBlockElement(this.curr2.currTextNode);e&&(n&&!n.equals(e)||t&&(!this.curr2.lastValidated||!e.equals(this.curr2.lastValidated)))&&(this.validateMarkup(e)&&-1==e.indexIn(this.analyzedElements)&&this.analyzedElements.push(e),this.curr2.lastValidated=e),this.curr2.currElement=n}},t.prototype.markupWord=function(t,e,n,i){var o=n.lemma||n.token,r=n.pos||n.tag,s=-1==n.grade||"NP"==r?6:this.knowledge.getDifficulty(o,r),a=[],l={};return this.knowledge.getStyles(s,a),this.grammar.getStyles(n,i,a,l),this.splitTextNode(t,e,n.token.length-1,n,a,l)},t.prototype.refreshHighlight=function(t,e){for(var n in this.treeNodeMap){var i=this.treeNodeMap[n];if((i.lemma||i.token)==t){this.knowledge.setDifficulty(t,"",e,!0);var o=[];this.knowledge.getStyles(e,o),this.setStyles(i.spanNode,o)}}},t.prototype.onSelect=function(t,e){var n=this;void 0===e&&(e={});var i=this.getTreeNode(t);if(i){var r=i.token||i.lemma,a=i.lemma||i.token,l=i.pos||i.tag,u=i.parent,c="",h="",p="",d=i.tags||"",g=this.grammar.onGrammar(d,this,t);if((null==g?void 0:g.prefix)&&(a=g.prefix+a),g=(g||[])[0]||g,g=JSON.stringify(g||{}),u)u.compound&&(p="true"),this.getChildren(u,!0).forEach((function(t){c+=(c?" ":"")+(t.token||t.lemma),h+=(h?" ":"")+(t.lemma||t.token)}));var f=this.utils.getCurrentLanguage(),m=this.utils.getApp();if(!this.points&&m.pointsEnabled&&(this.points=new s(this,this.utils)),this.points&&this.points.lookupWord(f._id,this.getBlockElement(t),!1,!0),window.lingVisSdk._startedTranslation=""+(new Date).getTime(),m.isComm&&m.getClientVersion()>=583){var y=function(t){return encodeURIComponent(t)};this.utils.getPlatform().callNative("translatePhrase","langid="+f._id+"&word="+y(r)+"&lemma="+y(a)+"&grade="+i.grade+"&phrase="+y(c)+"&phraseLemma="+y(h)+"&compound="+y(p)+"&partOfSpeech="+l+"&toLanguage="+f.l1+"&fromLanguage="+f.name+"&morph="+d)}else{var v={langid:f._id,word:r,lemma:a,phrase:c,phraseLemma:h,compound:p,partOfSpeech:l,toLanguage:f.l1,fromLanguage:f.name,isIdiom:c?"true":""};this.utils.request(o.z.command.dictionaries.translate,"get",v,(function(t){var o=t.definitions&&t.definitions.join("|")||"";if((t=t.translation).word=t.word||{},t.word.trans=t.word.trans||[],t&&(t.word.trans&&t.word.trans.length||t.phrase&&t.phrase.trans&&t.phrase.trans.length)){t.word.trans.forEach((function(e,i){t.word.trans[i]=n.utils.adjustTranslation(e)}));var s=t.word.trans.join("|")+"|"+(((t.phrase||{}).trans||{})[0]||"").split("|")[0],u=(t.word.gotPos||"").trim();if(s){-1==a.indexOf("\\")&&-1==a.indexOf("#")&&t.word.orig&&(a=t.word.orig),"la"==f.name&&(a=a.split("#")[0]);var c=-1==i.grade||"NP"==l?6:n.knowledge.getDifficulty(a,l);e.hideWord&&(c="hidden"),a.toLowerCase()==r.toLowerCase()&&(r=""),n.utils.getPlatform().isWeb?n.dictPopup.open(n,a,r,l,s,i.grade,u,o,g,c):n.utils.getPlatform().openDictPopup(a,r,l,s,i.grade,u,c,o,g)}}}),null,!0,!1,!1)}}},t.prototype.getHead=function(t){var e=this.getTreeNode(t);if(!e)return null;var n=+((e.tags||"").split(":")[1]||"");return!n||isNaN(n)?0:n},t.prototype.getRelation=function(t){var e=this.getTreeNode(t);return e?((e.tags||"").split(":")[2]||"").split("=")[0]:null},t.prototype.findHead=function(t){var e=this.getTreeNode(t);if(!e)return null;var n=+((e.tags||"").split(":")[2]||"").split("=")[1];if(!n||isNaN(n)||n<1)return null;var i=this.getSentenceNum(t),o=this.getSentenceNodes(i);return n>o.length?null:o[n-1].spanNode},t.prototype.findRelatedTreeNodes=function(t,e){var n=this.getHead(t);if(n<=0)return[];for(var i=this.getSentenceNum(t),o=this.getSentenceNodes(i),r=this.utils.getCurrentLanguage(),s=[],a=0;a<o.length;a++){var l=o[a],u=(l.tags||"").split(":"),c=(u=(u[2]||"").split("="))[0];+u[1]==n&&l.spanNode&&(e&&this.exposeRelation(r.name,c,l.spanNode.node.textContent.trim(),t.getText().trim())&&s.push(l))}return s},t.prototype.exposeRelation=function(t,e,n,i){switch(t){case"sv":return"aux"==e||"mark"==e;case"is":return"aux"==e||"cop"==e||"mark"==e&&"að"==n;case"fr":case"it":return"aux"==e||"auxpass"==e||"case"==e||"det"==e||"cop"==e;case"de":return"compound-prt"==e;default:return!1}},t.prototype.findRelated=function(t,e){return this.findRelatedTreeNodes(t,e).map((function(t){return t.spanNode}))},t.prototype.getSentence=function(t){for(var e=t.split(","),n=+e[0],i=+e[1],o=0;o<this.sentences.length;o++){var r=this.sentences[o];if(r.line==n){if(0==i)return r;i--}}return null},t.prototype.getSentenceNodes=function(t){var e=+t.split(",")[0],n=this.getSentence(t);if(!n)return[];var i=n.node;this.curr1={line:this.separateBlocks?0:e,node:i,child:null},this.separateBlocks&&(this.currAnalyzed=this.analyzed[e]||[]);for(var o=[i];null!=(i=this.next1())&&(o.push(i),null==i.sentenceEnd););return o},t.prototype.getSelectedBlockText=function(){var t=this.getSelection();if(!t)return"";var e=this.getText(t);if(!this.getTreeNode(t)||!e)return"";var n=this.getSentenceNum(t),i=this.getSentenceNodes(n);if(!i.length)return"";for(var o=i[0].token||i[0].lemma||"",r=1;r<i.length&&r<=30;r++){var s=i[r],a=s.token||s.lemma;if(a&&this.hasLetter(a)?(o&&(o+=" "),o+=a==e?"​"+a+"​":a):o+=a,null!=s.sentenceEnd)break}return o},t.prototype.getWordsInContext=function(t){var e=this,n=function(t){var n=t.lemma||t.token,i=t.pos||t.tag;return-1==t.grade||"NP"==i?6:e.knowledge.getDifficulty(n,i)};t||(t=function(t){var e=n(t);return e>=1&&e<=4});var i={};this.sentences.forEach((function(o){e.curr1={line:e.separateBlocks?0:o.line,node:o.node,child:null},e.separateBlocks&&(e.currAnalyzed=e.analyzed[o.line]||[]);for(var r={},s="",a=o.node;null!=a;a=e.next1()){var l="",u=a.token||a.lemma,c=a.lemma||a.token;if(u&&e.hasLetter(u)){if(s&&(l=" "),t(a)&&!i[c]){var h=a.pos||a.tag;i[c]={lemma:c,token:u,pos:h,grade:a.grade,difficulty:n(a),ctxtText1:s+" ",ctxtText2:""},r[c]=i[c]}l+=u}else l=u;for(var p in s+=l,r)p!=c&&(i[p].ctxtText2+=l);if(null!=a.sentenceEnd)break}}));var o=function(t,e){var n=t.split(" ");return n.length>15&&(e?(n.splice(15),n[n.length-1]=n[0]+"..."):(n.splice(0,n.length-15),n[0]="..."+n[0])),n.join(" ")},r=[];for(var s in i){var a=i[s];a.ctxtText1=o(a.ctxtText1||"",!1),a.ctxtText2=o(a.ctxtText2||"",!0),r.push(i[s])}return r},t}()},450:function(t,e,n){"use strict";n.d(e,{P:function(){return d},b:function(){return p}});var i=n(655),o=n(752),r=n(430),s=n(269),a=n(190),l=n(104),u=n(738),c=n(401),h=n(312),p=function(){function t(t){this.node=t}return t.prototype.getText=function(){return this.node.textContent},t.prototype.equals=function(e){return e instanceof t&&this.node==e.node},t.prototype.indexIn=function(t){for(var e=0;e<t.length;e++)if(this.equals(t[e]))return e;return-1},t}(),d=function(t){function e(e,n,i,o,r,s,l,u){var c=t.call(this,n,i,o,r,s,l,u)||this;return c.element=e,c.lastTouchStart=0,c.lastTouchEnd=0,c.blockElements=["address","article","aside","audio","blockquote","body","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","table","tr","td","tbody","tfoot","ul","video","li","poly-text"],c.doc=e.ownerDocument,c.doc.getElementById("polyLingVis-style")||(c.styleSheetEl=c.doc.createElement("style"),c.doc.head.appendChild(c.styleSheetEl),c.addStyles(),c.handleTouch()),c.labels=new a.R(c,r),c}return(0,i.ZT)(e,t),e.prototype.getDocument=function(){return this.doc},e.prototype.getLabels=function(){return this.labels},e.prototype.equals=function(t){var e=t;return this.element==e.element},e.prototype.getText=function(t){return t.node.textContent},e.prototype.getRoot=function(){return new p(this.element)},e.prototype.getTextNodes=function(t){for(var e,n=t.node,i=this.doc.createTreeWalker(n,NodeFilter.SHOW_TEXT,null),o=[];e=i.nextNode();)e.textContent.trim()&&o.push(new p(e));return o},e.prototype.getTextNodesInt=function(t,e){for(var n,i=this.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),o=[];n=i.nextNode();)if(n.textContent.trim()&&(o.push(n),0==--e))return o;return o},e.prototype.toElement=function(t){return t.node},e.prototype.compareInTree=function(t,e){var n=t.node,i=e.node,o=n.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0},e.prototype.splitTextNode=function(t,e,n,i,o,r){var s=t.node;if(!s.parentNode)return null;var a=e+n>s.textContent.length?s.textContent.length:e+n,l=s.splitText(e),u=a-e+1,c=u>=l.textContent.length?null:l.splitText(u),h=this.doc.createElement("span");for(var d in s.parentNode.insertBefore(h,l),h.insertBefore(l,null),o.forEach((function(t){h.classList.add("polyLingVis-"+t)})),r)h.setAttribute(d,r[d]);return h.dataset.treeNode=""+this.treeNodeCount++,this.treeNodeMap[h.dataset.treeNode]=i,i.spanNode=new p(h),{textNode:new p(s),span:i.spanNode,remainder:new p(c)}},e.prototype.setSentenceNum=function(t,e){t.node.dataset.sentNum=e},e.prototype.getSentenceNum=function(t){return(t.node.dataset||{}).sentNum||""},e.prototype.wrapSiblings=function(t,e,n){var i=t,o=e;if(o.node.parentElement==i.node.parentElement){var r=this.doc.createElement("span");r.classList.add("polyLingVis-"+n),o.node.parentElement.insertBefore(r,i.node);for(var s=[],a=i.node;a&&(s.push(a),a!=o.node);a=a.nextSibling);s.forEach((function(t){r.insertBefore(t,null)}))}},e.prototype.clearSelection=function(){var t=this;["polyLingVis-highlight","polyLingVis-highlight-rel","polyLingVis-highlight-rel-head"].forEach((function(e){for(var n=t.doc.getElementsByClassName(e),i=n.length-1;i>=0;i--)n.item(i).classList.remove(e)}))},e.prototype.getSelection=function(){var t=this.doc.getElementsByClassName("polyLingVis-highlight");return 0==t.length?null:new p(t[0])},e.prototype.getTreeNode=function(t){var e=t.node.dataset;return e?this.treeNodeMap[e.treeNode]:null},e.prototype.setStyles=function(t,e){var n=t.node.classList;if(n){for(var i=["polyLingVis-highlight","polyLingVis-cloze-tgt"],o=n.length-1;o>=0;o--){var r=n.item(o);0==r.indexOf("polyLingVis-")&&-1==i.indexOf(r)&&n.remove(r)}e.forEach((function(t){n.add("polyLingVis-"+t)}))}},e.prototype.isDetached=function(){return!this.element.isConnected},e.prototype.isBlockElement=function(t){return t.tagName&&-1!=this.blockElements.indexOf(t.tagName.toLowerCase())||t.classList&&t.classList.contains("polyLingVis-wrapper")},e.prototype.getBlockElement=function(t){if(!t)return null;var e=t.node;if(!e)return null;for(var n=3==e.nodeType?e.parentElement:e;n;n=n.parentElement)if(this.isBlockElement(n))return new p(n);return null},e.prototype.validateMarkup=function(t){var e=this;if(this.bagOfBlocks)return!0;var n=t.node,i=n.querySelectorAll(".polyLingVis-known,.polyLingVis-estimated,.polyLingVis-unknown,.polyLingVis-out-of-vocab,.polyLingVis-idiom,.polyLingVis-compound");return i.length>n.textContent.split(" ").length/2||(i.forEach((function(t){var n=e.doc.createTextNode(t.textContent);t.parentElement.insertBefore(n,t),t.parentElement.removeChild(t)})),n.normalize(),!1)},e.prototype.removeMarkup=function(){this.analyzedElements=[],this.unwrapHighlight(this.doc.body);try{this.doc.body.querySelectorAll("video, audio").forEach((function(t){t.pause()}))}catch(t){}},e.prototype.unwrapHighlight=function(t){this.unwrap(t,".polyLingVis-known,.polyLingVis-estimated,.polyLingVis-unknown,.polyLingVis-out-of-vocab,.polyLingVis-idiom,.polyLingVis-compound,.polyLingVis-highlight")},e.prototype.unwrap=function(t,e){var n=this;t.querySelectorAll(e).forEach((function(t){var e=n.doc.createTextNode(t.textContent);t.parentElement.insertBefore(e,t),t.parentElement.removeChild(t)})),t.normalize()},e.prototype.handleTouch=function(){var t=this;this.analyzableOnTap&&this.element.normalize();var e=function(t){for(;t;t=t.parentElement)if(t.classList.contains("poly-box-web")&&t.classList.contains("translateBox"))return!1;return!0},n=function(e){var n=(new Date).getTime();if(!(n-t.lastTouchStart<500)){if(t.clearSelection(),t.lastTouchStart=n,o.g.lastTouch=n,t.lastTouchEl=null,t.lastTouchPt=null,null!=e.clientX)t.lastTouchPt={x:e.clientX,y:e.clientY};else{if(!e.touches||1!=e.touches.length)return;t.lastTouchPt={x:e.touches[0].clientX,y:e.touches[0].clientY}}t.lastTouchEl=t.doc.elementFromPoint(t.lastTouchPt.x,t.lastTouchPt.y)||e.target}},i=function(e){t.lastTouchEl=null,t.lastTouchPt=null},r=function(n){var i,o,r=(new Date).getTime();if(!(r-t.lastTouchEnd<500||r-t.lastTouchStart>700)){t.lastTouchEnd=r;var s,a=["known","estimated","unknown","out-of-vocab"];if(t.lastTouchPt){for(var u=0;u<a.length;u++)if(t.lastTouchEl&&t.lastTouchEl.classList.contains("polyLingVis-"+a[u])){s=t.lastTouchEl;break}}else s=t.lastTouchEl;if(!s){var c=[];for(u=0;u<a.length&&t.lastTouchEl;u++)for(var h=t.lastTouchEl.getElementsByClassName("polyLingVis-"+a[u]),d=0;d<h.length;d++)c.push(h[d]);s=t.findClosest(t.lastTouchPt,c,e,5)}if(s){if(!e(s))return;t.utils.getApp().isReadium&&l.q.onSelect(n)}if(s||!t.analyzableOnTap){if(s&&e(s)){t.makeActive(s),s.classList.add("polyLingVis-highlight");var g=new p(s),f=null,m=[];if((f=t.getHead(g)>0?g:t.findHead(g))&&(m=t.findRelated(f,!0)).length){var y=null===(o=f)||void 0===o?void 0:o.node;null==y||y.classList.add("polyLingVis-highlight-rel"),null==y||y.classList.add("polyLingVis-highlight-rel-head"),m.forEach((function(t){var e,n=null===(e=t)||void 0===e?void 0:e.node;null==n||n.classList.add("polyLingVis-highlight-rel")}))}var v={hideWord:s.classList.contains("polyLingVis-cloze-tgt")};t.onSelect(g,v)}}else{if(!e(t.lastTouchEl))return;if(t.activeElements){for(var b=!1,L=t.lastTouchEl;!b&&L;L=L.parentElement)-1!=t.activeElements.indexOf(L)&&(b=!0);if(!b)return}if(t.separateBlocks)s=null===(i=t.getBlockElement(new p(t.lastTouchEl)))||void 0===i?void 0:i.node;else{h=t.getBlockElements(t.lastTouchEl,e);t.removeAncestors(h),s=t.findClosest(t.lastTouchPt,h,e)}if(!s)return;t.utils.getApp().isReadium&&l.q.onTap(n,t.lastTouchPt);var x=new p(s);if(-1!=x.indexIn(t.analyzedElements))t.makeActive(s);else{var w=t.bagOfBlocks&&t.bagOfBlocks[s.textContent.replace(/\n/g," ").trim()];w?t.getKnowledge((function(e){t.markupElement(x,[w],e.articleData),t.makeActive(s),t.analyzedElements.push(x)})):(t.analyze(x),t.makeActive(s))}}}};this.element.addEventListener("touchstart",n,!1),this.element.addEventListener("mousedown",n,!1),this.element.addEventListener("touchmove",i,!1),this.element.addEventListener("mousemove",i,!1),this.element.addEventListener("touchend",r,!1),this.element.addEventListener("mouseup",r,!1)},e.prototype.getBlockElements=function(t,e){var n=[];if(!t)return n;for(var i,o=this.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,null);i=o.nextNode();)if(i.textContent.trim()){var r=this.getBlockAncestor(i.parentElement);r&&e(r)&&-1==n.indexOf(r)&&n.push(r)}return n},e.prototype.getBlockAncestor=function(t){for(var e=t;e;e=e.parentElement)if(this.isBlockElement(e))return e;return null},e.prototype.removeAncestors=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n)for(var i=n.parentElement;i;i=i.parentElement)for(var o=0;o<t.length;o++)t[o]==i&&(t[o]=null)}for(e=t.length-1;e>=0;e--)!t[e]&&t.splice(e,1)},e.prototype.findClosest=function(t,e,n,i){for(var o=function(t,e){var n=Math.max(t.min.x-e.x,0,e.x-t.max.x),i=Math.max(t.min.y-e.y,0,e.y-t.max.y);return Math.sqrt(n*n+i*i)},r=-1,s=null,a=0;a<e.length;a++){var l=e[a];if(n(l)){var u=l.getBoundingClientRect(),c=o({min:{x:u.left,y:u.top},max:{x:u.right,y:u.bottom}},t);i&&c>i||(c<r||-1==r)&&(r=c,s=l)}}return s},e.prototype.makeActive=function(t){if(this.analyzableOnTap){var e=this.getBlockElement(new p(t));if(e){var n=e.node;if(n)if(!n.classList.contains("polyLingVis-active"))this.toElement(this.getRoot()).querySelectorAll(".polyLingVis-active").forEach((function(t){t.classList.remove("polyLingVis-active")})),n.classList.add("polyLingVis-active"),r.e.currentBlockChanged(n)}}},e.prototype.hideLabels=function(){this.labels.hideLabels()},e.prototype.showLabels=function(t,e,n,i,o){this.labels.showLabels(t,e,n,i,o)},e.prototype.chunk=function(t){this.chunking||(this.chunking=new u.i(this)),this.chunking.chunk(t)},e.prototype.relativeCurrentPage=function(t){var e=parseInt(getComputedStyle(this.doc.body).columnWidth);if(!e)return 0;var n=document.getElementsByClassName("epub-container")[0];if(!n)return 0;var i=n.scrollLeft,o=t.getBoundingClientRect(),r=o.left,s=o.left+o.width;return r+2>=i+e?1:s<=i+2?-1:0},e.prototype.css=function(t,e){var n=t+" { "+e+" }",i=this.styleSheetEl.sheet,o=i.cssRules.length;i.insertRule(n,o)},e.prototype.addStyles=function(){var t=this.analyzableOnTap?".polyLingVis-active ":"";this.css(t+"span.polyLingVis-known","\n      border-bottom-style: solid;\n      border-bottom-width: 4px;\n      border-bottom-color: rgb(195, 238, 187);\n      "),this.css(t+"span.polyLingVis-unknown","\n      border-bottom-style: solid;\n      border-bottom-width: 4px;\n      border-bottom-color: rgb(239, 159, 148);\n      "),this.css(t+"span.polyLingVis-estimated","\n      border-bottom-style: solid;\n      border-bottom-width: 4px;\n      border-bottom-color: #fae684;\n      "),this.css(".polyLingVis-overlay "+t+"span.polyLingVis-known","\n      border-bottom-width: 3px;\n      border-bottom-color: rgba(195, 238, 187, 0.6);\n      "),this.css(".polyLingVis-overlay "+t+"span.polyLingVis-unknown","\n      border-bottom-width: 3px;\n      border-bottom-color: rgba(239, 159, 148, 0.7);\n      "),this.css(".polyLingVis-overlay "+t+"span.polyLingVis-estimated","\n      border-bottom-width: 3px;\n      border-bottom-color: rgba(250, 230, 132, 0.8);\n      "),this.css(".polyLingVis-sepia "+t+"span.polyLingVis-estimated","\n      border-bottom-color: rgb(255, 191, 0);\n      "),this.css(".polyLingVis-sepia "+t+"span.polyLingVis-known","\n      border-bottom-color: rgb(0, 255, 127);\n      "),this.css(t+"span.polyLingVis-idiom","\n      text-decoration:underline;\n      "),this.css("span.polyLingVis-highlight","\n      background-color: var(--mode-cloze-hover);\n      font-size:inherit;\n      font-weight:inherit;\n      color: #fff;\n      "),this.css(".polyLingVis-overlay span.polyLingVis-highlight","\n      background-color: rgba(21, 179, 225, 0.5);\n      color: rgba(255, 255, 225, 0.5);\n      "),this.css("span.polyLingVis-highlight-rel","\n      box-shadow: 0 0 0 2px rgba(56, 126, 245, 0.5);\n      border-radius: 5px;\n      "),this.css("span.polyLingVis-highlight-rel.polyLingVis-highlight-rel-head","\n      box-shadow: 0 0 0 2px rgb(56, 126, 245);\n      "),this.css("span.polyLingVis-highlight-rel-head","\n      box-shadow: 0 0 0 2px rgb(56, 126, 245);\n      "),this.css(".polyLingVis-overlay span.polyLingVis-highlight-rel","\n      background-color: transparent;\n      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.7);\n      "),this.css(".polyLingVis-overlay span.polyLingVis-highlight-rel.polyLingVis-highlight-rel-head","\n      box-shadow: 0 0 0 2px #61d1f0;\n      "),this.css(".polyLingVis-overlay span.polyLingVis-highlight-rel-head","\n      box-shadow: 0 0 0 2px #61d1f0;\n      "),this.css("span.polyLingVis-highlight-rel span.polyLingVis-highlight","\n      border-top-left-radius: 5px;\n      border-top-right-radius: 5px;\n      "),this.css(".polyLingVis-overlay span.polyLingVis-highlight.polyLingVis-highlight-rel.polyLingVis-highlight-rel-head","\n      background-color: rgba(21, 179, 225, 0.5);\n      color: rgba(255, 255, 225, 0.5);\n      "),this.css(t+"span.polyLingVis-1dot::before, "+t+"span.polyLingVis-2dots::before","\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -3px;\n      margin: auto;\n      height: 2px;\n      "),this.css(t+"span.polyLingVis-1dot::before","\n      width: 2px;\n      background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC+SURBVHgBrZXBEYIwEEW/ePGYEuzAFuzAlJAS7AA6gE60BSuADqJHT5Sgu2NwIEOGheybeTlkhjchhw0wjyGv5I305CfYhj2HFViyH0VSekm4FoRiy1Ss3BAbrOOYy4gN2nHQKwT53s0+nM4hnwP5Lmi5QI8zB4/Q47TD7//VKKAMB5/Qo+NgBz1eHHxAjzsvPFkkw0AyLP5YhaCLj9tkxCokqDbEGizgIBsWPaIJIwnzuG8xvXje4+fBzH30BaO3phWx/8YMAAAAAElFTkSuQmCC') center no-repeat;\n      background-size: contain;\n      "),this.css(t+"span.polyLingVis-2dots::before","\n      width: 6px;\n      background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAUCAYAAADRA14pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD6SURBVHgB5ZjBDYJAEEWfVmAJdmALdiAlTAl2IB1oJ9qCFUgHYAWWoDsBEjUaCfyBgy/5HPbw8yZkwy7wmUXKNuWYUqbcm1yaNWNapH5Zyu2p5FtKphlc6rfvUPSeHeMh9dv1KGuzJx6pnw0oa5MRhyH2KwWFvq8WxCD1M0FZmy16DKHfPD026FijR+rnAy/RsULPEh2rGfWrVjJDi9Rvzp/hA1foKNBToaPwgZWSV/RI/XzgMzpO6JH7+ce4y2H8V0piCPHLBIVGHCF+hwFlOfGE+OU9yg6MR06An9HtsO77KvKGNLqfUf8uufC68X3NLwlRN6OuGD38Hty3bkC6Yyw0AAAAAElFTkSuQmCC') center no-repeat;\n      background-size: contain;\n      "),this.css(t+"span.polyLingVis-1dot, "+t+"span.polyLingVis-2dots","\n      position: relative;\n      "),this.css(t+"span.polyLingVis-known.polyLingVis-cloze-tgt,"+t+"span.polyLingVis-unknown.polyLingVis-cloze-tgt,"+t+"span.polyLingVis-estimated.polyLingVis-cloze-tgt","\n      border-bottom-color: var(--mode-cloze-color);\n      border-bottom-width: 1px;\n      "),this.css(".polyLingVis-cloze-tgt","\n      border-style: solid;\n      border-color: var(--mode-cloze-color);\n      border-width: 1px;\n      background-color: var(--mode-cloze-background);\n      color: var(--mode-cloze-background);     \n      "),this.css(".polyLingVis-cloze-tgt.polyLingVis-highlight","\n      color: var(--mode-cloze-hover);\n      "),this.css(".polyLingVis-cloze-tgt.polyLingVis-cloze-hover","\n      background-color: var(--mode-cloze-hover);\n      color: var(--mode-cloze-hover);\n      outline: 1px solid var(-mode-background);\n      "),this.css(":root","\n        --dark-mode-cloze-background: black;      \n        --dark-mode-cloze-color: white;\n        --dark-mode-cloze-hover: #07677e;\n          \n        --light-mode-cloze-background: lightyellow;\n        --light-mode-cloze-color: black;\n        --light-mode-cloze-hover: #15b3e1;\n        \n        --mode-cloze-background: var(--light-mode-cloze-background);\n        --mode-cloze-color: var(--light-mode-cloze-color);\n        --mode-cloze-hover: var(--light-mode-cloze-hover);       \n    "),this.css(".polyLingVis-overlay","\n        --mode-cloze-background: var(--dark-mode-cloze-background);\n        --mode-cloze-color: var(--dark-mode-cloze-color);\n        --mode-cloze-hover: var(--dark-mode-cloze-hover);\n    "),this.css(".polyLingVis-tts .polyLingVis-chunk-active ."+c.A.tokenActiveClass,"\n      color: rgb(50,205,50) !important;\n    "),this.css(".polyLingVis-overlay.polyLingVis-tts .polyLingVis-chunk-active ."+c.A.tokenActiveClass,"\n      color: cyan !important;\n    "),this.css(h.z.polySelectors.map((function(t){return"."+c.A.ttsClass+" ."+u.i.chunkClass+":not(."+c.A.chunkActiveClass+") .polyLingVis-"+t})).join(","),"\n      border-bottom: none;\n    "),this.utils.getApp().isReadium&&l.q.addStyles(this.css.bind(this))},e}(s.B)},58:function(t,e,n){"use strict";n.d(e,{m:function(){return r}});var i=n(312),o=n(838),r=function(){function t(t){this.utils=t}return t.init=function(e,n){if(t.grammarTags[e])n&&n();else{var r={method:"get",headers:{"Content-Type":"application/json"},credentials:"same-origin"},s=i.z.server.main+"lingvis-sdk/assets/grammar-tags-"+e+".json/"+i.z.version+"."+i.z.buildNum;o.fb.utils.getPlatform().fetch(s,r,(function(i){(null==i?void 0:i.lang)==e&&(t.grammarTags[e]=i),n&&n()}))}},t.prototype.getPaths=function(t){if(!t)return[];var e=t.replace(/\//g,"-"),n={},i="",o=[],r=[],s=e.split(","),a=this;return s.forEach((function(t){var s=t.split(" ");e=s[s.length-1];for(var u=[],c=0;c<e.length;c++){var h=""+(c<10?c:String.fromCharCode("a".charCodeAt(0)+c-10));u.push(h+e.substring(c,c+1))}e=u,r.push(function(){for(n={},i="",o=[],r=0;r<e.length;r++){var t=e[r];t&&(n[t]=!0,a.tags[t]&&a.tags[t]["^"]&&(i=a.tags[t]["^"]))}o=[],l(a.tags,"","",null);for(var r=o.length-1;r>=0;r--)for(var s=0;s<o.length;s++)if(r!=s&&0==o[s].path.indexOf(o[r].path)){o.splice(r,1);break}return{paths:o}}())})),function(t){if(t.sort((function(t,e){return t.length>e.length?-1:t.length<e.length?1:0})),t.length<=1||!a.tags.reducible||a.inMorphTest)return t[0];for(var e=0;e<t.length;e++)for(var n=t[e].paths,i=t.length-1;i>e;i--){var o=t[i].paths;c(n,o)&&t.splice(i,1)}}(r),function(t){t.forEach((function(t){for(var e=(t=t.paths).length-1;e>=0;e--){var n=t[e];if(n.delete)u(t,e);else{var i=n.path.lastIndexOf("_");if(-1!=i){var o=n.path.substring(i+1);if("string"==typeof n.parent[o]){var r=(n.parent[o]||"").split("/");if(r.length>1&&!r[0]){u(t,e);continue}}}delete n.parent,delete n.short}}}))}(r),r;function l(t,e,r,s){if("object"!=typeof t){if(!n[e])return;var u=t.split("/")[0],c=t.split("/")[1]||u;if(!(u=u||c))return;return o.push({path:r,title:(i?i+", ":"")+u,short:c,parent:s}),void(i="")}var h=Object.keys(t);a.tags.sorted&&h.sort();for(var p=o.length,d=0;d<h.length;d++){var g=h[d];n[g]&&"_"!=g&&l(t[g],g,r+(r?"_":"")+g,t)}t._&&o.length==p&&(o.push({path:r,title:(i&&!t["^"]?i+", ":"")+t._,parent:s}),i="")}function u(t,e){if(e>0)t.splice(e,1);else{var n=t[0];if(1!=t.length){var i=n.title.split(",")[0];t[1].title=i+", "+t[1].title,t.splice(e,1)}else n.title=n.title.split(",")[0]}}function c(t,e){for(var n=Math.min(t.length,e.length),i=-1,o=-1,r="",s="",a=0;a<n;a++){var l=t[a].path,u=e[a].path;if(l!=u){if(-1!=l.indexOf("/")){if(-1!=i)return!1;i=a}var c=l.indexOf("/");if(-1==c&&(c=l.length),c!=u.length)return!1;if(l.substring(0,c-1)!=u.substring(0,c-1))return!1;var h=l.lastIndexOf("_");if(-1==h)return!1;var p=l.substring(h+1);if(r=u.substring(h+1),-1==p.indexOf(r)){if(-1!=o)return!1;if(-1!=i)return!1;i=a,o=a,s=p+"/"+r}}}if(-1==o)return!0;l=t[o],u=e[o];var d=r.substring(0,r.length-1),g=!1,f=!0;for(var m in l.parent)"string"==typeof m&&m.length>=2&&0==m.indexOf(d)&&(g=!0,-1==s.indexOf(m)&&(f=!1));if(g&&f)return l.delete=!0,!0;l.path=l.path+"/"+r;var y=l.title.split(", "),v=y.length>1?y[0]:"";return l.title=v+(-1!=l.title.indexOf("/")?l.title:l.short||l.title)+"/"+(u.short||u.title),!0}},t.prototype.trimMorph=function(t){return(t||"").split("SENT_END")[0].replace(/\s+$/,"").split(":")[0]},t.prototype.onGrammar=function(e,n,i){var o=this.utils.getCurrentLanguage();if(this.tags=t.grammarTags[o.name],!this.tags)return[];e=this.trimMorph(e);var r=t.processRelations(o.name,e,n,i);r.morph&&(e=r.morph);var s=this.getPaths(e);return r.prefix&&(s.prefix=r.prefix),s},t.processRelations=function(t,e,n,i){var o={};return"de"!=t||n.findRelatedTreeNodes(i,!1).forEach((function(t){"compound-prt"==((t.tags||"").split(":")[2]||"").split("=")[0]&&(o.prefix=t.token||t.lemma||"")})),o},t.getSplitLemma=function(t){return t?(-1!=t.indexOf("+\\")?t.replace("+\\","\\"):t.split("\\")[1]||"")||t:""},t.prototype.getStyles=function(t,e,n,i){},t.grammarTags={},t}()},838:function(t,e,n){"use strict";n.d(e,{Av:function(){return dt},BJ:function(){return B},EI:function(){return rt},G3:function(){return Y},Go:function(){return U},HX:function(){return o},IR:function(){return k},Lc:function(){return mt},MO:function(){return yt},Mc:function(){return lt},ND:function(){return V},Ok:function(){return K},PJ:function(){return vt},Pl:function(){return ct},QZ:function(){return O},Ri:function(){return T},S1:function(){return P},SQ:function(){return q},UC:function(){return nt},WY:function(){return H},Wi:function(){return M},ZY:function(){return C},_s:function(){return $},am:function(){return pt},bf:function(){return et},c8:function(){return gt},cV:function(){return ht},dJ:function(){return E},eN:function(){return ut},ed:function(){return I},fb:function(){return r},fo:function(){return ot},fq:function(){return F},g0:function(){return ft},lV:function(){return J},lZ:function(){return j},lf:function(){return X},m9:function(){return at},nb:function(){return it},og:function(){return N},qP:function(){return tt},sz:function(){return A},um:function(){return Q},v1:function(){return st},v4:function(){return R},v5:function(){return W},x:function(){return Z},xW:function(){return _},xX:function(){return G},xu:function(){return S}});var i,o,r,s,a=n(655),l=n(70),u=n(346),c=n(483),h=n(845),p=n(752),d=n(593),g=n(536),f=n(954),m=n(215),y=n(58),v=n(450),b=n(455),L=n(580),x=n(430),w=n(401),k={storage:{getItem:function(t){return window.localStorage?window.localStorage.getItem("lingVis-sdk-"+t):null},setItem:function(t,e){window.localStorage&&window.localStorage.setItem("lingVis-sdk-"+t,e)},removeItem:function(t){window.localStorage&&window.localStorage.removeItem("lingVis-sdk-"+t)}},noLog:!0,guiLang:"en"},M=new p.g,E=new d.c,I=new g.n,T=new f.V,C=new m.N,N=null,D=window.location,z=-1!=D.hostname.indexOf("sprakkraft.org");function S(){(null==N?void 0:N.isCustom)||(N&&N.remove(),N=new b.w(M,o,C,E),s&&(s.dictPopup=N))}function A(t,e){(t=t||o).poly=window[l.t.polyName]=window[l.t.polyName]||{},M.init(t,E,T,C,e),C.init(E,T),I.init(t,E,M),E.init(M,I,T,t),r=new y.m(E)}function j(t){switch(t){case"ios":o=new u.n;break;case"android":o=new c.l;break;default:o=new h.c}A(o),S()}function _(t,e,n,i,r,s,a,l,p,d){o||(o="ios"==t?new u.n:"android"==t?new c.l:new h.c).init(E),A(o),S(),a?I.signup(e,n,i,"",(function(t){r&&r(t)}),s,l,p,d):I.signin(e,n,i,(function(t){r&&r(t)}),s,l,p,d)}function O(t,e,n,i){(o="ios"==t?new u.n:"android"==t?new c.l:new h.c).init(E),A(o,i),S(),E.storage.setItem("JWTToken",e),I.activate(n)}function P(t,e,n){if((null==s?void 0:s.element)==t)return s;s=new v.P(t,e,T,C,E,r,N,n);var i=E.getCurrentLanguage().name,o=E.getApp(),a=M.getClientVersion();return null==n&&(-1==["fr","en","es","it","de","sv","uk","nb","da","pl"].indexOf(i)||a&&a<589||o.isYTMusic)&&(s.analyzableOnTap=!1,s.separateBlocks=!1),s}function B(t,e){s.analyze(new v.b(t),{},e)}function V(t,e){s.getArticle((function(n,i){if(n.length)return s.markupElement(new v.b(t),n,i);s.analyze(new v.b(t),e)}))}function U(t,e){s.getArticle((function(e,n){e.length&&s.markupElement(new v.b(t),e,n)}))}function W(t,e){s.markupElement(new v.b(t),[e])}function F(t){s.getArticle(t)}function R(t){s.getArticleRaw(t)}function H(t,e,n,i,o,r,s,a,l){E.request(t,e,n,i,o,r,s,a,l)}function Y(){return E.getCurrentLanguage()}function G(t,e,n,i){o.callNative(t,e,n,i)}function Q(){return N}function Z(t){s.setUrl(t)}function J(t,e){return C.getDifficulty(t,e)}function X(t,e,n){C.setDifficulty(t,e,n)}function q(t,e){s.refreshHighlight(t,e)}function K(){return s.getSelectedBlockText()}function $(t){return s.getWordsInContext(t)}function tt(t,e){L.c.sendEvent(t,e)}function et(t,e,n){L.c.sendEventWithInterval(t,e,n)}function nt(){s.hideLabels()}function it(t,e,n,i,o){s.showLabels(t,e,n,i,o)}function ot(){s.removeMarkup()}function rt(t){M.materialId=t}function st(){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,x.e.clozeTest(s,E,C,!1)];case 1:return t.sent(),[2]}}))}))}function at(){x.e.closeClozeTest()}function lt(){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,x.e.clozeTest(s,E,C,!0)];case 1:return t.sent(),[2]}}))}))}function ut(){x.e.closeClozeTest()}function ct(t,e,n){w.A.ttsPlay(s,t,e,n)}function ht(){w.A.ttsPause()}function pt(){return w.A.isPlaying()}function dt(t,e,n){w.A.ttsPlay(s,t,e,n)}function gt(){w.A.ttsPause()}function ft(){return w.A.isPlaying()}function mt(t){(N=t).isCustom=!0}function yt(){s.clearSelection()}function vt(){return s.isAnalyzing()?"true":""}(o=z&&-1!=D.search.indexOf("isAndroid=true")?new c.l:z&&-1!=D.search.indexOf("isIOS=true")?new u.n:(window.lingVisSdk||{}).isAndroid||window.lingVisSdk_isAndroid?new c.l:(window.lingVisSdk||{}).isIOS||window.lingVisSdk_isIOS||(null===(i=window.webkit)||void 0===i?void 0:i.messageHandlers)&&!window.readium?new u.n:new h.c).init(E)},215:function(t,e,n){"use strict";n.d(e,{N:function(){return s}});var i=n(752),o=n(312),r=n(58),s=function(){function t(){this.data={known:{},learn:[],unknown:{},lost:{}},this.changed={};for(var t=0;t<4;t++)this.data.learn[t]={}}return t.prototype.init=function(t,e){this.utils=t,this.medium=e},t.prototype.clear=function(){this.cacheChanges()&&this.doCacheChanges(),this.data={known:{},learn:[],unknown:{},lost:{}},this.changed={};for(var t=0;t<4;t++)this.data.learn[t]={}},t.prototype.merge=function(t){var e=this,n=function(t,n){var i=t.split("|")[0];null==e.changed[i]&&(function(t){delete e.data.known[t],delete e.data.lost[t],delete e.data.unknown[t];for(var n=0;n<e.data.learn.length;n++)e.data.learn[n]&&delete e.data.learn[n][t]}(t=i+"|"),n[t]=!0)};for(var i in(t=t||{}).unknown||{})n(i,this.data.unknown);for(var i in t.known||{})n(i,this.data.known);for(var i in t.lost||{})n(i,this.data.lost);for(var o=0;o<(t.learn||[]).length;o++)if(t.learn[o])for(var i in t.learn[o])n(i,this.data.learn[o])},t.prototype.cacheChanges=function(){return i.g.cacheChanges&&this.utils.getApp().getClientVersion()>=587},t.prototype.doCacheChanges=function(){"{}"!=JSON.stringify(this.changed)&&this.utils.getPlatform().callNative("cacheChanges","changeType=knowledge&changes="+JSON.stringify(this.changed))},t.prototype.setDifficulty=function(t,e,n,i){var r=this;this.changed[t]=n;var s={};switch(s[t+"|"]=!0,n){case 0:this.merge({known:s});break;case 1:case 2:case 3:case 4:var a={learn:[]};a.learn[n-1]=s,this.merge(a);break;case 5:this.merge({unknown:s});break;case 6:this.merge({lost:s})}if(!i)if(this.cacheChanges())this.doCacheChanges(),this.medium.refreshHighlight(t,n);else{var l={langid:this.utils.getCurrentLanguage()._id,word:t+"|",difficulty:""+n};this.utils.request(o.z.command.words.setDifficulty,"post",l,(function(e){r.medium.refreshHighlight(t,n)}),null,!0,!1,!1)}},t.prototype.getDifficulty=function(t,e){var n=this;if("",null!=this.changed[t])return this.changed[t];var i=function(t){if(null!=n.data.known[t])return 0;if(null!=n.data.unknown[t])return 5;if(null!=n.data.lost[t])return 6;for(var e=0;e<n.data.learn.length;e++)if(n.data.learn[e]&&null!=n.data.learn[e][t])return e+1;return-1},o=i((t=r.m.getSplitLemma(t))+"|");return-1!=o||-1!=(o=i(t+"|"))?o:5},t.prototype.changeDifficulty=function(t,e,n){var i=this.getDifficulty(t,"");if(-1!=i){var o=i;4==i&&(i=3),(i-=n)<0?i=0:i>5&&(i=5),i!=o&&this.setDifficulty(t,"",i)}},t.prototype.getStyles=function(t,e){switch(t){case 0:return void e.push("known");case 1:return e.push("estimated"),void e.push("2dots");case 2:return e.push("estimated"),void e.push("1dot");case 3:case 4:return void e.push("estimated");case 5:return void e.push("unknown");case 6:return void e.push("out-of-vocab")}},t}()},190:function(t,e,n){"use strict";n.d(e,{R:function(){return a}});var i=n(655),o=n(312),r=n(58),s=n(450),a=function(){function t(t,e){this.doc=t,this.utils=e,this.nodes=[],this.listeners=[],this.d3=window.lingVisSdk_d3,this.allWords={},this.columnWidth=0,this.activated=!1}return t.prototype.hideLabels=function(){this.activated=!1,this.forceTimer&&(this.forceTimer=null,clearTimeout(this.forceTimer)),this.force&&(this.force.stop(),this.force=null),this.listeners.forEach((function(t){t.elem.removeEventListener(t.type,t.f)})),this.listeners=[],this.container&&(this.container.querySelectorAll("div.polyLingVis-link-line, div.polyLingVis-label").forEach((function(t){t.remove()})),this.container.querySelectorAll(".polyLingVis-label-tgt").forEach((function(t){t.classList.remove("polyLingVis-label-tgt")})))},t.prototype.getMaxLabels=function(t){return(null==t?void 0:t.maxLabels)||(this.utils.isSmallScreen()?4:this.utils.isMediumScreen()?6:10)},t.prototype.translate=function(t,e,n,a){var l,u,c=this,h=[],p=this.utils.getCurrentLanguage(),d=this.getMaxLabels(n),g=[];try{for(var f=(0,i.XA)(t),m=f.next();!m.done;m=f.next()){var y=m.value,v=new s.b(y),b=this.doc.getTreeNode(v);if(b){var L=b.lemma;if(!n.noRel){var x=r.m.processRelations(p.name,b.tags,this.doc,v);x.prefix&&(L=x.prefix+L)}L=L||b.token||y.textContent;var w=b.pos||b.tag||"";if("NP"!=w){var k=L+"|"+w,M=e[k];"-"==M?M="":M||(g.push(k),e[k]="-"),h.push({lemma:L,pos:w,translation:M,span:y})}}}}catch(t){l={error:t}}finally{try{m&&!m.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}if(d>0&&(g=g.slice(0,d)),!g.length)return a(h);var E=this.utils.createUUID(),I={langid:p._id,words:g,toLanguage:p.l1,fromLanguage:p.name,requestId:E};this.utils.request(o.z.command.dictionaries.getWordTranslations,"get",I,(function(t){t.requestId&&t.requestId!=E||(("sv"!=p.name||n.singleTranslation)&&(t.translations||[]).forEach((function(t){t.trans=t.trans.length?[t.trans.shift()]:[]})),t.translations.forEach((function(t,n){var i=g[n],o=h.find((function(t){return t.lemma+"|"+t.pos==i}));if((null==o?void 0:o.span)&&t&&t.orig&&t.trans){var r=c.utils.stringifyTranslations(t.trans);if(!r)return;o.translation=r,e[i]=r}})),a(h))}),(function(t){console.log("getWordTranslations request failed")}),!0,!1,!1)},t.prototype.showLabels=function(t,e,n,i,o){var r=this;this.hideLabels(),this.activated=!0,o=o||{},this.translate(t,this.allWords,o,(function(t){r.activated&&r.showLabelsTranslated(t,e,n,i,o)}))},t.prototype.showLabelsTranslated=function(t,e,n,o,r,s){var a,l;this.hideLabels(),n=n||"above",this.container=o||this.getBody(document.body),r=r||{},this.columnWidth=r.columnWidth||0;var u=r.distance||7,c=r.oneSide||!0,h=this.getMaxLabels(r),p=[];this.force=this.d3.layout.force();var d=-1;this.nodes=[],h>0&&(t=t.slice(0,h));try{for(var g=(0,i.XA)(t),f=g.next();!f.done;f=g.next()){var m=f.value,y=m.span;y.classList.add("polyLingVis-label-tgt");var v=y.getBoundingClientRect();if(0!==v.width||0!==v.height||0!==v.left||0!==v.top){var b=v.left,L=v.top;this.columnWidth&&(b%=this.columnWidth);var x=this.getOffset(this.container);b-=x.left,L-=x.top;var w=(m.translation||"").replace(/ \(.+~.+\)/,"").trim();if(w){d++;var k=y.offsetHeight,M={fixed:!0,anchor:!0,x:b+y.offsetWidth/2,y:L+k/2,width:0,height:0},E={fixed:!1,target:y,x:b,y:L+100+30*d,width:0,height:0,distance:u};this.nodes.push(M),this.nodes.push(E),p.push({target:M,source:E,text:w,oneSide:c})}}}}catch(t){a={error:t}}finally{try{f&&!f.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}this.applyForce(p,n,e,r,s)},t.prototype.getOffset=function(t){var e=t.getBoundingClientRect(),n=getComputedStyle(t);return{left:e.left-parseInt(n.marginLeft)-parseInt(n.paddingLeft)-parseInt(n.borderLeftWidth),top:e.top-parseInt(n.marginTop)-parseInt(n.paddingTop)-parseInt(n.borderTopWidth)}},t.prototype.labelsShift=function(t){this.d3.select(document.body).selectAll("div.polyLingVis-link-line").each((function(e){e.source.y+=t})),this.labelsRedraw(!0)},t.prototype.getOther=function(t){var e=this;return t.classList.contains("polyLingVis-cloze-tgt")||t.classList.contains("polyLingVis-label-tgt")?function(t){for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(i.target&&i.target==t&&n>0)return e.nodes[n-1].source}return null}(t):function(t){for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(i.source&&i.source==t&&n<e.nodes.length-1)return e.nodes[n+1].target}return null}(t)},t.prototype.getLine=function(t){var e;return this.d3.select(this.container).selectAll("div.polyLingVis-link-line").each((function(n){n.source.target==t&&(e=this)})),e},t.prototype.applyForce=function(t,e,n,i,o){var r=this,s=!!n;n=n||{};var a=(this.container?this.getOffset(this.container).top:0)+window.scrollY,l=(n.top1||0)-a,u=(n.bottom2||this.container.scrollHeight)-a,c=n.top2-a||u,h=n.bottom1-a||l;c<l&&(l=c),u<h&&(u=h);var p=this.utils.isSmallScreen()||this.utils.isMediumScreen(),d=i.slack||4;this.d3.select(this.container).selectAll("div.polyLingVis-link-line").data(t).enter().append("div").style("left",(function(t){return t.target.x+"px"})).style("top",(function(t){return t.target.y+"px"})).style("height",(function(t){return"100px"})).classed("polyLingVis-link-line",!0).each((function(t){t.line=this}));var g=0,f=this;this.d3.select(this.container).selectAll("div.polyLingVis-label").data(t).enter().append("div").classed("polyLingVis-label",!0).text((function(t){return t.text})).each((function(t,e){var n=this,i=f.nodes[2*e+1],o=f.nodes[2*e];i.elem=n,n.style.left="0px",n.style.top="0px",i.width=n.offsetWidth+4;var r=n.offsetHeight+4;i.height=r,g+=r,n.style.left=t.source.x+"px",n.style.top=t.source.y+"px",o.source=n}));var m=!1,y=!1,v=g+(p?0:d);"above-only"==e?m=!0:"below-only"==e||u-h>v+d?y=!0:c-l>v+d||"above"==e?m=!0:"below"==e&&(y=!0);var b,L=this.container.offsetWidth,x=h-c;function w(){for(var t=this.d3.geom.quadtree(this.nodes),e=0;e<this.nodes.length;e++)this.nodes[e].fixed||t.visit(M(this.nodes[e]));s&&k(),this.labelsRedraw(!1)}function k(){for(var t=0;t<f.nodes.length;t++){var e=f.nodes[t];if(!e.anchor){var i=e.x,o=e.y,r=i+e.width,s=o+e.height,a=b[0],l=e.fixed?0:b[1],u=b[2],c=b[3];i<a&&(e.x=a),r>u&&(e.x=u-e.width),o<l&&(e.y=l),s>c&&(e.y=c-e.height),n.yExt&&(n.x1Ext<i&&n.x2Ext>i||n.x1Ext<r&&n.x2Ext>r)&&(m&&s>n.yExt?e.y=n.yExt-e.height:y&&o<n.yExt&&(e.y=n.yExt))}}}function M(t){var e=t.x,n=t.x+t.width,i=t.y,o=t.y+t.height;return function(r,s,a,l,u){var c,h=t.distance||0;return r.point&&r.point!==t&&function(t,e){var n=t.distance||0;return t.y<e.y&&e.y<t.y+t.height+n||t.y<e.y+e.height+n&&e.y+e.height<t.y+t.height}(t,r.point)&&(c=Math.min(t.y+t.height+h-r.point.y,r.point.y+r.point.height+h-t.y),r.point.fixed||(c/=2),c=t.y<r.point.y?c:-c,t.y-=c,r.point.fixed||(r.point.y+=c)),s>n||l<e||a>o||u<i}}x=Math.max(Math.min(x,p?d:2*d),d),b=m?[0,l,L,c]:y?[0,h+(h?d:0),L,u]:[0,l,L,u],k(),this.d3.select(this.container).selectAll("div.polyLingVis-label").each((function(t){r.addEventListeners(t,l,u)})),this.force.linkDistance(x).gravity(0).charge(-300).friction(.5).nodes(this.nodes).links(t).on("tick",(function(){return w.call(r)})).on("end",(function(){s||(k(),r.labelsRedraw(!1),o&&o())})).start(),this.forceTimer=setTimeout((function(){r.force&&r.force.stop()}),2e3)},t.prototype.labelsRedraw=function(t){var e=this.container.offsetWidth;this.d3.select(this.container).selectAll("div.polyLingVis-link-line").each((function(n){if(n.source.elem){if(t){var i=n.source.target.getBoundingClientRect();n.target.x=i.left+n.source.target.offsetWidth/2,n.target.y=i.top+n.source.target.offsetHeight()/2}var o=this,r=n.oneSide||n.source.x<e/2?n.source.x:n.source.x+n.source.elem.offsetWidth,s=n.target.y<n.source.y?n.source.y:n.source.y+n.source.elem.offsetHeight,a=Math.sqrt((n.target.x-r)*(n.target.x-r)+(n.target.y-s)*(n.target.y-s)),l=180-57.29577951307855*Math.acos((n.target.y-s)/a);n.target.x<r&&(l=-l);var u="rotate("+l+"deg)";o.style.left=n.target.x+"px",o.style.top=n.target.y+"px",o.style.height=a+"px",o.style.transform=u,o.style["-webkit-transform"]=u,o.setAttribute("height",a)}})),this.d3.select(this.container).selectAll("div.polyLingVis-label").each((function(t){var e=t.source.elem;e&&(e.style.left=t.source.x+"px",e.style.top=t.source.y+"px",this.classList.add(t.target.y<t.source.y?"label-below":"label-above"))}))},t.prototype.getBody=function(t){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return e||t},t.prototype.addEventListeners=function(t,e,n){var i=this,o=t.source.elem;if(o){var r={x1:0,y1:e,x2:this.container.offsetWidth-o.offsetWidth,y2:n-o.offsetHeight},s=function(e){e.cancelable&&e.preventDefault();var n=e.touches&&e.touches[0]||e,s=n.clientX-o.offsetWidth/2+window.scrollX,a=n.clientY-o.offsetHeight/2+window.scrollY;t.source.x=s<=r.x1||s>=r.x2?s>=r.x2?r.x2:r.x1:s,t.source.y=a<=r.y1||a>=r.y2?a>=r.y2?r.y2:r.y1:a,t.source.width=o.offsetWidth,i.labelsRedraw(!1)},a=function(t,e,n){void 0===n&&(n=!1);var r=n?o:document;r.addEventListener(t,e,{capture:!1,passive:!1}),i.listeners.push({elem:r,type:t,f:e})},l=function(){t.source.fixed=!0,a("mousemove",s),a("touchmove",s)},u=function(){document.removeEventListener("mousemove",s),document.removeEventListener("touchmove",s)};a("mousedown",l,!0),a("mouseup",u),a("touchstart",l,!0),a("touchend",u)}},t}()},954:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var i=function(){function t(){this.documents=[]}return t.prototype.addDocument=function(t){for(var e=this.documents.length-1;e>=0;e--){if(t.equals(this.documents[e]))return;this.documents[e].isDetached()&&this.documents.splice(e,1)}this.documents.push(t)},t.prototype.refreshHighlight=function(t,e){this.documents.forEach((function(n){n.refreshHighlight(t,e)}))},t.prototype.removeMarkup=function(){this.documents.forEach((function(t){t.removeMarkup(),t.cleanPermanent()}))},t.prototype.getCurrentBookTitle=function(){return!1},t}()},70:function(t,e,n){"use strict";n.d(e,{t:function(){return i}});var i=function(){function t(){this.isInBrowser=!1,this.poly=window[t.polyName]=window[t.polyName]||{}}return t.prototype.init=function(t){this.utils=t},Object.defineProperty(t.prototype,"isWeb",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAndroid",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noQuery",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getName=function(){return this.isAndroid?"android":this.isWeb?"":"iOS"},t.prototype.callNativeParams=function(e,n,i,o,r){void 0===n&&(n="");var s=n?"&":r?"":"?";return n+=((i=i?"callback=window."+t.polyName+"."+this.callNativeCallback(e,i):"")?s:"")+i,n+=((o=o?"getdata="+this.callNativeCallback(e,o):"")?s:"")+o},t.prototype.callNativeCallback=function(t,e){if(this.poly.Platform_listener||(this.poly.Platform_listener=!0,this.addListener()),"function"==typeof e){var n="callback"+t;if(this.poly[n]){for(var i=0;this.poly[n+i];)i++;n+=i}var o=e,r=this;this.poly[n]=function(){o.apply(r,arguments),delete r.poly[n]},e=n}return"string"==typeof e?e:null},t.prototype.logEvent=function(t,e){t&&(e="eventName="+t+(e?"&"+e:""),this.logEventDo(e))},t.prototype.logEventDo=function(t){},t.prototype.getQuery=function(){return window.location.search},t.prototype.parseQuery=function(){if(this.noQuery)return{};var t=this.getQuery();if("string"!=typeof t)return t;"?"==t.charAt(0)&&(t=t.substring(1));for(var e=t.split("&"),n={},i=0;i<e.length;i++){var o=e[i].split("=");n[o[0]]=decodeURIComponent(o[1]||"")}return n},t.prototype.fetch=function(t,e,n){if(window.lingVisSdk_inExtension){var i=n?this.callNativeCallback("ajax",n):"",o=window.location.protocol+"//"+window.location.hostname+":"+window.location.port;window.postMessage({type:"ajax-request",payload:{url:t,opts:e,callback:i}},o)}else fetch(t,e).then((function(t){return t.json()})).then(n)},t.prototype.addListener=function(){var t=this;window.addEventListener("message",(function(e){e.source==window&&e.data.type&&"ajax-response"==e.data.type&&t.poly[e.data.payload.callback].apply(t,[e.data.payload.data])}),!1)},t.prototype.openDictPopup=function(t,e,n,i,o,r,s,a,l){this.callNative("dictPopup","lemma="+encodeURIComponent(t)+"&word="+encodeURIComponent(e)+"&pos="+(n||"")+"&msg="+encodeURIComponent(i||"")+"&wasAnalyzed=false&knowledge=-1&wordIndex=-1&gotPos="+(r||"")+"&x=-1&y=-1&grade="+(o||0)+"&grammarData="+l+"&definitions="+encodeURIComponent(a||"")+"&difficulty="+s)},t.polyName="lingVisSdk",t}()},483:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var i=n(655),o=function(t){function e(){var e=t.call(this)||this;return e.delegateFetch="file:"!=window.location.protocol,e}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.callNative=function(t,e,n,i){void 0===e&&(e="");var o=window.polyLingVisNative||window.native,r=o[t];r?(e=this.callNativeParams(t,e,n,i,!0),this.utils.consoleLog("poly: callNative: "+t+"("+e+")"),r.call(o,e)):this.utils.consoleLog("poly bridge ERROR: no handler for command="+t)},e.prototype.logEventDo=function(t){this.callNative("logEvent",t,"logEventCallback")},e.prototype.fetch=function(e,n,i){if(this.delegateFetch){var o="command=fetch&params="+encodeURIComponent(JSON.stringify({url:e,opts:n}));this.callNative("ajax",o,(function(t){i(JSON.parse(t))}))}else t.prototype.fetch.call(this,e,n,i)},e}(n(70).t)},346:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var i=n(655),o=function(t){function e(){var e=t.call(this)||this;return e.delegateFetch="file:"!=window.location.protocol,e.isWKWebView=!0,e.iFrameQueue=[],e.logQueue=[],e}return(0,i.ZT)(e,t),e.prototype.initIfNeeded=function(){var t=this;if(!this.iFrame){var e="lingVisSdk-id-iframe-for-ios-1",n="lingVisSdk-id-iframe-for-ios-2";this.iFrame=document.getElementById(e),this.iFrame||(this.iFrame=document.createElement("iframe"),this.iFrame.id=e,this.iFrame.style.display="none",document.body.appendChild(this.iFrame)),this.iFrameLog=document.getElementById(n),this.iFrameLog||(this.iFrameLog=document.createElement("iframe"),this.iFrameLog.id=n,this.iFrameLog.style.display="none",document.body.appendChild(this.iFrameLog)),window.dequeueCallNative=function(){if(t.iFrameQueue.shift(),0!=t.iFrameQueue.length){var e=t.iFrameQueue[0];t.iFrame.setAttribute("src",e)}}}},e.prototype.callNative=function(t,e,n,i){var o;if(void 0===e&&(e=""),this.initIfNeeded(),t){var r="",s=null===(o=window.webkit)||void 0===o?void 0:o.messageHandlers,a=(null==s?void 0:s.polyLingVisNative)||(null==s?void 0:s.native);this.isInBrowser?(r=t+"|"+this.callNativeCallback(t,n)+"|"+(e?"string"==typeof e?e:JSON.stringify(e):""),a.postMessage(r)):this.isWKWebView?(r="command="+t+((e=this.callNativeParams(t,e,n,i,!0))?"&"+e:""),a.postMessage(r)):this.callNativeBase(this.iFrame,t,e,n,i)}},e.prototype.callNativeBase=function(t,e,n,i,o){if(void 0===n&&(n=""),e){var r="poly://"+e;(n=this.callNativeParams(e,n,i,o))&&(r+="?"+n),"logEvent"!=e?(this.iFrameQueue.push(r),1==this.iFrameQueue.length&&t.setAttribute("src",r)):t.setAttribute("src",r)}},e.prototype.logEventDo=function(t){var e=this;this.poly.logEventCallback=function(){e.isLogEventCalling=!1,e.logQueue.shift()()};var n=0==this.logQueue.length;this.logQueue.push((function(){e.isLogEventCalling=!0,e.callNativeBase(e.iFrameLog,"logEvent",t,"logEventCallback")})),n&&!this.isLogEventCalling&&this.logQueue.shift()()},e.prototype.fetch=function(e,n,i){var o=this;if(this.delegateFetch){var r="params="+encodeURIComponent(JSON.stringify({url:e,opts:n}));this.callNative("fetch",r,(function(t){try{i(JSON.parse(t))}catch(t){throw o.utils.consoleLog("Error: "+t+"\n in fetch: "+r),t}}))}else t.prototype.fetch.call(this,e,n,i)},e}(n(70).t)},845:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var i=n(655),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"isWeb",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.callNative=function(t,e,n,i){void 0===e&&(e="")},e.prototype.getLanguageUrl=function(t){var e=(/^.*\//.exec(window.location.pathname)||[])[0]||"/";return window.location.protocol+"//"+window.location.host+e+"i18n/"+t+".js"},e}(n(70).t)},104:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var i=n(838),o=function(){function t(){}return t.callNative=function(t,e){var n;window.lingVisSdk_Readium_isAndroid?window.LingVisSDK[t](e):null===(n=window.webkit)||void 0===n||n.messageHandlers.lingVisSDK.postMessage(t+":"+e)},t.init=function(e,n,o){(0,i.sz)(),t.app=e,t.utils=n,t.user=o;var r=window,s=setInterval((function(){var i=r.lingVisSdk;if(i&&(i.debugReadiumInit=function(){t.init(e,n,o)},!window.lingVisSdk_Readium_isAndroid||window.LingVisSDK)){clearInterval(s),i.polyReadiumSignIn=function(e,n,o,s,a,l,u,c,h,p,d,g,f){p&&t.utils.setClientId(p),g&&(t.user.clientToken=g),f&&(t.user.clientTokenTime=f),t.utils.storage.setItem("lingVisClientData",c);var m=function(n){var o=t.utils.getErrors(n),s=o?"":t.utils.storage.getItem("JWTToken");if(o||s||(o="Error"),t.callNative("token",e+"|"+s+"|"+t.user.clientToken+"|"+t.user.clientTokenTime+"|"+o),l){var u=a+":"+l+":"+r.location.pathname.split("/").slice(2).join("/"),c=i.core.init(document.body,u,!0);c.separateBlocks=!0,c.getArticle()}};if(n&&t.utils.storage.setItem("JWTToken",n),o){var y=function(e){i.polyReadiumRefresh=function(t){e(t)},t.callNative("expired","")};t.user.onExpired=y,i.core.polySignIn("web",o,s,!1,m,null,u,h,d,y)}else i.signInAnonymous(m)},i.polyReadiumSignOut=function(e){i.signOut((function(n){var i=t.utils.getErrors(n),o=i?"":t.utils.storage.getItem("JWTToken");t.callNative("token",e+"|"+o+"|"+t.user.clientToken+"|"+t.user.clientTokenTime+"|"+i)}))},i.polyReadiumForgotPassword=function(t){i.forgotPassword(t)};var a=function(e,n){var o,r=i.getSettings();t.app.getCulture();var s=null===(o=t.app.culture)||void 0===o?void 0:o.userEmail;t.callNative("callback",e+"|"+r.l2+","+r.l1+","+r.level+","+s+"|"+n)};i.polyReadiumGetSettings=function(t){a(t,"")},i.polyReadiumUpdateSettings=function(t,e,n,o){i.updateSettings(e,o,n,(function(e){a(t,e)}))},t.callNative("ready","")}}),50)},t.onSelect=function(e){t.callNative("onSelect",""),e.stopPropagation(),e.preventDefault()},t.onTap=function(t,e){var n=e.x,i=document.body.offsetWidth;n>i/10&&n<9*i/10&&(t.stopPropagation(),t.preventDefault())},t.addStyles=function(t){t(':root[style*="readium-night-on"] span.polyLingVis-known',"\n      border-bottom-color: rgba(0, 255, 0, 0.6) !important;\n      "),t(':root[style*="readium-night-on"] span.polyLingVis-unknown',"\n      border-bottom-color: rgba(255, 0, 0, 0.6) !important;\n      "),t(':root[style*="readium-night-on"] span.polyLingVis-estimated',"\n      border-bottom-color: rgba(255, 255, 0, 0.6) !important;\n      "),t(':root[style*="readium-night-on"] span.polyLingVis-highlight',"\n      background-color: rgba(21, 177, 224, 0.6) !important;\n      "),t(':root[style*="readium-night-on"] div.translateBox',"\n      background-color: rgb(37, 37, 37) !important;\n      "),t(':root[style*="readium-night-on"] div.poly-box-header.green',"\n      background-color: rgba(0, 255, 0, 0.2) !important;\n      "),t(':root[style*="readium-night-on"] div.poly-box-header.red',"\n      background-color: rgba(255, 0, 0, 0.2) !important;\n      "),t(':root[style*="readium-night-on"] div.poly-box-header.yellow',"\n      background-color: rgba(255, 255, 0, 0.2) !important;\n      "),t(':root[style*="readium-sepia-on"] div.translateBox',"\n      background-color: rgb(250, 244, 232) !important;\n      "),t(':root[style*="readium-sepia-on"] div.poly-box-header.green',"\n      background-color: #c3eebb !important;\n      "),t(':root[style*="readium-sepia-on"] div.poly-box-header.red',"\n      background-color: #ef9f94 !important;\n      "),t(':root[style*="readium-sepia-on"] div.poly-box-header.yellow',"\n      background-color: #fae684 !important;\n      "),t(':root[style*="readium-sepia-on"] span.polyLingVis-highlight',"\n      background-color: #15b3e1 !important;\n      color: #fff !important;\n      ")},t}()},401:function(t,e,n){"use strict";n.d(e,{A:function(){return c},F:function(){return p}});var i=n(655),o=n(312),r=n(752),s=n(155),a=n(450),l=n(738),u=n(742),c=function(){function t(e,n){if(this.document=e,this.lookAhead=3,this.blocks=[],this.speechBlocks=[],this.analyzingBlocks=[],this.paused=!0,this.currUtterances=[],this.options={},this.useLabels=!1,this.maxLabels=!1,this.log=!1,t.currentInstance)throw new Error("already-in-progress");switch(t.currentInstance=this,this.utils=this.document.getUtils(),n||(n=r.g.isWeb?"web":"native"),n){case"web":this.engine=new p(this.document);break;case"native":this.engine=new d(this.document);break;case"google":this.engine=new g(this.document);break;default:throw new Error("engine-not-supported")}this.doc=e.getDocument()}return t.ttsPlay=function(e,n,i,o){var r=new t(e,i);t.onEnd=n,r.play(o)},t.ttsPause=function(){t.currentInstance&&t.currentInstance.pause()},t.isPlaying=function(){return!!t.currentInstance},t.prototype.play=function(e){var n=this.doc.querySelector(".polyLingVis-active");if(!n)throw new Error("no-active-element");this.paused=!1,this.options=e||{};var i=!!this.engine.getCapabilities().mark;null==this.options.mark&&(this.options.mark=!1),null==this.options.pauses&&(this.options.pauses=i);var o=new s.g(this.document,n);this.blocks=[],this.speechBlocks=[],this.useLabels=null==(null==e?void 0:e.useLabels)||!!(null==e?void 0:e.useLabels),this.maxLabels=(null==e?void 0:e.maxLabels)||15,this.doc.body.classList.add(t.ttsClass),this.engine.setOptions(this.options),this.toBlock(o)},t.prototype.pause=function(){var e,n;if(t.currentInstance){t.onEnd&&t.onEnd(),this.paused=!0,this.engine.cancel(),this.document.hideLabels();try{for(var o=(0,i.XA)(Array.prototype.slice.call(this.doc.querySelectorAll("."+t.chunkActiveClass+",."+t.tokenActiveClass))),r=o.next();!r.done;r=o.next()){var s=r.value;s.classList.remove(t.chunkActiveClass),s.classList.remove(t.tokenActiveClass)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.doc.body.classList.remove(t.ttsClass),t.currentInstance=null}},t.prototype.speak=function(){if(this.paused)return!1;var t=this.speechBlocks[0];return!(t&&!t.spoken)||(t.spoken=!0,!!this.utter(0)||(this.pause(),!1))},t.prototype.utter=function(e){var n,i=this,o=this.currUtterances[e];o.classList.add(t.chunkActiveClass),this.showLabels(o);var r=function(){i.useLabels&&i.document.hideLabels(),o.classList.remove(t.chunkActiveClass),e!=i.currUtterances.length-1?setTimeout((function(){return i.utter(e+1)}),0):i.toNextBlock()},s=this.speechBlocks[0],a=null===(n=null==s?void 0:s.synthesized)||void 0===n?void 0:n[e];return a?this.engine.speak(a,o,r):(r(),!0)},t.prototype.showLabels=function(t){var e=this;if(this.useLabels&&!this.paused){var n=t.querySelectorAll(".polyLingVis-unknown,.polyLingVis-estimated"),i=parseInt(getComputedStyle(this.doc.body).columnWidth);i&&(n=Array.prototype.slice.call(n).filter((function(t){return 0==e.document.relativeCurrentPage(t)}))),this.document.showLabels(n,null,"below",null,{maxLabels:this.maxLabels,columnWidth:i})}},t.prototype.toBlock=function(t){for(var e,n=0,i=0;i<this.lookAhead;i++)if(t.element==(null===(e=this.blocks[i])||void 0===e?void 0:e.element)){for(;i+n<this.lookAhead&&this.blocks[i+n];n++)this.blocks[n]=this.blocks[i+n],this.speechBlocks[n]=this.speechBlocks[i+n];break}for(0==n&&(this.blocks[0]=t,this.speechBlocks[0]={synthesized:null},n=1);n<this.lookAhead&&(t=this.blocks[n-1]);n++){var o=t.nextBlockElement(!0);if(!o)break;this.blocks[n]=new s.g(this.document,o),this.speechBlocks[n]={synthesized:null}}for(;n<this.lookAhead;n++)this.blocks[n]=null,this.speechBlocks[n]=null;if(!this.blocks[0])return this.pause();this.processBlocks()},t.prototype.toNextBlock=function(){if(!this.blocks[0])return this.pause();var t=this.blocks[0].nextBlockElement(!0);if(!t)return this.pause();this.toBlock(new s.g(this.document,t))},t.prototype.isReady=function(t){var e=this.blocks[t];return!!e&&-1!=new a.b(e.element).indexIn(this.document.analyzedElements)},t.prototype.processBlocks=function(){var t=this;this.log&&console.log("processBlocks 0"),this.isReady(0)&&(this.log&&console.log("processBlocks 1"),this.prepare(0));for(var e=function(e){var i=n.blocks[e];if(!i)return"break";var o=new a.b(i.element);if(n.isReady(e))return n.log&&console.log("processBlocks 2"),n.prepare(e),"continue";-1==n.analyzingBlocks.indexOf(i)&&(n.analyzingBlocks.push(i),n.document.analyze(o,null,(function(n){var o=t.analyzingBlocks.indexOf(i);-1!=o&&t.analyzingBlocks.splice(o,1),t.log&&console.log("processBlocks 3"),t.prepare(e)})))},n=this,i=0;i<this.lookAhead;i++){if("break"===e(i))break}},t.prototype.prepare=function(t){var e,n,o=this,r=this.blocks[t],s=this.speechBlocks[t];if(!r||!s)return this.pause();this.log&&console.log("prepare 0: i:"+t+" "+r.element.textContent),this.log&&console.log("speechBlock: synthesized: "+!!s.synthesized+" sent: "+!!s.sent+" spoken: "+!!s.spoken+" "),this.document.chunk(r);var a=r.element;0==t&&this.document.makeActive(a);var u=Array.prototype.slice.call(a.querySelectorAll("."+l.i.chunkClass));if(u.length||u.push(a),0==t&&null!=s.synthesized)return this.log&&console.log("prepare 1"),this.currUtterances=u,void this.speak();if(!s.sent){var c=[],h=!!this.engine.getCapabilities().mark;try{for(var p=(0,i.XA)(u),d=p.next();!d.done;d=p.next()){var g=d.value;c.push(this.utils.getVisibleTextContent(this.doc,g,this.options.mark,this.options.pauses,h))}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}s.sent=!0,this.log&&console.log("prepare 2: "+JSON.stringify(c)),this.engine.synthesize(c,(function(e){o.log&&console.log("prepare 3: "+JSON.stringify(c)),s.synthesized=e,0==t&&(o.currUtterances=u,o.speak())}))}},t.ttsClass="polyLingVis-tts",t.chunkActiveClass="polyLingVis-chunk-active",t.tokenActiveClass="polyLingVis-token-active",t}(),h=function(){function t(t,e){void 0===e&&(e={}),this.document=t,this.options=e,this.activeElements=[],this.utils=this.document.getUtils(),this.doc=this.document.getDocument(),e=this.fillDefaultOptions(e)}return t.getLangCode=function(t){switch(t.getCurrentLanguage().name){case"sv":return"sv-SE";case"de":return"de-DE";case"fr":return"fr-FR";case"it":return"it-IT";case"fi":return"fi-FI";case"es":return"es-MX";case"pt":return"pt-BR";case"en":return"en-US";case"pl":return"pl-PL"}},t.prototype.setOptions=function(t){this.options=this.fillDefaultOptions(t)},t.prototype.fillDefaultOptions=function(e){return e.langCode=e.langCode||t.getLangCode(this.utils),e.gender=e.gender||"FEMALE",e.rate=e.rate||.8,e},t.prototype.activate=function(){var t=this,e=window.lingVisSdk.core;e.onOpenDict=function(){t.suspend()},e.onCloseDict=function(){t.resume()}},t.prototype.deactivate=function(){var t=window.lingVisSdk.core;t.onOpenDict=null,t.onCloseDict=null},t.prototype.nextPage=function(){var t,e,n;null===(n=null===(e=null===(t=window.poly)||void 0===t?void 0:t.pageHome)||void 0===e?void 0:e.swipe)||void 0===n||n.call(e,!0)},t.prototype.getCapabilities=function(){return{}},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.speakUtterance=function(t,n,i){var o=window.speechSynthesis,r=window.SpeechSynthesisUtterance;if(!o||!r)return!1;var s=new r;return s.voice=e.getVoice(n),s.lang=h.getLangCode(n),s.text=t.replace(/<.*?>/g,"").trim(),s.pitch=1,s.rate=1,s.volume=1,i&&(s.onend=s.onerror=i),o.speak(s),!0},e.getVoice=function(t){if(window.speechSynthesis)for(var e=window.speechSynthesis.getVoices(),n=h.getLangCode(t),i=0;i<e.length;i++){if(e[i].lang.replace("_","-")==n)return e[i]}},e.prototype.synthesize=function(t,e){e(t.map((function(t){return{audioContent:t,timepoints:[]}})))},e.prototype.speak=function(t,n,i){return 1==this.document.relativeCurrentPage(n)&&this.nextPage(),this.activate(),e.speakUtterance(t.audioContent,this.utils,i)},e.prototype.suspend=function(){window.speechSynthesis&&window.speechSynthesis.pause()},e.prototype.resume=function(){window.speechSynthesis&&window.speechSynthesis.resume()},e.prototype.cancel=function(){window.speechSynthesis&&(this.deactivate(),window.speechSynthesis.cancel())},e}(h),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.synthesize=function(t,e){e(t.map((function(t){return{audioContent:t,timepoints:[]}})))},e.prototype.speak=function(t,e,n){var i=this.utils.getCurrentLanguage().name,o=t.audioContent;return 1==this.document.relativeCurrentPage(e)&&this.nextPage(),this.activate(),this.utils.getPlatform().callNative("speakUtterance","lang="+i+"&text="+encodeURIComponent(o),n),!0},e.prototype.suspend=function(){this.utils.getPlatform().callNative("suspendSpeech","")},e.prototype.resume=function(){this.utils.getPlatform().callNative("resumeSpeech","")},e.prototype.cancel=function(){this.deactivate(),this.utils.getPlatform().callNative("cancelSpeech","")},e}(h),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.fillDefaultOptions=function(e){var n=(e=t.prototype.fillDefaultOptions.call(this,e)).mark||e.pauses;if("es-MX"===e.langCode)e.langCode="es-US";switch(this.utils.getCurrentLanguage().name){case"sv":e.voice=e.voice||"sv-SE-Wavenet-B";break;case"de":e.voice=e.voice||(n?"de-DE-Wavenet-A":"de-DE-Neural2-F");break;case"fr":e.voice=e.voice||(n?"fr-FR-Wavenet-A":"fr-FR-Neural2-C");break;case"it":e.voice=e.voice||(n?"it-IT-Wavenet-A":"it-IT-Neural2-F");break;case"fi":e.voice=e.voice||"fi-FI-Wavenet-A";break;case"es":e.voice=e.voice||(n?"es-US-Wavenet-A":"es-US-Neural2-A");break;case"pt":e.voice=e.voice||(n?"pt-BR-Wavenet-A":"pt-BR-Neural2-A");break;case"en":e.voice=e.voice||(n?"en-US-Wavenet-A":"en-US-Neural2-G");break;case"pl":e.voice=e.voice||"pl-PL-Wavenet-E";break;case"uk":e.voice=e.voice||"uk-UA-Wavenet-A"}return e},e.prototype.synthesize=function(t,e){for(var n,r,s,a,l=!1,u=0;u<t.length;u++){var c=t[u].trim();this.utils.endsWithApostrophe(c)&&(t[u]=c=c.substring(0,c.length-1)),c.match(/\d/m)&&(l=!0);for(var p=!1,d=0;!p&&d<c.length;d++){var g=c[d];g.toUpperCase()!=g.toLowerCase()&&(p=!0,l=!0)}p||(t[u]="")}l&&(t[t.length-1]+='<break time="2s"/>');var f=4e3,m=[],y=0,v=[];try{for(var b=(0,i.XA)(t),L=b.next();!L.done;L=b.next()){(c=L.value).length>=f&&(c=c.substring(0,f)),(y+=c.length)>=f&&(m.push({lines:v}),v=[],y=0),v.push(c)}}catch(t){n={error:t}}finally{try{L&&!L.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}v.length>0&&m.push({lines:v}),l||e([{audioContent:"",timepoints:[]}]);var x={langCode:h.getLangCode(this.utils),voice:this.options.voice,gender:this.options.gender,rate:this.options.rate,mark:this.options.mark||this.options.pauses,lines:t},w=function(t){x.lines=t.lines,k.utils.request(o.z.command.audio.getSynthesized,"get",x,(function(n){var o,r;t.result=n.synthesized,t.done=!0;var s=[];if(!m.find((function(t){return!t.done}))){try{for(var a=(o=void 0,(0,i.XA)(m)),l=a.next();!l.done;l=a.next()){var u=l.value;s=s.concat(u.result)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}e(s)}}))},k=this;try{for(var M=(0,i.XA)(m),E=M.next();!E.done;E=M.next()){w(E.value)}}catch(t){s={error:t}}finally{try{E&&!E.done&&(a=M.return)&&a.call(M)}finally{if(s)throw s.error}}},e.prototype.speak=function(t,e,n){var o=this;this.activate();var r=null==t?void 0:t.audioContent;if(!r)return n(),!0;if(!this.audioContext){var s=window.AudioContext||window.webkitAudioContext;if(!s)return!1;this.audioContext=new s,this.audioContext.resume()}var a=(0,u.b$)(r).buffer;return this.audioContext.decodeAudioData(a,(function(r){var s,a=o.audioContext.createBufferSource();a.buffer=r,a.connect(o.audioContext.destination),a.start();var l=1e3*o.audioContext.currentTime,u=!1;if(1==o.document.relativeCurrentPage(e)&&(u=!0,o.nextPage()),null===(s=t.timepoints)||void 0===s?void 0:s.length){var h=function(t){t.classList.add(c.tokenActiveClass);var e=o.document.getLabels(),n=e.getOther(t);n&&(o.activeElements.push(n),n.classList.add(c.tokenActiveClass));var i=e.getLine(t);i&&(o.activeElements.push(i),i.classList.add(c.tokenActiveClass))},p=e.querySelectorAll(o.utils.getKnowledgeSelector()),d=0,g=t.timepoints.map((function(t){return{timeSeconds:1e3*t.timeSeconds,markName:""+d++}}));o.timer=setInterval((function(){var t,n;d=0;for(var r=1e3*o.audioContext.currentTime-l,s=d;s<g.length&&r>g[s].timeSeconds;s++,d++);o.clearHighlight(e);var a=null;if(o.options.mark){if(d>=0&&d<p.length){var c=p[d];h(c),a=c}}else if(o.options.pauses){var f=0;try{for(var m=(0,i.XA)(Array.from(p)),y=m.next();!y.done;y=m.next()){if((c=y.value).getAttribute("polyLingVis-pause")&&!o.utils.endsWithApostrophe(c.textContent)&&f++,f==d)a||(a=c),h(c);else if(f>d)break}}catch(e){t={error:e}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}}1!=o.document.relativeCurrentPage(a)||u||(o.document.hideLabels(),o.nextPage())}),100)}a.onended=function(){o.timer&&(clearInterval(o.timer),o.clearHighlight(e)),n()}})),!0},e.prototype.suspend=function(){var t;null===(t=this.audioContext)||void 0===t||t.suspend()},e.prototype.resume=function(){var t;null===(t=this.audioContext)||void 0===t||t.resume()},e.prototype.clearHighlight=function(t){this.activeElements.forEach((function(t){t.classList.remove(c.tokenActiveClass)})),this.activeElements=[],t.querySelectorAll("."+c.tokenActiveClass).forEach((function(t){t.classList.remove(c.tokenActiveClass)}))},e.prototype.cancel=function(){this.deactivate(),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.timer&&clearInterval(this.timer),this.clearHighlight(this.doc.body)},e.prototype.getCapabilities=function(){return{mark:!0}},e}(h)},536:function(t,e,n){"use strict";n.d(e,{n:function(){return a}});var i=n(752),o=n(312),r=n(58),s=n(838),a=function(){function t(){this.clientToken="",this.clientTokenTime=0}return t.prototype.init=function(t,e,n){this.platform=t,this.utils=e,this.app=n,this.storage=this.utils.storage},t.prototype.activate=function(t,e,n,i,r,s,a){var l=this;void 0===n&&(n=!0),void 0===i&&(i=!0);var u=this.storage.getItem("cultureData");if(!u){var c={decimalSeparator:".",thousandSeparator:",",guiLang:this.platform.poly.guiLangInit||"en"};this.storage.setItem("cultureData",JSON.stringify(c))}this.app.getCulture(),u=this.app.culture;var h=this.getInfoData();if(s&&(h.clientKey=s),this.autogenerated=r,this.platform.isWeb&&window.location.search){var p=this.platform.parseQuery().token;if(p&&"error"!=p){var d={title:document.title,url:window.location.href.substring(0,window.location.href.indexOf("?"))};history.replaceState?history.replaceState(d,d.title,d.url):location.replace(d.url),this.storage.setItem("JWTToken",p)}}this.utils.request(o.z.command.auth.userInfo,"get",h,(function(r){l.utils.consoleLog(JSON.stringify(r)),r.clientInfo&&l.app.setClientInfo(r.clientInfo),r.clientToken&&(l.clientToken=r.clientToken,l.clientTokenTime=(new Date).getTime(),l.onExpired=a),l.storage.setItem("enableEvents",JSON.stringify(r.enableEvents||{})),r&&r.success&&r.token&&l.storage.setItem("JWTToken",r.token);var s=l.storage.getItem("lastPulse"),c=s?new Date(s):null,h=new Date;c&&c.getDate()==h.getDate()&&c.getMonth()==h.getMonth()&&c.getFullYear()==h.getFullYear()||(l.storage.setItem("lastPulse",new Date),u.appName&&l.utils.request(o.z.command.users.user,"put",{settings:{app:{name:l.app.getName(),version:u.appVersion}}})),r&&r.success?l.signInResult(r,t,e):l.signinDevice((function(r){l.utils.request(o.z.command.auth.userInfo,"get",l.getInfoData(),(function(n){l.signInResult(n,t,e)}),null,!0,n,i)}))}),null,!0,n,i)},t.prototype.getInfoData=function(){var t=this.app.culture,e={appName:t.appName||"",appVersion:t.appVersion||"",guiLang:t.guiLang||""};return this.app.isSprakkraft?e.langName="sv":this.platform.poly.isHbo?e.langName="hbo":e.langName=this.utils.getCurrentLanguage().name||"",e},t.prototype.signinDevice=function(t){var e=this;this.uuid=this.storage.getItem("uuid"),this.uuid||(this.uuid=this.utils.createUUID(),this.utils.consoleLog("Generate new UUID: "+this.uuid),this.storage.setItem("uuid",this.uuid)),this.user=this.user||{},this.utils.request(o.z.command.auth.signupDevice,"post",{deviceid:this.uuid},(function(n){n.success?(e.user.anonymous=!0,n.token&&e.storage.setItem("JWTToken",n.token),t&&t(n)):e.utils.request(o.z.command.auth.signinDevice,"post",{deviceid:e.uuid},(function(n){e.utils.handleErrors(n)&&(e.user.anonymous=!0,n.token&&e.storage.setItem("JWTToken",n.token)),t&&t(n)}))}),(function(e){t&&t({success:!0,errors:[]})}),!1,!1,!0)},t.prototype.ensureUserInfo=function(){if(!this.user||!this.user.id){var t=this.storage.getItem("userInfo");if(!t)return;var e=JSON.parse(t);this.setUserInfoFromStorage(e)}this.app.getCulture()},t.prototype.getCurrentLanguage=function(){this.ensureUserInfo();var t={_id:"",name:"",l1:"",level:2},e=t;if(this.user.languages&&this.user.languages.length>0){var n=Math.min(this.user.activeLangIndex||0,this.user.languages.length-1);e=this.user.languages[n]}var i=this.app.getSingleLanguage();if(i&&e.name!=i&&this.user.languages){for(var o=0;o<this.user.languages.length;o++)if(this.user.languages[o].name==i)return e=this.user.languages[o],this.user.activeLang=e._id,this.refreshActiveLangIndex(),e;return t}return e},t.prototype.signInResult=function(t,e,n){var s=this;if(this.utils.handleErrors(t)){this.app.getKnowledge().clear(),this.app.removeMarkup(),t.clientInfo&&this.app.setClientInfo(t.clientInfo);var a=function(){if(!s.setUserInfo(t))return e&&e(t);var a=s.getCurrentLanguage();s.getClientSettings(a.name),s.storage.setItem("currentLanguage",JSON.stringify(a)),a.name&&s.onSetCurrentLanguage(a.name),s.setCultureData("","","","","","","",s.user.id||"",s.user.email||"");var l=function(){var n=s.getCurrentLanguage();if(n.name){var a=!!s.storage.getItem("additional-settings-werfrtg2");if(s.platform.callNative("signedIn","userId="+(s.user.id||"")+(a?"&logRedirect=true":"")),i.g.useAws&&n.name&&n._id){var l={lang:n.name,langid:n._id,text:"A",nlpPort:"aws",skipDB:"true"};s.utils.request(o.z.command.articles.getTextData,"get",l)}r.m.init(n.name,(function(){if(!s.platform.poly.signedIn)return e&&e(t);s.platform.poly.signedIn((function(){e&&e(t)}))}))}};n&&n!=a.name?s.updateSettings(n,a.level||2,a.l1||"en",(function(){l()}),0):l()},l=t.user.languages||[],u=this.app.getSupportedL2().map((function(t){return o.z.languageInfo(t)})),c=function(){var e=s.app.getSingleLanguage();e||(e=s.app.getSupportedL2()[0]);var n=s.app.getSupportedL1(e)[0];s.addLanguage(e,2,n,(function(e){e.success&&(delete e.language.user,l.push(e.language),t.user.activeLang=e.language._id,a())}))};if(l.length){for(var h=function(t){var e=!1;return u.forEach((function(n){n.value==t.name&&(e=!0)})),e},p=!1,d=0;d<l.length;d++)if(t.user.activeLang==l[d]._id){p=h(l[d]);break}if(!p){for(var g=JSON.parse(this.storage.getItem("currentLanguage")||"{}"),f=0;f<l.length;f++)if(l[f].name==g.name&&h(g))return t.user.activeLang=l[f]._id,a();for(f=0;f<l.length;f++)if(h(l[f]))return t.user.activeLang=l[f]._id,a();return void c()}}else c();a()}},t.prototype.getClientSettings=function(t,e){var n=this,i={lang:t};this.utils.request(o.z.command.categories.list,"get",i,(function(t){t&&t.success&&t.clientSettings&&n.storage.setItem("clientSettings",t.clientSettings),e&&e(t)}),(function(t){e&&e({success:!1,errors:[t]})}),!1,!1,!1)},t.prototype.setCultureData=function(t,e,n,i,o,r,s,a,l,u,c){var h=JSON.parse(this.storage.getItem("cultureData")||"{}");h.decimalSeparator=t||h.decimalSeparator,h.thousandSeparator=e||h.thousandSeparator,h.guiLang=n||h.guiLang||this.platform.poly.guiLangInit||"en",h.deviceName=h.deviceName||i,h.appName=o||h.appName,h.appVersion=r||h.appVersion,h.osVersion=s||h.osVersion,h.userId=a||h.userId,h.userEmail=l||h.userEmail,h.textDir=u||h.textDir,h.isNewDesign=!0,h.fontSizeClass=c||h.fontSizeClass||"",this.storage.setItem("cultureData",JSON.stringify(h))},t.prototype.setUserInfo=function(t){if(delete t.password,t.user.languages){var e=!1;if(t.user.languages.forEach((function(t){0==t.level&&"sv"==t.name&&(e=!0)})),e){return this.utils.handleErrors({success:!1,errors:["Mentor account cannot be used"]}),!1}}return this.storage.setItem("userInfo",JSON.stringify(t)),this.setUserInfoFromStorage(t),this.storage.setItem("enableEvents",JSON.stringify(t.enableEvents||{})),!0},t.prototype.setUserInfoFromStorage=function(t){this.user={},this.user.id=t.user._id,this.user.email=t.user.email,this.setCultureData("","","","","","","",this.user.id,this.user.email),this.user.username=t.user.username,this.user.isActive=t.user.isActive,this.user.authenticated=!t.user.roles.device,this.user.languages=t.user.languages,this.user.activeLang=t.user.activeLang,!this.user.activeLang&&this.user.languages&&this.user.languages.length>0&&(this.user.activeLang=this.user.languages[this.storage.getItem("langIndex")||0]),this.refreshActiveLangIndex(),this.user.settings={},this.user.settings.highlights=t.user.highlights,this.user.settings.opened=t.user.opened,this.storage.setItem("settings",JSON.stringify(this.user.settings));var e=t.user.roles&&t.user.roles.account;this.anonymous=!e,this.user.displayname=e&&e.name&&e.name.full||"Unregistered"},t.prototype.refreshActiveLangIndex=function(){for(var t=0;t<this.user.languages.length;t++)if(this.user.activeLang==this.user.languages[t]._id){this.user.activeLangIndex=t,"hbo"==this.user.languages[t].name&&(this.platform.poly.isHbo=!0);break}},t.prototype.onSetCurrentLanguage=function(t){this.currLang&&t==this.currLang||((0,s.xu)(),this.currLang=t)},t.prototype.addLanguage=function(t,e,n,i){var r=this;this.utils.request(o.z.command.lang.languages,"post",{name:t,level:e,l1:n,initKnown:"true"},(function(t){if(r.utils.handleErrors(t),r.user=r.user||{},t.success){r.user.languages=r.user.languages||[];var e=!1;r.user.languages.forEach((function(n){n._id==t.language._id&&(e=!0)})),!e&&r.user.languages.push(t.language),r.user.activeLang=t.language._id,r.refreshActiveLangIndex()}i&&i(t)}),(function(t){i&&i({success:!1,errors:[t]})}))},t.prototype.updateLanguage=function(t,e,n,i,r){var s=this,a=function(e){if(e.success)for(var n=0;n<s.user.languages.length;n++)if(s.user.languages[n]._id==t){s.user.languages[n]=e.language;break}r&&r(e)};this.utils.request(o.z.command.lang.languages,"put",{id:t,level:e,levelMode:i,l1:n},(function(l){if(s.utils.handleErrors(l),!l.success)return a(l);s.utils.request(o.z.command.lang.languages,"put",{id:t,level:e,levelMode:i,l1:n},(function(t){s.utils.handleErrors(t),a(t)}),(function(t){r&&r({success:!1,errors:[t]})}),!0,!1,!1)}),(function(t){r&&r({success:!1,errors:[t]})}),!0,!1,!0)},t.prototype.updateProfile=function(t,e,n,i){var r=this,s=function(t){i&&"function"==typeof i&&i&&i(t)};n&&"string"==typeof n&&(n=JSON.parse(n)),this.utils.request(o.z.command.users.user,"put",{email:t,displayName:e,settings:n},(function(t){if(r.utils.handleErrors(t),!t.success)return s(t);r.utils.request(o.z.command.auth.userInfo,"get",r.getInfoData(),(function(t){r.utils.handleErrors(t)&&r.setUserInfo(t),s(t)}),(function(t){i&&i({success:!1,errors:[t]})}))}))},t.prototype.getSettings=function(){var t,e,n=(null===(t=this.utils)||void 0===t?void 0:t.getCurrentLanguage())||{};return{email:null===(e=this.user)||void 0===e?void 0:e.email,l2:n.name,l1:n.l1,level:n.level}},t.prototype.updateSettings=function(t,e,n,i,o,s){var a=this;if(void 0===o&&(o=1),void 0===s&&(s=!0),this.user){for(var l=this.user.activeLang,u=function(){var t=a.getCurrentLanguage();a.getClientSettings(t.name,(function(e){(e=e||{}).language=t;var n={_id:t._id,name:t.name,l1:t.l1,level:t.level};a.storage.setItem("currentLanguage",JSON.stringify(n)),a.onSetCurrentLanguage(t.name),r.m.init(t.name,(function(){i&&i(e)}))}))},c=0,h=function(){l==a.user.activeLang?u():a.updateProfile(null,null,{activeLang:a.user.languages[c]._id},u)};this.user.languages&&c<this.user.languages.length;c++)if(this.user.languages[c].name==t)return this.user.activeLang=this.user.languages[c]._id,this.refreshActiveLangIndex(),s&&(e=this.user.languages[c].level),void(this.user.languages[c].level!=e||this.user.languages[c].l1!=n?(this.user.languages[c].l1==n&&this.storage.setItem("levelUpgradeDate",new Date),this.updateLanguage(this.user.languages[c]._id,e,n,o,h)):h());null==e&&(e=1),this.addLanguage(t,e,n,(function(t){t.success&&h()}))}else i&&i({success:!0,errors:[]})},t.prototype.refresh=function(){var t=this;this.uuid=this.storage.getItem("uuid"),this.utils.request(o.z.command.auth.userInfo,"get",this.getInfoData(),(function(e){e&&e.success&&t.setUserInfo(e)}))},t.prototype.repeatSignIn=function(t,e){this.clientTokenTime=(new Date).getTime(),this.activate(e,null,null,null,this.autogenerated,t,this.onExpired)},t.prototype.signin=function(t,e,n,i,r,s,a,l){var u=this;if(this.email=t=t.trim(),this.password=e=e.trim(),this.autogenerated=s,!t||!e){var c={success:!1,errors:["Email and password required"]};return this.utils.handleErrors(c),void(i&&i(c))}var h=this.getInfoData();s&&(h.autogenerated=!0),h.email=t,h.username=t,h.password=e,a&&(h.clientKey=a),this.utils.request(o.z.command.auth.sigin,"post",h,(function(s){u.utils.handleErrors(s)?(s.clientToken&&(u.clientToken=s.clientToken,u.clientTokenTime=(new Date).getTime(),u.onExpired=l),s.clientInfo&&u.app.setClientInfo(s.clientInfo),s.token&&u.storage.setItem("JWTToken",s.token),!n&&u.platform.callNative("saveSharedPassword","email="+t+"&password="+e),u.utils.request(o.z.command.auth.userInfo,"get",u.getInfoData(),(function(t){u.signInResult(t,i,r)}),(function(t){i&&i({success:!1,errors:[t]})}),null,!0,!0)):i&&i(s)}),(function(t){i&&i({success:!1,errors:[t]})}),null,!0,!0)},t.prototype.signup=function(t,e,n,i,r,s,a,l,u){var c=this;if(t=t.trim(),e=e.trim(),i=(i||"").trim(),!t||!e){var h={success:!1,errors:["Email and password required"]};return this.utils.handleErrors(h),void(r&&r(h))}var p={username:t,email:t,password:e,displayName:i};a&&(p.autogenerated=!0),l&&(p.clientKey=l),this.utils.request(o.z.command.auth.signup,"post",p,(function(i){c.utils.handleErrors(i)?(!n&&c.platform.callNative("saveSharedPassword","email="+t+"&password="+e),i.clientToken&&(c.clientToken=i.clientToken,c.clientTokenTime=(new Date).getTime(),c.onExpired=u),i.clientInfo&&c.app.setClientInfo(i.clientInfo),i.token&&c.storage.setItem("JWTToken",i.token),c.utils.request(o.z.command.auth.userInfo,"get",c.getInfoData(),(function(t){c.signInResult(t,r,s)}),(function(t){r&&r({success:!1,errors:[t]})}),null,!0,!0)):r&&r(i)}),(function(t){r&&r({success:!1,errors:[t]})}),null,!0,!0)},t.prototype.signout=function(t){var e=this;if(this.anonymous)return this.app.getKnowledge().clear(),this.app.removeMarkup(),void(t&&t({success:!0,errors:[]}));this.utils.request(o.z.command.auth.signout,"post",null,(function(n){e.user.email="",e.user.authenticated=!1,e.clientToken="",e.onExpired=null,e.signinDevice((function(n){e.utils.request(o.z.command.auth.userInfo,"get",e.getInfoData(),(function(n){e.signInResult(n,t)}),(function(e){t&&t({success:!1,errors:[e]})}),null,!0,!0)}))}),(function(e){t&&t({success:!1,errors:[e]})}))},t.prototype.forgotPassword=function(t,e){var n=this;(t=t.trim())?this.utils.request(o.z.command.auth.forgotPassword,"post",{email:t,silent:!0},(function(t){n.utils.handleErrors(t),e&&e(t)})):this.utils.handleErrors({success:!1,errors:["Email required"]})},t}()},593:function(t,e,n){"use strict";n.d(e,{c:function(){return s}});var i=n(655),o=n(312),r=n(838),s=function(){function t(){this.lastCallToAws=0,this.storage={getItem:function(t){return r.IR.storage.getItem(t)},setItem:function(t,e){r.IR.storage.setItem(t,e)},removeItem:function(t){r.IR.storage.removeItem(t)}},this.storage.getItem("cultureData")||this.storage.setItem("cultureData","{}")}return t.prototype.getPlatform=function(){return this.platform},t.prototype.getApp=function(){return this.app},t.prototype.init=function(t,e,n,i){this.app=t,this.user=e,this.medium=n,this.platform=i},t.prototype.setClientId=function(e){t.clientId=e},t.prototype.request=function(e,n,i,r,s,a,l,u,c){var h,p=this;if(void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===u&&(u=!0),void 0===c&&(c=!1),i&&"aws"==i.nlpPort){var d=(new Date).getTime();d-this.lastCallToAws>9e5&&(i.nlpPort="aws-first"),this.lastCallToAws=d}if(this.sendRequest)return this.sendRequest(e,n,i,r,s,a,l,u,c);o.z.tempServer&&(l=!1,u=!0),null==this.revealed&&(this.revealed=!!this.storage.getItem("additional-settings-werfrtg")),this.newServerUrl=this.storage.getItem("newServerUrl")||"";var g=!u&&this.newServerUrl;g&&g!=o.z.server.url||(g=o.z.server.url);var f={"Content-Type":"application/json"},m=(i=i||{}).clientKey||this.storage.getItem("JWTToken");m&&(f.Authorization="JWT "+m);var y=i.clientKey||(null===(h=this.user)||void 0===h?void 0:h.clientToken);y&&(f["Client-Authorization"]="JWT "+y);var v=null,b=null;if(this.revealed&&i){var L=new Date;b=L.getTime(),v=L.toISOString(),i.logIt=v,this.consoleLog("Time: "+v)}i.cache||"get"==n.toLowerCase()&&-1!=e.indexOf("api/files")||(f.pragma="no-cache",f["cache-control"]="no-cache"),o.z.tempServer||(i.siteUrl=g),l&&(i.allowMove=!0),u&&(i.useMainServer=!0),this.medium.bookMode&&(i.bookTitle=this.medium.getCurrentBookTitle()),this.consoleLog("Command data: "+JSON.stringify(i)),i.client=this.app.getName()+"."+o.z.appVersion,i.platform=this.platform.isWeb?"web":this.platform.isAndroid?"android":"ios";var x=g;if(!o.z.tempServer){var w=g.indexOf(":3000");-1!=w&&(x=g.substring(0,w)+"/node/"),x=(x=x.replace(/^http:\/\//,"https://")).replace(/^https:\/\/lrcmain.brainglass.com/,"https://sprakkraft.org")}this.consoleLog("Sent "+n+" request to: "+x+e),n=n.toUpperCase();var k=x+e,M={method:n,headers:f,credentials:"same-origin"};if(t.clientId){i.clientId=t.clientId;var E=this.storage.getItem("lingVisClientData");E&&(i.clientData=E),"GET"==n||"DELETE"==n?k+="?"+this.toQueryString(i):M.body=JSON.stringify(i),this.platform.fetch(k,M,(function(t){if(!t)return s&&s("");if(!t.success){if(t.errors&&t.errors[0]&&I(t.errors[0]))return;if(a){var n=p.getErrors(t);if(I(n))return;return p.consoleLog("Request ("+e+") failed: "+n),void(s&&s(n))}}if(p.consoleLog("Request ("+e+") has been processed"),v&&p.consoleLog("Result data for "+v+": "+JSON.stringify(t).substring(0,1e3)+"\nTime for "+v+": "+((new Date).getTime()-b)),l&&t.newUrl&&t.newUrl!=p.newServerUrl&&!p.getErrors(t))return p.consoleLog("Elasticity: user moved to: "+t.newUrl),p.newServerUrl=t.newUrl,p.storage.setItem("newServerUrl",t.newUrl),void p.user.activate((function(){p.newServerUrl=t.newUrl,t.newUrl!=o.z.server.url&&p.request(o.z.command.users.refreshUserInfo,"put",{},null,null,!0,!1,!1),r&&r(t)}),"",!1,!1);r&&r(t)}));var I=function(t){if(t=(t||"").toString(),!c&&t&&0==t.indexOf("User is not authenticated")&&p.user.onExpired&&p.user.clientToken&&(new Date).getTime()-p.user.clientTokenTime>432e5)return p.user.onExpired.call(p,(function(t){t&&p.user.repeatSignIn(t,(function(t){p.getErrors(t)||p.request(e,n,i,r,s,a,l,u,!0)}))})),!0;if(!c&&t&&0==t.indexOf("Exception: newServerUrl:")){var h=t.substring("Exception: newServerUrl:".length);return p.newServerUrl=h,p.storage.setItem("newServerUrl",h),p.consoleLog("Elasticity: user was moved in another client to: "+h),h!=o.z.server.url&&p.request(o.z.command.users.refreshUserInfo,"put",{},null,null,!0,!1,!1),p.request(e,n,i,r,s,a,l,u,!0),!0}return!1}}},t.prototype.toQueryString=function(t){var e=[],n=function(n){if(t.hasOwnProperty(n)){var i=t[n];Array.isArray(i)?e.push(i.map((function(t){return n+"[]="+encodeURIComponent(t)})).join("&")):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}};for(var i in t)n(i);return e.join("&")},t.prototype.getErrors=function(t){var e="";if(!t.success)if(t.errors&&t.errors.length)for(var n=0;n<t.errors.length;n++)e&&(e+="\r\n"),e+=t.errors[n];else if(t.errfor){for(var i in t.errfor)e+=i+": "+t.errfor[i]+"\r\n";e=e.trim()}return e},t.prototype.handleErrors=function(t){return t.success||(this.platform.poly.native&&this.platform.poly.native.users?this.platform.poly.native.users.showError(t):this.consoleLog("ERROR: "+JSON.stringify(t))),t.success},t.prototype.consoleLog=function(t){r.IR.noLog||(!this.medium.isIonic||this.platform.isAndroid||this.platform.isWeb?console.log(t):this.platform.logEvent("console","msg="+t.replace(/[&=]/g,"")))},t.prototype.getCurrentLanguage=function(){return JSON.parse(this.storage.getItem("currentLanguage")||"{}")},t.prototype.createUUID=function(){var t=function(t){for(var e="",n=0;n<t;n++){var i=parseInt(""+256*Math.random(),10).toString(16);1==i.length&&(i="0"+i),e+=i}return e};return t(4)+"-"+t(2)+"-"+t(2)+"-"+t(2)+"-"+t(6)},t.prototype.isSmallScreen=function(){return window.innerWidth<330||window.innerHeight<330},t.prototype.isMediumScreen=function(){return(window.innerWidth<700||window.innerHeight<700)&&this.isSmallScreen()},t.prototype.adjustTranslation=function(t){return t.replace(/\|/g," ").trim()},t.prototype.stringifyTranslations=function(t){var e,n,o,r,s={},a="";try{for(var l=(0,i.XA)(t),u=l.next();!u.done;u=l.next()){var c=u.value,h=this.adjustTranslation(c);if(h){var p=h.split(",");try{for(var d=(o=void 0,(0,i.XA)(p)),g=d.next();!g.done;g=d.next()){var f=g.value;if(!f)return;var m=f.trim();s[m]||(s[m]=!0,a+=(a?", ":"")+m)}}catch(t){o={error:t}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(o)throw o.error}}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return a},t.prototype.isVisible=function(t){var e;if(t.nodeType==Node.TEXT_NODE)e=t.parentElement;else{if(t.nodeType!=Node.ELEMENT_NODE)return!1;e=t}return!!e&&((e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&"hidden"!=window.getComputedStyle(e).visibility)},t.prototype.getKnowledgeClasses=function(){return["known","estimated","unknown","out-of-vocab"]},t.prototype.getKnowledgeSelector=function(){return this.getKnowledgeClasses().map((function(t){return".polyLingVis-"+t})).join(",")},t.prototype.getPhraseClasses=function(){return["idiom","compound"]},t.prototype.getPhraseSelector=function(){return this.getPhraseClasses().map((function(t){return".polyLingVis-"+t})).join(",")},t.prototype.isPolySpan=function(t,e){for(var n=e?this.getPhraseClasses():this.getKnowledgeClasses(),i=0;i<n.length;i++)if(t.classList.contains("polyLingVis-"+n[i]))return!0;return!1},t.prototype.getVisibleTextContent=function(t,e,n,i,o){return o||(n=!1,i=!1),this.getVisibleTextContentInt(t,e,n,{markNum:0},i,o)},t.prototype.getVisibleTextContentInt=function(t,e,n,i,o,r){if(e.nodeType==Node.TEXT_NODE){if(!this.isVisible(e.parentElement))return"";var s=r&&e.parentElement.getAttribute("polyLingVis-sent-end")?'<break time="1.5s"/>':"";return n&&this.isPolySpan(e.parentElement,!1)?'<mark name="'+i.markNum+++'"/>'+e.textContent+s:o&&e.parentElement.getAttribute("polyLingVis-pause")?'<mark name="'+i.markNum+++'"/>, '+e.textContent+s:e.textContent+s}if(e.nodeType!=Node.ELEMENT_NODE)return"";for(var a,l="",u=t.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);a=u.nextNode();){var c=!this.endsWithApostrophe(l);l+=this.getVisibleTextContentInt(t,a,n&&c,i,o&&c,r&&c)}return l},t.prototype.endsWithApostrophe=function(t){var e=t.trim();return e.endsWith("'")||e.endsWith("’")||e.endsWith("ʼ")},t.clientId="367ebb09-57e9-4129-bae6-083d2d7b838e",t}()},655:function(t,e,n){"use strict";n.d(e,{CR:function(){return u},Jh:function(){return a},XA:function(){return l},ZT:function(){return o},mG:function(){return s},pi:function(){return r}});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function s(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function a(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}Object.create;function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}Object.create},796:function(t,e){"use strict";e.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC+SURBVHgBrZXBEYIwEEW/ePGYEuzAFuzAlJAS7AA6gE60BSuADqJHT5Sgu2NwIEOGheybeTlkhjchhw0wjyGv5I305CfYhj2HFViyH0VSekm4FoRiy1Ss3BAbrOOYy4gN2nHQKwT53s0+nM4hnwP5Lmi5QI8zB4/Q47TD7//VKKAMB5/Qo+NgBz1eHHxAjzsvPFkkw0AyLP5YhaCLj9tkxCokqDbEGizgIBsWPaIJIwnzuG8xvXje4+fBzH30BaO3phWx/8YMAAAAAElFTkSuQmCC"},164:function(t,e){"use strict";e.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAUCAYAAADRA14pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD6SURBVHgB5ZjBDYJAEEWfVmAJdmALdiAlTAl2IB1oJ9qCFUgHYAWWoDsBEjUaCfyBgy/5HPbw8yZkwy7wmUXKNuWYUqbcm1yaNWNapH5Zyu2p5FtKphlc6rfvUPSeHeMh9dv1KGuzJx6pnw0oa5MRhyH2KwWFvq8WxCD1M0FZmy16DKHfPD026FijR+rnAy/RsULPEh2rGfWrVjJDi9Rvzp/hA1foKNBToaPwgZWSV/RI/XzgMzpO6JH7+ce4y2H8V0piCPHLBIVGHCF+hwFlOfGE+OU9yg6MR06An9HtsO77KvKGNLqfUf8uufC68X3NLwlRN6OuGD38Hty3bkC6Yyw0AAAAAElFTkSuQmCC"},570:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNy40NzgiIGhlaWdodD0iMTciIHZpZXdCb3g9IjAgMCAxNy40NzggMTciPjxwYXRoIGQ9Ik04LjczOSwxMy42MjYsMy4zMzgsMTdsMS40NjgtNi4zTDAsNi40OTNsNi4zMDktLjUxN0w4LjczOSwwbDIuNDMsNS45NzYsNi4zMDkuNTE3TDEyLjY3MiwxMC43LDE0LjE0LDE3WiIgZmlsbD0iI2ZmYmExYiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggZD0iTTEzLjM3OCwxNS45MzVsLTEuMjYyLTUuNDA5TDE2LjI2MSw2LjlsLTUuNDM4LS40NDZMOC43MzksMS4zMjcsNi42NTYsNi40NDksMS4yMTcsNi45bDQuMTQ0LDMuNjNMNC4xLDE1LjkzNWw0LjYzOS0yLjlaIiBmaWxsPSJub25lIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iMSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+"},557:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxN3B4IiB2aWV3Qm94PSIwIDAgMTggMTciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ3ICg0NTM5NikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+U3RhcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwb2x5Z29uIGlkPSJwYXRoLTEiIHBvaW50cz0iMzE0LjczOTExNyAxOTcuNjI2MTg1IDMwOS4zMzgwNDYgMjAxIDMxMC44MDY1MTQgMTk0LjcwNDE0NSAzMDYgMTkwLjQ5MzQyMiAzMTIuMzA4NjM1IDE4OS45NzYxODUgMzE0LjczOTExNyAxODQgMzE3LjE2OTU5OSAxODkuOTc2MTg1IDMyMy40NzgyMzQgMTkwLjQ5MzQyMiAzMTguNjcxNzE5IDE5NC43MDQxNDUgMzIwLjE0MDE4OCAyMDEiPjwvcG9seWdvbj4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEaWN0LXBvcHVwLSdpbi13b3JkLWxpc3QnLWluZGljYXRvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwNi4wMDAwMDAsIC0xODQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJTdGFyIj4KICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iIzk3OTc5NyIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMzE5LjM3ODI1MSwxOTkuOTM0NTE4IEwzMTguMTE2NjcsMTk0LjUyNTY2NSBMMzIyLjI2MDczNCwxOTAuODk1Mjc5IEwzMTYuODIyMjc5LDE5MC40NDkzODYgTDMxNC43MzkxMTcsMTg1LjMyNzIwOSBMMzEyLjY1NTk1NSwxOTAuNDQ5Mzg2IEwzMDcuMjE3NSwxOTAuODk1Mjc5IEwzMTEuMzYxNTY0LDE5NC41MjU2NjUgTDMxMC4wOTk5ODMsMTk5LjkzNDUxOCBMMzE0LjczOTExNywxOTcuMDM2NjUyIEwzMTkuMzc4MjUxLDE5OS45MzQ1MTggWiI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},177:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5NzcgOTc3Ij48dGl0bGU+b3BlbmVkLWJvb2s8L3RpdGxlPjxjaXJjbGUgY3g9IjQ4OC41IiBjeT0iNDg4LjUiIHI9IjQ4OC41IiBzdHlsZT0iZmlsbDpub25lIi8+PHBhdGggZD0iTTU5MS4yLDI2MmMtNDYuNCwwLTgzLjIsMTQuNS0xMDIuOSwzOS41LTIwLjItMjUtNTYuOS0zOS41LTEwMi40LTM5LjVDMzEwLjYsMjYyLDI2MiwzMDEuMiwyNjIsMzYxLjhWNjkwLjRoNDMuMWwzLjEtNi4zYzEyLjItMjQuOCw0Mi43LTQwLjgsNzcuNy00MC44LDM5LDAsNzIuOCwyNi40LDgwLjUsNjIuOWwxLjksOC45aDQwLjNsMS45LTguOWM3LjctMzYuNCw0MS42LTYyLjksODAuNi02Mi45LDM3LjIsMCw2MiwxMy4yLDc4LjIsNDEuNGwzLjIsNS43SDcxNVYzNjEuOEM3MTUsMzAxLjIsNjY2LjQsMjYyLDU5MS4yLDI2MlpNMzg1LjksNjIwLjhjLTQwLjcsMC03Ni45LDE4LjMtOTQuNCw0Ny4xaC03LjFWMzYxLjhjMC01Nyw1Mi40LTc3LjQsMTAxLjUtNzcuNCw0My45LDAsNzcuNCwxNC44LDkwLjcsMzkuOEw0NzgsNjczLjhDNDYwLDY0MS45LDQyNSw2MjAuOCwzODUuOSw2MjAuOFptMzA2LjcsNDcuMWgtNy4zYy0yMC40LTMxLjctNTEuMy00Ny4xLTk0LjItNDcuMS0zOC4xLDAtNzIuNCwyMC4xLTkwLjcsNTAuNkw0OTksMzI3YzEzLjEtMzEuNCw1Ni4yLTQyLjYsOTIuMi00Mi42LDQ5LDAsMTAxLjQsMjAuMywxMDEuNCw3Ny40WiIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6I2ZmZjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2Utd2lkdGg6MTBweCIvPjwvc3ZnPg=="},517:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1ODkuNTQgNjYzLjg4Ij48dGl0bGU+cG9wdXAtY2hhbmdlLWNvbG9yLXBvaW50ZXItbGF0ZXI8L3RpdGxlPjxyZWN0IHdpZHRoPSIyOTQuODYiIGhlaWdodD0iMjk0Ljg2IiBzdHlsZT0iZmlsbDojZWQ5Zjk2Ii8+PHJlY3QgeD0iMjk0LjY4IiB3aWR0aD0iMjk0Ljg2IiBoZWlnaHQ9IjI5NC44NiIgc3R5bGU9ImZpbGw6I2Y0ZjhhYyIvPjxwYXRoIGQ9Ik05OC4zMywyMzMuNTdhNDcuODEsNDcuODEsMCwxLDEsOTUuNjIsMHY0NS45YTY2Ljc5LDY2Ljc5LDAsMCwwLDE5LjEzLTQ1LjljMC0zNi4zNC0zMC42LTY2Ljk0LTY2Ljk0LTY2Ljk0Uzc5LjIsMTk3LjIzLDc5LjIsMjMzLjU3YTYzLjM0LDYzLjM0LDAsMCwwLDE5LjEzLDQ1LjlaIiBzdHlsZT0iZmlsbDojNGU5MmRmIi8+PHBhdGggZD0iTTM3NS42NCwzMzguNzZjLTE1LjMsMC0yOC42OSwxMy4zOS0yOC42OSwyOC42OXY0Ny44MUgzMjcuODNWMzQ4LjMyYzAtMTUuMy0xMy4zOS0yOC42OS0yOC42OS0yOC42OVMyNzAuNDUsMzMzLDI3MC40NSwzNDguMzJ2NDcuODFIMjUxLjMzVjMyOS4xOWMwLTE1LjMtMTMuMzktMjguNjktMjguNjktMjguNjlTMTk0LDMxMy44OSwxOTQsMzI5LjE5djg2LjA2SDE3NC44M1YyMzMuNTdjMC0xNS4zLTEzLjM5LTI4LjY5LTI4LjY5LTI4LjY5cy0yOC42OSwxMy4zOS0yOC42OSwyOC42OXYxOTdjLTQwLjE2LTQyLjA3LTkxLjgtODgtMTEyLjg0LTY2Ljk0UzM3LjEzLDQ0MiwxMTEuNzEsNTY4LjI2YzM0LjQzLDU3LjM4LDc2LjUsOTUuNjMsMTQ5LjE3LDk1LjYzLDc4LjQxLDAsMTQzLjQ0LTY1LDE0My40NC0xNDMuNDR2LTE1M0M0MDQuMzMsMzUyLjE0LDM5MC45NCwzMzguNzYsMzc1LjY0LDMzOC43NloiIHN0eWxlPSJmaWxsOiM0ZTkyZGYiLz48L3N2Zz4="},710:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1ODkuNTQgNjYzLjg4Ij48dGl0bGU+cG9wdXAtY2hhbmdlLWNvbG9yLXBvaW50ZXItbGVhcm48L3RpdGxlPjxyZWN0IHdpZHRoPSIyOTQuODYiIGhlaWdodD0iMjk0Ljg2IiBzdHlsZT0iZmlsbDojZjRmOGFjIi8+PHJlY3QgeD0iMjk0LjY4IiB3aWR0aD0iMjk0Ljg2IiBoZWlnaHQ9IjI5NC44NiIgc3R5bGU9ImZpbGw6I2M0ZWRiZCIvPjxwYXRoIGQ9Ik05OC4zMywyMzMuNTdhNDcuODEsNDcuODEsMCwxLDEsOTUuNjIsMHY0NS45YTY2Ljc5LDY2Ljc5LDAsMCwwLDE5LjEzLTQ1LjljMC0zNi4zNC0zMC42LTY2Ljk0LTY2Ljk0LTY2Ljk0Uzc5LjIsMTk3LjIzLDc5LjIsMjMzLjU3YTYzLjM0LDYzLjM0LDAsMCwwLDE5LjEzLDQ1LjlaIiBzdHlsZT0iZmlsbDojNGU5MmRmIi8+PHBhdGggZD0iTTM3NS42NCwzMzguNzZjLTE1LjMsMC0yOC42OSwxMy4zOS0yOC42OSwyOC42OXY0Ny44MUgzMjcuODNWMzQ4LjMyYzAtMTUuMy0xMy4zOS0yOC42OS0yOC42OS0yOC42OVMyNzAuNDUsMzMzLDI3MC40NSwzNDguMzJ2NDcuODFIMjUxLjMzVjMyOS4xOWMwLTE1LjMtMTMuMzktMjguNjktMjguNjktMjguNjlTMTk0LDMxMy44OSwxOTQsMzI5LjE5djg2LjA2SDE3NC44M1YyMzMuNTdjMC0xNS4zLTEzLjM5LTI4LjY5LTI4LjY5LTI4LjY5cy0yOC42OSwxMy4zOS0yOC42OSwyOC42OXYxOTdjLTQwLjE2LTQyLjA3LTkxLjgtODgtMTEyLjg0LTY2Ljk0UzM3LjEzLDQ0MiwxMTEuNzEsNTY4LjI2YzM0LjQzLDU3LjM4LDc2LjUsOTUuNjMsMTQ5LjE3LDk1LjYzLDc4LjQxLDAsMTQzLjQ0LTY1LDE0My40NC0xNDMuNDR2LTE1M0M0MDQuMzMsMzUyLjE0LDM5MC45NCwzMzguNzYsMzc1LjY0LDMzOC43NloiIHN0eWxlPSJmaWxsOiM0ZTkyZGYiLz48L3N2Zz4="},357:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1ODkuNTQgNjYzLjg4Ij48dGl0bGU+cG9wdXAtY2hhbmdlLWNvbG9yLXBvaW50ZXIta25vd248L3RpdGxlPjxyZWN0IHdpZHRoPSIyOTQuODYiIGhlaWdodD0iMjk0Ljg2IiBzdHlsZT0iZmlsbDojYzRlZGJkIi8+PHJlY3QgeD0iMjk0LjY4IiB3aWR0aD0iMjk0Ljg2IiBoZWlnaHQ9IjI5NC44NiIgc3R5bGU9ImZpbGw6I2VkOWY5NiIvPjxwYXRoIGQ9Ik05OC4zMywyMzMuNTdhNDcuODEsNDcuODEsMCwxLDEsOTUuNjIsMHY0NS45YTY2Ljc5LDY2Ljc5LDAsMCwwLDE5LjEzLTQ1LjljMC0zNi4zNC0zMC42LTY2Ljk0LTY2Ljk0LTY2Ljk0Uzc5LjIsMTk3LjIzLDc5LjIsMjMzLjU3YTYzLjM0LDYzLjM0LDAsMCwwLDE5LjEzLDQ1LjlaIiBzdHlsZT0iZmlsbDojNGU5MmRmIi8+PHBhdGggZD0iTTM3NS42NCwzMzguNzZjLTE1LjMsMC0yOC42OSwxMy4zOS0yOC42OSwyOC42OXY0Ny44MUgzMjcuODNWMzQ4LjMyYzAtMTUuMy0xMy4zOS0yOC42OS0yOC42OS0yOC42OVMyNzAuNDUsMzMzLDI3MC40NSwzNDguMzJ2NDcuODFIMjUxLjMzVjMyOS4xOWMwLTE1LjMtMTMuMzktMjguNjktMjguNjktMjguNjlTMTk0LDMxMy44OSwxOTQsMzI5LjE5djg2LjA2SDE3NC44M1YyMzMuNTdjMC0xNS4zLTEzLjM5LTI4LjY5LTI4LjY5LTI4LjY5cy0yOC42OSwxMy4zOS0yOC42OSwyOC42OXYxOTdjLTQwLjE2LTQyLjA3LTkxLjgtODgtMTEyLjg0LTY2Ljk0UzM3LjEzLDQ0MiwxMTEuNzEsNTY4LjI2YzM0LjQzLDU3LjM4LDc2LjUsOTUuNjMsMTQ5LjE3LDk1LjYzLDc4LjQxLDAsMTQzLjQ0LTY1LDE0My40NC0xNDMuNDR2LTE1M0M0MDQuMzMsMzUyLjE0LDM5MC45NCwzMzguNzYsMzc1LjY0LDMzOC43NloiIHN0eWxlPSJmaWxsOiM0ZTkyZGYiLz48L3N2Zz4="},540:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDQ4cHgiIGhlaWdodD0iNDE2cHgiIHZpZXdCb3g9IjAgMCA0NDggNDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NyAoNDUzOTYpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPlNoYXBlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAsNDE2IEw0NDgsNDE2IEwyMjQsMCBMMCw0MTYgWiBNMjQ4LDM1MiBMMjAwLDM1MiBMMjAwLDMwNCBMMjQ4LDMwNCBMMjQ4LDM1MiBaIE0yNDgsMjcyIEwyMDAsMjcyIEwyMDAsMTc2IEwyNDgsMTc2IEwyNDgsMjcyIFoiIGlkPSJTaGFwZSIgZmlsbD0iI0VFQjIwNCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="},367:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNkQ3MTc3O30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjE2LjYsNjguOWMtNS4zLDAtOS45LDItMTMuOCw1LjhMMTAwLjMsMTc3LjJIMTkuN2MtNS4zLDAtMTAsMi0xMy44LDUuOEMxLjksMTg3LDAsMTkxLjYsMCwxOTYuOXYxMTguMQoJCQljMCw1LjMsMS45LDEwLDUuOCwxMy44YzMuOSwzLjksOC41LDUuOCwxMy44LDUuOGg4MC42bDEwMi41LDEwMi41YzMuOSwzLjksOC41LDUuOCwxMy44LDUuOGM1LjMsMCwxMC0yLDEzLjgtNS44CgkJCWMzLjktMy45LDUuOC04LjUsNS44LTEzLjhWODguNmMwLTUuMy0xLjktMTAtNS44LTEzLjhDMjI2LjYsNzAuOSwyMjIsNjguOSwyMTYuNiw2OC45eiIvPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNDEuNCwyOTkuNWM4LjctMTMuNCwxMy4xLTI3LjksMTMuMS00My41YzAtMTUuNi00LjQtMzAuMi0xMy4xLTQzLjdjLTguNy0xMy41LTIwLjMtMjMuMS0zNC42LTI4LjYKCQkJYy0yLTEtNC42LTEuNS03LjctMS41Yy01LjMsMC05LjksMS45LTEzLjgsNS43Yy0zLjksMy44LTUuOCw4LjUtNS44LDE0YzAsNC4zLDEuMiw3LjksMy43LDEwLjljMi41LDMsNS40LDUuNSw4LjksNy43CgkJCWMzLjUsMi4yLDcsNC41LDEwLjUsNy4xYzMuNSwyLjYsNi41LDYuMiw4LjksMTAuOWMyLjUsNC43LDMuNywxMC42LDMuNywxNy41YzAsNy0xLjIsMTIuOC0zLjcsMTcuNWMtMi41LDQuNy01LjQsOC40LTguOSwxMC45CgkJCWMtMy41LDIuNi03LDQuOS0xMC41LDcuMWMtMy41LDIuMS02LjUsNC43LTguOSw3LjdjLTIuNSwzLTMuNyw2LjYtMy43LDEwLjljMCw1LjUsMiwxMC4yLDUuOCwxNGMzLjksMy44LDguNSw1LjcsMTMuOCw1LjcKCQkJYzMuMSwwLDUuNi0wLjUsNy43LTEuNUMzMjEuMSwzMjIuNiwzMzIuNywzMTMsMzQxLjQsMjk5LjV6Ii8+CgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwNy4xLDM0Mi45YzE3LjQtMjYuNiwyNi4yLTU1LjUsMjYuMi04Ni45YzAtMzEuNC04LjctNjAuNC0yNi4yLTg2LjljLTE3LjQtMjYuNi00MC41LTQ1LjktNjkuMi01OAoJCQljLTIuNy0xLTUuMy0xLjUtOC0xLjVjLTUuMywwLTEwLDEuOS0xMy45LDUuOGMtMy45LDMuOS01LjgsOC41LTUuOCwxMy44YzAsOCw0LDE0LjEsMTIsMTguMmMxMS41LDUuOSwxOS4zLDEwLjUsMjMuNCwxMy41CgkJCWMxNS4yLDExLjEsMjcsMjUsMzUuNSw0MS43YzguNSwxNi43LDEyLjgsMzQuNSwxMi44LDUzLjRjMCwxOC45LTQuMywzNi43LTEyLjgsNTMuNGMtOC41LDE2LjctMjAuNCwzMC42LTM1LjUsNDEuNwoJCQljLTQuMSwzLjEtMTEuOSw3LjYtMjMuNCwxMy41Yy04LDQuMS0xMiwxMC4yLTEyLDE4LjJjMCw1LjMsMiwxMCw1LjgsMTMuOGMzLjksMy45LDguNiw1LjksMTQuMiw1LjljMi41LDAsNS0wLjUsNy43LTEuNQoJCQlDMzY2LjYsMzg4LjgsMzg5LjYsMzY5LjUsNDA3LjEsMzQyLjl6Ii8+CgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ3Mi45LDEyNmMtMjYtMzkuNS02MC43LTY4LjYtMTA0LTg3LjJjLTIuNy0xLTUuMy0xLjUtOC0xLjVjLTUuMywwLTEwLDItMTMuOCw1LjgKCQkJYy0zLjksMy45LTUuOSw4LjUtNS45LDEzLjhjMCw3LjQsNCwxMy40LDEyLDE4LjJjMS40LDAuOCwzLjcsMS45LDYuOSwzLjJjMy4yLDEuMyw1LjUsMi40LDYuOSwzLjJjOS40LDUuMSwxNy44LDEwLjQsMjUuMiwxNS43CgkJCWMyNS4yLDE4LjcsNDQuOSw0MS45LDU5LjEsNjkuOGMxNC4yLDI3LjksMjEuMiw1Ny41LDIxLjIsODguOWMwLDMxLjQtNy4xLDYxLTIxLjIsODguOWMtMTQuMiwyNy45LTMzLjgsNTEuMi01OS4xLDY5LjgKCQkJYy03LjQsNS4zLTE1LjgsMTAuNi0yNS4yLDE1LjdjLTEuNCwwLjgtMy43LDEuOS02LjksMy4yYy0zLjIsMS4zLTUuNSwyLjQtNi45LDMuMmMtOCw0LjctMTIsMTAuOC0xMiwxOC4yYzAsNS4zLDIsMTAsNS45LDEzLjgKCQkJYzMuOSwzLjksOC41LDUuOCwxMy44LDUuOGMyLjcsMCw1LjMtMC41LDgtMS41YzQzLjMtMTguNyw3OC00Ny43LDEwNC04Ny4yQzQ5OSwzNDYuNSw1MTIsMzAzLjIsNTEyLDI1NlM0OTksMTY1LjUsNDcyLjksMTI2eiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo="},543:function(t,e){"use strict";e.Z="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MDAgNTAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MDAgNTAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0MxMjcyRDt9Cgkuc3Qxe2ZpbGw6bm9uZTtzdHJva2U6I0ZGRkZGRjtzdHJva2Utd2lkdGg6MzA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQo8L3N0eWxlPgo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSIyNTAiIGN5PSIyNTAiIHI9IjI1MCIvPgo8Zz4KCTxsaW5lIGNsYXNzPSJzdDEiIHgxPSIxMjYuMyIgeTE9IjEyNi4zIiB4Mj0iMzczLjciIHkyPSIzNzMuNyIvPgoJPGxpbmUgY2xhc3M9InN0MSIgeDE9IjEyNi4zIiB5MT0iMzczLjciIHgyPSIzNzMuNyIgeTI9IjEyNi4zIi8+CjwvZz4KPC9zdmc+Cg=="},846:function(){diff_match_patch=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0,diff_match_patch.Diff=function(t,e){this[0]=t,this[1]=e},diff_match_patch.Diff.prototype.length=2,diff_match_patch.Diff.prototype.toString=function(){return this[0]+","+this[1]},diff_match_patch.prototype.diff_main=function(t,e,n,i){if(void 0===i&&(i=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[new diff_match_patch.Diff(DIFF_EQUAL,t)]:[];void 0===n&&(n=!0);var o=n,r=this.diff_commonPrefix(t,e);n=t.substring(0,r),t=t.substring(r),e=e.substring(r),r=this.diff_commonSuffix(t,e);var s=t.substring(t.length-r);return t=t.substring(0,t.length-r),e=e.substring(0,e.length-r),t=this.diff_compute_(t,e,o,i),n&&t.unshift(new diff_match_patch.Diff(DIFF_EQUAL,n)),s&&t.push(new diff_match_patch.Diff(DIFF_EQUAL,s)),this.diff_cleanupMerge(t),t},diff_match_patch.prototype.diff_compute_=function(t,e,n,i){if(!t)return[new diff_match_patch.Diff(DIFF_INSERT,e)];if(!e)return[new diff_match_patch.Diff(DIFF_DELETE,t)];var o=t.length>e.length?t:e,r=t.length>e.length?e:t,s=o.indexOf(r);return-1!=s?(n=[new diff_match_patch.Diff(DIFF_INSERT,o.substring(0,s)),new diff_match_patch.Diff(DIFF_EQUAL,r),new diff_match_patch.Diff(DIFF_INSERT,o.substring(s+r.length))],t.length>e.length&&(n[0][0]=n[2][0]=DIFF_DELETE),n):1==r.length?[new diff_match_patch.Diff(DIFF_DELETE,t),new diff_match_patch.Diff(DIFF_INSERT,e)]:(o=this.diff_halfMatch_(t,e))?(e=o[1],r=o[3],t=o[4],o=this.diff_main(o[0],o[2],n,i),n=this.diff_main(e,r,n,i),o.concat([new diff_match_patch.Diff(DIFF_EQUAL,t)],n)):n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},diff_match_patch.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2,i=i.lineArray,t=this.diff_main(t,e,!1,n),this.diff_charsToLines_(t,i),this.diff_cleanupSemantic(t),t.push(new diff_match_patch.Diff(DIFF_EQUAL,""));for(var o=i=e=0,r="",s="";e<t.length;){switch(t[e][0]){case DIFF_INSERT:o++,s+=t[e][1];break;case DIFF_DELETE:i++,r+=t[e][1];break;case DIFF_EQUAL:if(1<=i&&1<=o){for(t.splice(e-i-o,i+o),e=e-i-o,o=(i=this.diff_main(r,s,!1,n)).length-1;0<=o;o--)t.splice(e,0,i[o]);e+=i.length}i=o=0,s=r=""}e++}return t.pop(),t},diff_match_patch.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,o=e.length,r=Math.ceil((i+o)/2),s=2*r,a=Array(s),l=Array(s),u=0;u<s;u++)a[u]=-1,l[u]=-1;a[r+1]=0,l[r+1]=0;for(var c=0!=(u=i-o)%2,h=0,p=0,d=0,g=0,f=0;f<r&&!((new Date).getTime()>n);f++){for(var m=-f+h;m<=f-p;m+=2){for(var y=r+m,v=m==-f||m!=f&&a[y-1]<a[y+1]?a[y+1]:a[y-1]+1,b=v-m;v<i&&b<o&&t.charAt(v)==e.charAt(b);)v++,b++;if(a[y]=v,v>i)p+=2;else if(b>o)h+=2;else if(c&&(0<=(y=r+u-m)&&y<s&&-1!=l[y])){var L=i-l[y];if(v>=L)return this.diff_bisectSplit_(t,e,v,b,n)}}for(m=-f+d;m<=f-g;m+=2){for(y=r+m,v=(L=m==-f||m!=f&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-m;L<i&&v<o&&t.charAt(i-L-1)==e.charAt(o-v-1);)L++,v++;if(l[y]=L,L>i)g+=2;else if(v>o)d+=2;else if(!c&&(0<=(y=r+u-m)&&y<s&&-1!=a[y]&&(b=r+(v=a[y])-y,v>=(L=i-L))))return this.diff_bisectSplit_(t,e,v,b,n)}}return[new diff_match_patch.Diff(DIFF_DELETE,t),new diff_match_patch.Diff(DIFF_INSERT,e)]},diff_match_patch.prototype.diff_bisectSplit_=function(t,e,n,i,o){var r=t.substring(0,n),s=e.substring(0,i);return t=t.substring(n),e=e.substring(i),r=this.diff_main(r,s,!1,o),o=this.diff_main(t,e,!1,o),r.concat(o)},diff_match_patch.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,s=-1,a=i.length;s<t.length-1;){-1==(s=t.indexOf("\n",n))&&(s=t.length-1);var l=t.substring(n,s+1);(o.hasOwnProperty?o.hasOwnProperty(l):void 0!==o[l])?e+=String.fromCharCode(o[l]):(a==r&&(l=t.substring(n),s=t.length),e+=String.fromCharCode(a),o[l]=a,i[a++]=l),n=s+1}return e}var i=[],o={};i[0]="";var r=4e4,s=n(t);return r=65535,{chars1:s,chars2:n(e),lineArray:i}},diff_match_patch.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],o=[],r=0;r<i.length;r++)o[r]=e[i.charCodeAt(r)];t[n][1]=o.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;n<o;)t.substring(r,o)==e.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},diff_match_patch.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;n<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},diff_match_patch.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;if(n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n)),n=Math.min(n,i),t==e)return n;i=0;for(var o=1;;){var r=t.substring(n-o);if(-1==(r=e.indexOf(r)))return i;o+=r,0!=r&&t.substring(n-o)!=e.substring(0,o)||(i=o,o++)}},diff_match_patch.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var i,o,s,a,l=t.substring(n,n+Math.floor(t.length/4)),u=-1,c="";-1!=(u=e.indexOf(l,u+1));){var h=r.diff_commonPrefix(t.substring(n),e.substring(u)),p=r.diff_commonSuffix(t.substring(0,n),e.substring(0,u));c.length<p+h&&(c=e.substring(u-p,u)+e.substring(u,u+h),i=t.substring(0,n-p),o=t.substring(n+h),s=e.substring(0,u-p),a=e.substring(u+h))}return 2*c.length>=t.length?[i,o,s,a,c]:null}if(0>=this.Diff_Timeout)return null;var i=t.length>e.length?t:e,o=t.length>e.length?e:t;if(4>i.length||2*o.length<i.length)return null;var r=this,s=n(i,o,Math.ceil(i.length/4));if(i=n(i,o,Math.ceil(i.length/2)),!s&&!i)return null;if(s=i?s&&s[4].length>i[4].length?s:i:s,t.length>e.length){i=s[0],o=s[1];var a=s[2],l=s[3]}else a=s[0],l=s[1],i=s[2],o=s[3];return[i,o,a,l,s[4]]},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,o=null,r=0,s=0,a=0,l=0,u=0;r<t.length;)t[r][0]==DIFF_EQUAL?(n[i++]=r,s=l,a=u,u=l=0,o=t[r][1]):(t[r][0]==DIFF_INSERT?l+=t[r][1].length:u+=t[r][1].length,o&&o.length<=Math.max(s,a)&&o.length<=Math.max(l,u)&&(t.splice(n[i-1],0,new diff_match_patch.Diff(DIFF_DELETE,o)),t[n[i-1]+1][0]=DIFF_INSERT,i--,r=0<--i?n[i-1]:-1,u=l=a=s=0,o=null,e=!0)),r++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),r=1;r<t.length;)t[r-1][0]==DIFF_DELETE&&t[r][0]==DIFF_INSERT&&(e=t[r-1][1],n=t[r][1],(i=this.diff_commonOverlap_(e,n))>=(o=this.diff_commonOverlap_(n,e))?(i>=e.length/2||i>=n.length/2)&&(t.splice(r,0,new diff_match_patch.Diff(DIFF_EQUAL,n.substring(0,i))),t[r-1][1]=e.substring(0,e.length-i),t[r+1][1]=n.substring(i),r++):(o>=e.length/2||o>=n.length/2)&&(t.splice(r,0,new diff_match_patch.Diff(DIFF_EQUAL,e.substring(0,o))),t[r-1][0]=DIFF_INSERT,t[r-1][1]=n.substring(0,n.length-o),t[r+1][0]=DIFF_DELETE,t[r+1][1]=e.substring(o),r++),r++),r++},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),o=n.match(diff_match_patch.nonAlphaNumericRegex_),r=i.match(diff_match_patch.nonAlphaNumericRegex_),s=o&&n.match(diff_match_patch.whitespaceRegex_),a=r&&i.match(diff_match_patch.whitespaceRegex_);n=s&&n.match(diff_match_patch.linebreakRegex_),i=a&&i.match(diff_match_patch.linebreakRegex_);var l=n&&t.match(diff_match_patch.blanklineEndRegex_),u=i&&e.match(diff_match_patch.blanklineStartRegex_);return l||u?5:n||i?4:o&&!s&&a?3:s||a?2:o||r?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL){var i=t[n-1][1],o=t[n][1],r=t[n+1][1],s=this.diff_commonSuffix(i,o);if(s){var a=o.substring(o.length-s);i=i.substring(0,i.length-s),o=a+o.substring(0,o.length-s),r=a+r}s=i,a=o;for(var l=r,u=e(i,o)+e(o,r);o.charAt(0)===r.charAt(0);){i+=o.charAt(0),o=o.substring(1)+r.charAt(0),r=r.substring(1);var c=e(i,o)+e(o,r);c>=u&&(u=c,s=i,a=o,l=r)}t[n-1][1]!=s&&(s?t[n-1][1]=s:(t.splice(n-1,1),n--),t[n][1]=a,l?t[n+1][1]=l:(t.splice(n+1,1),n--))}n++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,o=null,r=0,s=!1,a=!1,l=!1,u=!1;r<t.length;)t[r][0]==DIFF_EQUAL?(t[r][1].length<this.Diff_EditCost&&(l||u)?(n[i++]=r,s=l,a=u,o=t[r][1]):(i=0,o=null),l=u=!1):(t[r][0]==DIFF_DELETE?u=!0:l=!0,o&&(s&&a&&l&&u||o.length<this.Diff_EditCost/2&&3==s+a+l+u)&&(t.splice(n[i-1],0,new diff_match_patch.Diff(DIFF_DELETE,o)),t[n[i-1]+1][0]=DIFF_INSERT,i--,o=null,s&&a?(l=u=!0,i=0):(r=0<--i?n[i-1]:-1,l=u=!1),e=!0)),r++;e&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push(new diff_match_patch.Diff(DIFF_EQUAL,""));for(var e,n=0,i=0,o=0,r="",s="";n<t.length;)switch(t[n][0]){case DIFF_INSERT:o++,s+=t[n][1],n++;break;case DIFF_DELETE:i++,r+=t[n][1],n++;break;case DIFF_EQUAL:1<i+o?(0!==i&&0!==o&&(0!==(e=this.diff_commonPrefix(s,r))&&(0<n-i-o&&t[n-i-o-1][0]==DIFF_EQUAL?t[n-i-o-1][1]+=s.substring(0,e):(t.splice(0,0,new diff_match_patch.Diff(DIFF_EQUAL,s.substring(0,e))),n++),s=s.substring(e),r=r.substring(e)),0!==(e=this.diff_commonSuffix(s,r))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),r=r.substring(0,r.length-e))),n-=i+o,t.splice(n,i+o),r.length&&(t.splice(n,0,new diff_match_patch.Diff(DIFF_DELETE,r)),n++),s.length&&(t.splice(n,0,new diff_match_patch.Diff(DIFF_INSERT,s)),n++),n++):0!==n&&t[n-1][0]==DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=o=0,s=r=""}for(""===t[t.length-1][1]&&t.pop(),i=!1,n=1;n<t.length-1;)t[n-1][0]==DIFF_EQUAL&&t[n+1][0]==DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),i=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),i=!0)),n++;i&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,e){var n,i=0,o=0,r=0,s=0;for(n=0;n<t.length&&(t[n][0]!==DIFF_INSERT&&(i+=t[n][1].length),t[n][0]!==DIFF_DELETE&&(o+=t[n][1].length),!(i>e));n++)r=i,s=o;return t.length!=n&&t[n][0]===DIFF_DELETE?s:s+(e-r)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,o=/>/g,r=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1].replace(n,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(r,"&para;<br>");switch(a){case DIFF_INSERT:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case DIFF_DELETE:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case DIFF_EQUAL:e[s]="<span>"+l+"</span>"}}return e.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_INSERT&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==DIFF_DELETE&&(e[n]=t[n][1]);return e.join("")},diff_match_patch.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,o=0;o<t.length;o++){var r=t[o][1];switch(t[o][0]){case DIFF_INSERT:n+=r.length;break;case DIFF_DELETE:i+=r.length;break;case DIFF_EQUAL:e+=Math.max(n,i),i=n=0}}return e+Math.max(n,i)},diff_match_patch.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case DIFF_INSERT:e[n]="+"+encodeURI(t[n][1]);break;case DIFF_DELETE:e[n]="-"+t[n][1].length;break;case DIFF_EQUAL:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,o=0,r=e.split(/\t/g),s=0;s<r.length;s++){var a=r[s].substring(1);switch(r[s].charAt(0)){case"+":try{n[i++]=new diff_match_patch.Diff(DIFF_INSERT,decodeURI(a))}catch(t){throw Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||0>l)throw Error("Invalid number in diff_fromDelta: "+a);a=t.substring(o,o+=l),"="==r[s].charAt(0)?n[i++]=new diff_match_patch.Diff(DIFF_EQUAL,a):n[i++]=new diff_match_patch.Diff(DIFF_DELETE,a);break;default:if(r[s])throw Error("Invalid diff operation in diff_fromDelta: "+r[s])}}if(o!=t.length)throw Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return n},diff_match_patch.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},diff_match_patch.prototype.match_bitap_=function(t,e,n){function i(t,i){var o=t/e.length,s=Math.abs(n-i);return r.Match_Distance?o+s/r.Match_Distance:s?1:o}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var o=this.match_alphabet_(e),r=this,s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(i(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(i(0,a),s)));var l=1<<e.length-1;a=-1;for(var u,c,h,p=e.length+t.length,d=0;d<e.length;d++){for(u=0,c=p;u<c;)i(d,n+c)<=s?u=c:p=c,c=Math.floor((p-u)/2+u);p=c,u=Math.max(1,n-c+1);var g=Math.min(n+c,t.length)+e.length;for((c=Array(g+2))[g+1]=(1<<d)-1;g>=u;g--){var f=o[t.charAt(g-1)];if(c[g]=0===d?(c[g+1]<<1|1)&f:(c[g+1]<<1|1)&f|(h[g+1]|h[g])<<1|1|h[g+1],c[g]&l&&(f=i(d,g-1))<=s){if(s=f,!((a=g-1)>n))break;u=Math.max(1,2*n-a)}}if(i(d+1,n)>s)break;h=c}return a},diff_match_patch.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},diff_match_patch.prototype.patch_addContext_=function(t,e){if(0!=e.length){if(null===t.start2)throw Error("patch not initialized");for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin,(n=e.substring(t.start2-i,t.start2))&&t.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL,n)),(i=e.substring(t.start2+t.length1,t.start2+t.length1+i))&&t.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,i)),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+i.length,t.length2+=n.length+i.length}},diff_match_patch.prototype.patch_make=function(t,e,n){if("string"==typeof t&&"string"==typeof e&&void 0===n){var i=t;2<(e=this.diff_main(i,e,!0)).length&&(this.diff_cleanupSemantic(e),this.diff_cleanupEfficiency(e))}else if(t&&"object"==typeof t&&void 0===e&&void 0===n)e=t,i=this.diff_text1(e);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");i=t,e=n}if(0===e.length)return[];n=[],t=new diff_match_patch.patch_obj;for(var o=0,r=0,s=0,a=i,l=0;l<e.length;l++){var u=e[l][0],c=e[l][1];switch(o||u===DIFF_EQUAL||(t.start1=r,t.start2=s),u){case DIFF_INSERT:t.diffs[o++]=e[l],t.length2+=c.length,i=i.substring(0,s)+c+i.substring(s);break;case DIFF_DELETE:t.length1+=c.length,t.diffs[o++]=e[l],i=i.substring(0,s)+i.substring(s+c.length);break;case DIFF_EQUAL:c.length<=2*this.Patch_Margin&&o&&e.length!=l+1?(t.diffs[o++]=e[l],t.length1+=c.length,t.length2+=c.length):c.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(t,a),n.push(t),t=new diff_match_patch.patch_obj,o=0,a=i,r=s)}u!==DIFF_INSERT&&(r+=c.length),u!==DIFF_DELETE&&(s+=c.length)}return o&&(this.patch_addContext_(t,a),n.push(t)),n},diff_match_patch.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],o=new diff_match_patch.patch_obj;o.diffs=[];for(var r=0;r<i.diffs.length;r++)o.diffs[r]=new diff_match_patch.Diff(i.diffs[r][0],i.diffs[r][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,e[n]=o}return e},diff_match_patch.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,o=[],r=0;r<t.length;r++){var s=t[r].start2+i,a=this.diff_text1(t[r].diffs),l=-1;if(a.length>this.Match_MaxBits){var u=this.match_main(e,a.substring(0,this.Match_MaxBits),s);-1!=u&&(-1==(l=this.match_main(e,a.substring(a.length-this.Match_MaxBits),s+a.length-this.Match_MaxBits))||u>=l)&&(u=-1)}else u=this.match_main(e,a,s);if(-1==u)o[r]=!1,i-=t[r].length2-t[r].length1;else if(o[r]=!0,i=u-s,a==(s=-1==l?e.substring(u,u+a.length):e.substring(u,l+this.Match_MaxBits)))e=e.substring(0,u)+this.diff_text2(t[r].diffs)+e.substring(u+a.length);else if(s=this.diff_main(a,s,!1),a.length>this.Match_MaxBits&&this.diff_levenshtein(s)/a.length>this.Patch_DeleteThreshold)o[r]=!1;else{var c;for(this.diff_cleanupSemanticLossless(s),a=0,l=0;l<t[r].diffs.length;l++){var h=t[r].diffs[l];h[0]!==DIFF_EQUAL&&(c=this.diff_xIndex(s,a)),h[0]===DIFF_INSERT?e=e.substring(0,u+c)+h[1]+e.substring(u+c):h[0]===DIFF_DELETE&&(e=e.substring(0,u+c)+e.substring(u+this.diff_xIndex(s,a+h[1].length))),h[0]!==DIFF_DELETE&&(a+=h[1].length)}}}return[e=e.substring(n.length,e.length-n.length),o]},diff_match_patch.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var o=(i=t[0]).diffs;if(0==o.length||o[0][0]!=DIFF_EQUAL)o.unshift(new diff_match_patch.Diff(DIFF_EQUAL,n)),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var r=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=r,i.start2-=r,i.length1+=r,i.length2+=r}return 0==(o=(i=t[t.length-1]).diffs).length||o[o.length-1][0]!=DIFF_EQUAL?(o.push(new diff_match_patch.Diff(DIFF_EQUAL,n)),i.length1+=e,i.length2+=e):e>o[o.length-1][1].length&&(r=e-o[o.length-1][1].length,o[o.length-1][1]+=n.substring(0,r),i.length1+=r,i.length2+=r),n},diff_match_patch.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var o=i.start1,r=i.start2,s="";0!==i.diffs.length;){var a=new diff_match_patch.patch_obj,l=!0;for(a.start1=o-s.length,a.start2=r-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,s)));0!==i.diffs.length&&a.length1<e-this.Patch_Margin;){s=i.diffs[0][0];var u=i.diffs[0][1];s===DIFF_INSERT?(a.length2+=u.length,r+=u.length,a.diffs.push(i.diffs.shift()),l=!1):s===DIFF_DELETE&&1==a.diffs.length&&a.diffs[0][0]==DIFF_EQUAL&&u.length>2*e?(a.length1+=u.length,o+=u.length,l=!1,a.diffs.push(new diff_match_patch.Diff(s,u)),i.diffs.shift()):(u=u.substring(0,e-a.length1-this.Patch_Margin),a.length1+=u.length,o+=u.length,s===DIFF_EQUAL?(a.length2+=u.length,r+=u.length):l=!1,a.diffs.push(new diff_match_patch.Diff(s,u)),u==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(u.length))}s=(s=this.diff_text2(a.diffs)).substring(s.length-this.Patch_Margin),""!==(u=this.diff_text1(i.diffs).substring(0,this.Patch_Margin))&&(a.length1+=u.length,a.length2+=u.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===DIFF_EQUAL?a.diffs[a.diffs.length-1][1]+=u:a.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,u))),l||t.splice(++n,0,a)}}},diff_match_patch.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},diff_match_patch.prototype.patch_fromText=function(t){var e=[];if(!t)return e;t=t.split("\n");for(var n=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<t.length;){var o=t[n].match(i);if(!o)throw Error("Invalid patch string: "+t[n]);var r=new diff_match_patch.patch_obj;for(e.push(r),r.start1=parseInt(o[1],10),""===o[2]?(r.start1--,r.length1=1):"0"==o[2]?r.length1=0:(r.start1--,r.length1=parseInt(o[2],10)),r.start2=parseInt(o[3],10),""===o[4]?(r.start2--,r.length2=1):"0"==o[4]?r.length2=0:(r.start2--,r.length2=parseInt(o[4],10)),n++;n<t.length;){o=t[n].charAt(0);try{var s=decodeURI(t[n].substring(1))}catch(t){throw Error("Illegal escape in patch_fromText: "+s)}if("-"==o)r.diffs.push(new diff_match_patch.Diff(DIFF_DELETE,s));else if("+"==o)r.diffs.push(new diff_match_patch.Diff(DIFF_INSERT,s));else if(" "==o)r.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,s));else{if("@"==o)break;if(""!==o)throw Error('Invalid patch mode "'+o+'" in: '+s)}n++}}return e},diff_match_patch.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},diff_match_patch.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case DIFF_INSERT:t="+";break;case DIFF_DELETE:t="-";break;case DIFF_EQUAL:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},diff_match_patch,DIFF_DELETE,DIFF_INSERT,DIFF_EQUAL},803:function(){window.polyLingVis_Draggable=function(){"use strict";var t={grid:0,filterTarget:null,limit:{x:null,y:null},threshold:0,setCursor:!1,setPosition:!0,smoothDrag:!0,useGPU:!0,onDrag:c,onDragStart:c,onDragEnd:c},e=function(){return{transform:function(){for(var t=" -o- -ms- -moz- -webkit-".split(" "),e=document.body.style,n=t.length;n--;){var i=t[n]+"transform";if(i in e)return i}}()}},n={assign:function(){for(var t=arguments[0],e=arguments.length,n=1;n<e;n++){var i=arguments[n];for(var o in i)t[o]=i[o]}return t},bind:function(t,e){return function(){t.apply(e,arguments)}},on:function(t,e,i){if(e&&i)n.addEvent(t,e,i);else if(e)for(var o in e)n.addEvent(t,o,e[o])},off:function(t,e,i){if(e&&i)n.removeEvent(t,e,i);else if(e)for(var o in e)n.removeEvent(t,o,e[o])},limit:function(t,e){return s(e)?t<(e=[+e[0],+e[1]])[0]?t=e[0]:t>e[1]&&(t=e[1]):t=+e,t},addEvent:"attachEvent"in Element.prototype?function(t,e,n){t.attachEvent("on"+e,n)}:function(t,e,n){t.addEventListener(e,n,{capture:!1,passive:!1})},removeEvent:"attachEvent"in Element.prototype?function(t,e,n){t.detachEvent("on"+e,n)}:function(t,e,n){t.removeEventListener(e,n)}};function i(e,i){var o=this,r=n.bind(o.start,o),s=n.bind(o.drag,o),a=n.bind(o.stop,o);i=n.assign({},t,i),n.assign(o,{element:e,handle:i.handle?i.handle:e,handlers:{start:{mousedown:r,touchstart:r},move:{mousemove:s,mouseup:a,touchmove:s,touchend:a}},options:i}),o.initialize()}function o(t){return parseInt(t,10)}function r(t){return"currentStyle"in t?t.currentStyle:getComputedStyle(t)}function s(t){return t instanceof Array}function a(t){return null!=t}function l(t){return t instanceof Element||"undefined"!=typeof HTMLDocument&&t instanceof HTMLDocument}function u(t){return t instanceof Function}function c(){}return n.assign(i.prototype,{setOption:function(t,e){var n=this;return n.options[t]=e,n.initialize(),n},get:function(){var t=this.dragEvent;return{x:t.x,y:t.y}},set:function(t,e){var n=this,i=n.dragEvent;return i.original={x:i.x,y:i.y},n.move(t,e),n},dragEvent:{started:!1,x:0,y:0},initialize:function(){var t,i=this,o=i.element,s=(i.handle,o.style),a=r(o),l=i.options,u=e().transform,c=i._dimensions={height:o.offsetHeight,left:o.offsetLeft,top:o.offsetTop,width:o.offsetWidth};l.useGPU&&u&&("none"===(t=a[u])&&(t=""),s[u]=t+" translate3d(0,0,0)"),l.setPosition&&(s.display="block",s.left=c.left+"px",s.top=c.top+"px",s.width=c.width+"px",s.height=c.height+"px",s.bottom=s.right="auto",s.margin=0,s.position="absolute"),l.setCursor&&(s.cursor="move"),i.setLimit(l.limit),n.assign(i.dragEvent,{x:c.left,y:c.top}),n.on(i.handle,i.handlers.start)},start:function(t){var e=this,i=e.getCursor(t),o=e.element;e.useTarget(t.target||t.srcElement)&&(t.cancelable&&(t.preventDefault&&!t.target.getAttribute("contenteditable")?t.preventDefault():t.target.getAttribute("contenteditable")||(t.returnValue=!1)),e.dragEvent.oldZindex=o.style.zIndex,o.style.zIndex=1e4,e.setCursor(i),e.setPosition(),e.setZoom(),n.on(document,e.handlers.move))},drag:function(t){var e=this,n=e.dragEvent,i=e.element,o=e._cursor,r=e._dimensions,s=e.options,a=r.zoom,l=e.getCursor(t),u=s.threshold,c=(l.x-o.x)/a+r.left,h=(l.y-o.y)/a+r.top;t.cancelable&&t.preventDefault(),!n.started&&u&&Math.abs(o.x-l.x)<u&&Math.abs(o.y-l.y)<u||(n.original||(n.original={x:c,y:h}),n.started||(s.onDragStart(i,c,h,t),n.started=!0),e.move(c,h)&&s.onDrag(i,n.x,n.y,t))},move:function(t,e){var n=this,i=n.dragEvent,o=n.options,r=o.grid,s=n.element.style,a=n.limit(t,e,i.original.x,i.original.y);return!o.smoothDrag&&r&&(a=n.round(a,r)),(a.x!==i.x||a.y!==i.y)&&(i.x=a.x,i.y=a.y,s.left=a.x+"px",s.top=a.y+"px",!0)},stop:function(t){var e,i=this,o=i.dragEvent,r=i.element,s=i.options,a=s.grid;n.off(document,i.handlers.move),r.style.zIndex=o.oldZindex,s.smoothDrag&&a&&(e=i.round({x:o.x,y:o.y},a),i.move(e.x,e.y),n.assign(i.dragEvent,e)),i.dragEvent.started&&s.onDragEnd(r,o.x,o.y,t),i.reset()},reset:function(){this.dragEvent.started=!1},round:function(t){var e=this.options.grid;return{x:e*Math.round(t.x/e),y:e*Math.round(t.y/e)}},getCursor:function(t){return{x:(t.targetTouches?t.targetTouches[0]:t).clientX,y:(t.targetTouches?t.targetTouches[0]:t).clientY}},setCursor:function(t){this._cursor=t},setLimit:function(t){var e=this,i=function(t,e){return{x:t,y:e}};if(u(t))e.limit=t;else if(l(t)){var o=e._dimensions,r=t.scrollHeight-o.height,s=t.scrollWidth-o.width;e.limit=function(t,e){return{x:n.limit(t,[0,s]),y:n.limit(e,[0,r])}}}else if(t){var c={x:a(t.x),y:a(t.y)};c.x||c.y?e.limit=function(e,i){return{x:c.x?n.limit(e,t.x):e,y:c.y?n.limit(i,t.y):i}}:e.limit=i}else e.limit=i},setPosition:function(){var t=this,e=t.element,i=e.style;n.assign(t._dimensions,{left:o(i.left)||e.offsetLeft,top:o(i.top)||e.offsetTop})},setZoom:function(){for(var t=this,e=t.element,n=1;e=e.offsetParent;){var i=r(e).zoom;if(i&&"normal"!==i){n=i;break}}t._dimensions.zoom=n},useTarget:function(t){var e=this.options.filterTarget;return!(e instanceof Function)||e(t)},destroy:function(){n.off(this.handle,this.handlers.start),n.off(document,this.handlers.move)}}),i}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var i={};return function(){"use strict";var t,e=n(655),o=(n(846),n(803),n(752)),r=n(312),s=n(455),a=n(269),l=n(450),u=n(58),c=n(215),h=n(954),p=n(70),d=n(483),g=n(346),f=n(845),m=n(536),y=n(838),v=n(593),b=n(430),L=n(401),x=n(104),w={App:o.g,Consts:r.z,DictPopup:s.w,Document:a.B,DocumentHTML:l.P,Grammar:u.m,Knowledge:c.N,Medium:h.V,Platform:p.t,PlatformAndroid:d.l,PlatformIOS:g.n,PlatformWeb:f.c,User:m.n,Utils:v.c,DomNodeHTML:l.b,polySignIn:y.xW,activate:y.QZ,init:y.S1,analyze:y.BJ,markupOnly:y.Go,markupOne:y.v5,getArticle:y.fq,getArticleRaw:y.v4,markupElement:y.ND,request:y.WY,getLanguage:y.G3,callNative:y.xX,getDictPopup:y.um,setUrl:y.x,getDifficulty:y.lV,setDifficulty:y.lf,refreshHighlight:y.SQ,getSelectedBlockText:y.Ok,getWordsInContext:y._s,initStatics:y.sz,initStaticsInt:y.lZ,sendEvent:y.qP,sendEventWithInterval:y.bf,showLabelsInt:y.nb,hideLabelsInt:y.UC,removeMarkup:y.fo,setMaterialId:y.EI,clozeTestInt:y.v1,closeClozeTestInt:y.m9,clozeTestBook:y.Mc,closeClozeTestBook:y.eN,ttsPlayBook:y.Av,ttsPauseBook:y.c8,ttsIsPlayingBook:y.g0,ttsPlayInt:y.Pl,ttsPauseInt:y.cV,ttsIsPlayingInt:y.am,clearSelection:y.MO,setDictPopup:y.Lc,isAnalyzing:y.PJ,theApp:y.Wi,theUtils:y.dJ,theUser:y.ed,theMedium:y.Ri,theKnowledge:y.ZY,theGrammar:y.fb,theDictPopup:y.og,thePlatform:y.HX};window.readium&&x.q.init(w.theApp,w.theUtils,w.theUser);var k={version:r.z.version+"."+r.z.buildNum,core:w,setClientId:function(t){w.theUtils.setClientId(t)},signIn:function(t,e,n,i,r,s,a){var l=o.g.l2||o.g.l2Init;(0,y.lZ)("web");var u=function(t){var e=w.theUtils.getErrors(t);r&&r(e)};t?n?w.theUser.signup(t,e,!0,"",u,l,i,s,a):w.theUser.signin(t,e,!0,u,l,i,s,a):w.theUser.activate(u,l,null,null,i,s,a)},signOut:function(t){w.theUser.signout((function(e){var n=w.theUtils.getErrors(e);t&&t(n)}))},forgotPassword:function(t,e){w.theUser.forgotPassword(t,e)},signInAnonymous:function(t){var e=o.g.l2||o.g.l2Init;(0,y.lZ)("web");var n=w.theUtils.storage.getItem("JWTToken"),i=function(){t&&t({success:!0})};n?w.theUser.activate(i,e):w.theUser.signinDevice((function(){w.theUser.activate(i,e)}))},prepare:function(e,n){void 0===n&&(n=!0),t?t.init(w.theMedium,w.theKnowledge,w.theUtils,y.fb,y.og):t=new l.P(document.body,"",w.theMedium,w.theKnowledge,w.theUtils,y.fb,y.og,n),t.activeElements=null==e?void 0:e.slice()},markup:function(t,e){for(var n=null,i=0;i<w.theMedium.documents.length;i++){if(w.theMedium.documents[i].element==t)return null}e=e.replace(/:/g,"-");var r="on-behalf-of:"+(o.g.prefix||"")+":"+e;(n=new l.P(t,r,w.theMedium,w.theKnowledge,w.theUtils,y.fb,y.og,!1)).getArticle((function(e,i){if(e.length)return n.markupElement(new l.b(t),e,i);n.analyze(new l.b(t))}))},getSettings:function(){return w.theUser.getSettings()},updateSettings:function(t,e,n,i){var o=function(t){i&&i(t)};if(t=(t||"").trim(),n=(n||"").trim(),t&&-1==w.theApp.getSupportedL2().indexOf(t))return o("Invalid language to learn");if(t&&n==t)return o("Language to learn must be different from the language for translation");var r=!1,s=!!n;if(e=+(e||0),isNaN(e))return o("Invalid level");if(!t||!n||!e){var a=w.theUser.getSettings();t=t||a.l2,n=n||a.l1,e||(r=!0,e=a.level)}return n==t&&(n=w.theApp.getSupportedL1(t)[0]),r||-1!=[1,2,3,4,5,6].indexOf(e)?s&&-1==w.theApp.getSupportedL1(t).indexOf(n)?o("Invalid language to translate to"):void w.theUser.updateSettings(t,e,n,(function(t){var e=w.theUtils.getErrors(t);i&&i(e)}),1,r):o("Invalid level")},getSupportedLanguages:function(){var t={};return w.theApp.getSupportedL2().forEach((function(e){t[e]={},w.theApp.getSupportedL1(e).forEach((function(n){var i="";w.Consts.natives.forEach((function(t){t.value==n&&(i=t.name)})),i&&(t[e][n]=i)}))})),t},closeDictPopup:function(){y.og&&y.og.close()},setClientData:function(t){w.theUtils.storage.setItem("lingVisClientData",t)},clozeTest:function(){return(0,e.mG)(this,void 0,void 0,(function(){return(0,e.Jh)(this,(function(e){return b.e.clozeTest(t,w.theUtils,w.theKnowledge,!1),[2]}))}))},closeClozeTest:function(){return(0,e.mG)(this,void 0,void 0,(function(){return(0,e.Jh)(this,(function(t){return b.e.closeClozeTest(),[2]}))}))},removeMarkup:function(){t.removeMarkup()},touch:function(){o.g.lastTouch=(new Date).getTime()},ttsPlay:function(e,n,i){L.A.ttsPlay(t,e,n,i)},ttsPause:function(){L.A.ttsPause()},ttsIsPlaying:function(){return L.A.isPlaying()}};window.lingVisSdk=k,y.HX.poly=k,i.default=k}(),i=i.default}()}));